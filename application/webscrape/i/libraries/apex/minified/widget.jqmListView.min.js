!function(a,b){"use strict";var c=!!a.mobile,d=c?"mobile":"apex",e=c?"jqmData":"data",f=c?"vclick":"click",g=a[d].listview.prototype.options,h=c?/(^|\s)ui-li-divider(\s|$)/:/(^|\s)a-ListView-divider(\s|$)/;if(c){if(b.jqmListView)return;b.jqmListView=!0}g.apexRegionId="",g.apexAjaxIdentifier="",g.apexPageItems="",g.apexFilter="",a(document).on("listviewcreate","ul, ol",function(){function b(b){apex.server.plugin(o.apexAjaxIdentifier,{pageItems:o.apexPageItems,x01:"FETCH",x04:n[e]("apex-last-search"),x05:b},{dataType:"html",loadingIndicator:c?function(){return a.mobile.loading("show"),function(){a.mobile.loading("hide")}}:n,loadingIndicatorPosition:"centered",refreshObject:n,clear:1===b?i:void 0,success:j})}function g(c){b(a("li[data-role!='list-divider']",n).length),c.preventDefault()}function i(){n.empty(),n.listview("refresh")}function j(b){var c=a(b),d=c.filter("li[data-role='list-divider']:first"),e=a("li[data-role='list-divider']:last",n);a("li.apex-load-more",n).remove(),n.append(c),d.text()===e.text()&&d.remove(),n.listview("refresh")}function k(){b(1)}function l(){function f(){var a=k.val();n[e]("apex-last-search",a),b(1)}var g=a[d].filterable.prototype.options.filterCallback,i=c?o.apexRegionId+"_filter_input":n.attr("data-input").substr(1),j=a("<div>",{"class":"a-ListView-searchbar ui-filterable ui-bar-"+n.attr("data-filter-theme"),role:"search"}),k=a("<input>",{id:i,placeholder:n.attr("data-filter-placeholder"),"data-type":"search"});k.appendTo(j),j.insertBefore(n),c&&k.textinput(),o.inset&&j.addClass("ui-listview-filter-inset"),o.apexFilter?k.on("change",f).on("keydown",function(a){13===a.which&&(a.preventDefault(),f())}):n.filterable({filterCallback:function(a,b){return!this.className.match(h)&&g.call(this,a,b)}})}var m,n=a(this),o=n.data(d+"-listview").options;o.apexRegionId&&o.apexAjaxIdentifier&&(m=n.parents("#"+o.apexRegionId),m.length&&apex.region.create(o.apexRegionId,{type:"ListView",widgetName:"listview",refresh:function(){k()},widget:function(){return n}}),n.on(f,"li.apex-load-more",g),(n.attr("data-apex-filter")||n.attr("data-filter")&&!c)&&l())})}(apex.jQuery,apex.widget);