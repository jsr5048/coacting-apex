!function(a,b,c,d,e,f,g,h){"use strict";apex.widget.jetChart={init:function(i,j,k,l,m,n,o,p){require(["ojs/ojcore","jquery","ojs/ojchart","ojs/ojgauge","ojs/ojgantt","ojs/ojvalidation","ojs/ojtimezonedata"],function(m){function q(){var b="100%",c=null;j&&(b=j+"px"),k?c=k+"px":"gantt"===v.type&&(c="100%"),u.css("width","100%"),u.css("max-width",b),c&&u.css("height",c),a.mobile||u.css("min-width","100px")}function r(){b.plugin(p,{pageItems:v.pageItems},{dataType:"json",refreshObject:u,loadingIndicator:u,loadingIndicatorPosition:"centered",success:s})}function s(b){function c(a){for(g in a)if(a.hasOwnProperty(g)&&a[g].items.length>0)for(j in a[g].items)if(a[g].items[j].labelDisplay)return a[g].items[j].labelDisplay}function e(a,b,c){function d(a,b,c){var d;for(d=0;d<a.length;d++)if("pie"===v.type||"funnel"===v.type||"pyramid"===v.type){if(a[d].name===b)return a[d].link}else if("stock"===v.type){var e=new Date(a[d].name),f=e.getTime();if(f===c||e===c)return a[d].link}else{if(a[d].name===c)return a[d].link;var g=new Date(a[d].name),h=g.getTime();if(h===c||g===c)return a[d].link}}var e;for(e in a)if(a.hasOwnProperty(e))if(a[e].id){if((a[e].id===b||a[e].name===b)&&a[e].items.length>0)return d(a[e].items,b,c)}else if(a[e].name&&a[e].name===b&&a[e].items.length>0)return d(a[e].items,b,c)}var g,i,j,k=["pie","funnel","pyramid","scatter","bubble","gantt","stock"],l="dial"===v.type?"dial":"chart",p="gantt"===v.type?"gantt":l;if(a.isFunction(v.dataFilter)&&(b=v.dataFilter(b)),"dial"===l)v.title&&u.closest("div").attr("title",v.title.replace(/#VALUE#/g,b.value).replace(/#MAX#/g,b.max)),b.metricLabel&&a.each(b.metricLabel,function(a){"converter"===a&&(b.metricLabel[a]=m.Validation.converterFactory("number").createConverter(b.metricLabel[a]))});else if(a.inArray(v.type,k)===-1&&b.series.length>1&&"mixedFrequency"!==v.timeAxisType&&"skipGaps"!==v.timeAxisType&&v.sorting){h.chartSortArray(b.groups,v.sorting);for(var s=0;s<b.series.length;s++)h.chartFillGaps(b.groups,b.series[s].items,v.sorting,n)}p={chart:"ojChart",dial:"ojDialGauge",gantt:"ojGantt"}[p],u[p](b),h.onVisibilityChange(u[0],function(a){a?(m.Components.subtreeShown(u[0]),q(),u[p]("refresh")):m.Components.subtreeHidden(u[0])}),"ojChart"===p&&("pie"===v.type?u[p]({drill:function(a,c){c.group&&c.series&&(i=e(b.series,c.series,c.group),i&&(d.log("Chart link: "+i),f.redirect(i)))},dataLabel:function(d){var e,f,g,h,i,j;switch(e=Math.round(d.value/d.totalValue*100)+"%",g=d.value,h=c(b.series),v.valueFormats&&v.valueFormats.value&&v.valueFormats.value.converter&&(j=v.valueFormats.value.converter,g=j.format(d.value)),a.inArray(h,["LABEL","ALL"])!==-1&&(f=d.seriesData?d.seriesData.name:"Other"),h){case"VALUE":i=g;break;case"PERCENT":i=e;break;case"LABEL":i=f;break;case"ALL":i=f+" "+e+" ( "+g+" )";break;case"COMBO":i=e+" ( "+g+" )"}return i}}):u[p]({drill:function(a,c){c.group&&c.series&&(i=e(b.series,c.series,c.group),i&&(d.log("Chart link: "+i),f.redirect(i)))}})),o>0&&setTimeout(function(){r()},1e3*o)}var t,u=a("#"+c.escapeCSS(i)+"_jet",apex.gPageContext$),v=l||{};t="dial"===v.type?"ojDialGauge":"gantt"===v.type?"ojGantt":"ojChart",g.jetChart.formatData(v,!1),u[t](v),e.create(i,{type:"JetChart",widgetName:t,refresh:function(){q(),r()},focus:function(){u.focus()},widget:function(){return u}}),e(i).refresh()})},initReportChart:function(d,e,f,i,j){require(["ojs/ojcore","jquery","ojs/ojchart","ojs/ojvalidation"],function(k){function l(){var b="100%",c="500px";r.css("width","100%"),r.css("max-width",b),c&&r.css("height",c),a.mobile||r.css("min-width","100px")}function m(){l(),j?o():n()}function n(){var a={p_widget_name:"worksheet",p_widget_mod:"GET_CHART_JSON",x01:e,x02:f};b.plugin(i,a,{dataType:"json",type:"GET",success:function(a){g.jetChart.formatData(a,!0),r[p](a),r[p]({dataLabel:function(b){var c,d,e,f;return d=b.value,a.valueFormats&&a.valueFormats.value&&a.valueFormats.value.converter&&(f=a.valueFormats.value.converter,d=f.format(d)),c=b.seriesData?b.seriesData.name:"Other",e="pie"===b.seriesData.type?c+" - "+d:null}})}})}function o(){b.widget("wsChart",{x01:j},{dataType:"json",success:function(a){g.jetChart.formatData(a,!0),r[p](a),r[p]({dataLabel:function(b){var c,d,e,f;return d=b.value,a.valueFormats&&a.valueFormats.value&&a.valueFormats.value.converter&&(f=a.valueFormats.value.converter,d=f.format(d)),c=b.seriesData?b.seriesData.name:"Other",e="pie"===b.seriesData.type?c+" - "+d:null}})}})}var p,q,r=a("#"+c.escapeCSS(d),apex.gPageContext$);q={legend:{rendered:"off"},animationOnDisplay:"auto",animationOnDataChange:"auto",hoverBehavior:"dim",groups:[],series:[],valueFormats:[]},p="ojChart",r[p](q),m(),h.onVisibilityChange(r[0],function(a){a?(k.Components.subtreeShown(r[0]),l(),r[p]("refresh")):k.Components.subtreeHidden(r[0])})})},formatData:function(b,c){var d,e,f,g,h=b,i=new oj.ColorAttributeGroupHandler;if(c)if("bar"!==h.type){for(g=h.series,e=0;e<g.length;e++)g[e].color=i.getValue(g[e].name);h.series=g}else{for(g=h.series[0].items,e=0;e<g.length;e++)g[e].color=i.getValue(g[e].name);h.series[0].items=g}if("gantt"!==h.type)h.valueFormats&&a.each(h.valueFormats,function(b){a.each(h.valueFormats[b],function(a,c){"converter"===a&&(d=c.formatType?"datetime":"number",h.valueFormats[b][a]=oj.Validation.converterFactory(d).createConverter(h.valueFormats[b][a]))})}),h.xAxis&&h.xAxis.tickLabel&&a.each(h.xAxis.tickLabel,function(a,b){"converter"===a&&(d=b.formatType?"datetime":"number",h.xAxis.tickLabel[a]=oj.Validation.converterFactory(d).createConverter(h.xAxis.tickLabel[a]))}),h.yAxis&&h.yAxis.tickLabel&&a.each(h.yAxis.tickLabel,function(a,b){"converter"===a&&(d=b.formatType?"datetime":"number",h.yAxis.tickLabel[a]=oj.Validation.converterFactory(d).createConverter(h.yAxis.tickLabel[a]))}),h.y2Axis&&h.y2Axis.tickLabel&&a.each(h.y2Axis.tickLabel,function(a,b){"converter"===a&&(d=b.formatType?"datetime":"number",h.y2Axis.tickLabel[a]=oj.Validation.converterFactory(d).createConverter(h.y2Axis.tickLabel[a]))});else{if(h.majorAxis&&h.majorAxis.converter)for(f in h.majorAxis.converter)d="datetime",h.majorAxis.converter[f]=oj.Validation.converterFactory(d).createConverter(h.majorAxis.converter[f]);if(h.minorAxis&&h.minorAxis.converter)for(f in h.minorAxis.converter)d="datetime",h.minorAxis.converter[f]=oj.Validation.converterFactory(d).createConverter(h.minorAxis.converter[f])}return h}}}(apex.jQuery,apex.server,apex.util,apex.debug,apex.region,apex.navigation,apex.widget,apex.widget.util);