!function(a,b,c,d,e,f,g,h){"use strict";function i(a,b){var c="";return"start"===a?c=" u-tS":"end"===a?c=" u-tE":"left"===a?c=" u-tL":"right"===a?c=" u-tR":"center"!==a||b||(c=" u-tC"),c}function j(a,b,c){var d;return a.highlight&&(d=b.highlights[a.highlight],c+=d&&d.cssClass?" "+d.cssClass:" "+a.highlight),c}function k(a,b,c,d,e){var f=N;return a.agg?(f+=" is-aggregate",f+=" a-GV-aggregate--"+a.agg,a.grandTotal&&(f+=" is-grandTotal")):((a.sel||c)&&(f+=" "+sa),a.deleted?f+=" "+Ca:(a.inserted?f+=" is-inserted":a.updated&&(f+=" is-updated"),a.error?f+=" is-error":a.warning&&(f+=" is-warning"),f=j(a,b,f),d.allowEdit(e)||(f+=" is-readonly"))),f}function l(a,b,c,d,e){var f=R;return f+=i(a.alignment),a.columnCssClasses&&(f+=" "+a.columnCssClasses),e&&(e.hasClass(sa)&&(f+=" "+sa),e.hasClass(ua)&&(f+=" "+ua),e.hasClass(za)&&(f+=" "+za)),c&&(b.deleted||(c.error?f+=" is-error":c.warning?f+=" is-warning":c.changed&&(f+=" is-changed")),f=j(c,d,f),c.disabled&&(f+=" is-disabled"),c.ck&&(f+=" is-readonly")),a.usedAsRowHeader&&!b.agg&&(f+=" "+aa),f}function m(a){return d.getMessage("APEX.GV."+a)}function n(a){var b=Array.prototype.slice.call(arguments);return b[0]="APEX.GV."+a,d.formatMessage.apply(d,b)}function o(a,b,c){for(var d,e,f=0,g=a.length-1;f<=g;)if(d=g+f>>1,e=c(b,a[d]),e>0)f=d+1;else{if(!(e<0))return d;g=d-1}return f}function p(a,b){return a.offset-b.offset}function q(a){return a.parent().children().index(a)}function r(a){var b=h(a.toString());return b.find("a,button,input,select,textarea").prop("tabIndex",-1),b}function s(a){return h(a).closest(ha)}function t(a){return h(a).closest(la)}function u(a){return h(a).closest(S)}function v(a,b){var c,d,e=a.children();return e.last().hasClass(W)?(d=0,e.each(function(){if(d+=parseInt(h(this).attr(hb),10)||1,d>b)return c=h(this),!1})):c=e.eq(b),c}function w(a){var b;return a.hasClass(W)?(b=0,a.parent().children().each(function(){return this!==a[0]&&void(b+=parseInt(h(this).attr(hb),10)||1)})):b=q(a),b}function x(a){h("body").on(rb,function(b){b.which===lb.ESCAPE&&(h("body").off(rb),a())})}function y(){h("body").off(rb)}function z(a){var b=a.groupName||null;return b&&a.useGroupFor&&a.useGroupFor.indexOf("heading")<0&&(b=null),b}function A(a,b){var c=a.parent()[0],d={h:!1,v:!1};return a.outerHeight()+(b||parseInt(a.css("margin-top"),10))>c.clientHeight&&(d.v=!0),a.outerWidth()>c.clientWidth&&(d.h=!0),d}var B="a-GV",C="a-GV-hdr",D="."+C,E="a-GV-bdy",F="."+E,G="a-GV-w-frozen",H="."+G,I="a-GV-w-hdr",J="."+I,K="a-GV-w-scroll",L="."+K,M="a-GV-table",N="a-GV-row",O="table",P="tr",Q="td,th",R="a-GV-cell",S="."+R,T="a-GV-scrollFiller",U="a-GV-header",V="."+U,W="a-GV-headerGroup",X="."+W,Y="a-GV-headerLabel",Z="a-GV-columnControls",$="."+Z,_="a-GV-columnHandle",aa="a-GV-rowHeader",ba="u-selector",ca=ba+" "+ba+"--single",da="."+ba,ea="a-GV-selHeader",fa="."+ea,ga=fa+V,ha=".a-GV-header,.a-GV-headerGroup,.a-GV-cell,.a-GV-controlBreakHeader",ia="a-GV-controlBreak",ja="a-GV-controlBreakHeader",ka="."+ja,la="."+R+",."+ja,ma="js-tabTrap",na="."+ma,oa="js-autoAdd",pa="a-GV-floatingItemContent",qa="."+pa,ra=".a-GV-loadMoreButton",sa="is-selected",ta="."+sa,ua="is-focused",va="is-hover",wa="."+va,xa="is-disabled",ya="is-expanded",za="is-active",Aa="."+za,Ba=Aa+S,Ca="is-deleted",Da="tr."+Ca,Ea="is-aggregate",Fa="aria-selected",Ga="aria-multiselectable",Ha="aria-readonly",Ia="aria-label",Ja="aria-expanded",Ka="aria-labelledby",La="aria-checked",Ma="u-RTL",Na=":visible",Oa=":tabbable",Pa="none",Qa="sequence",Ra="label",Sa="true",Ta="false",Ua="selectionChange",Va="modeChange",Wa="sortChange",Xa="columnReorder",Ya="columnResize",Za="activateColumnHeader",$a="cancelColumnHeader",_a="pageChange",ab="activateCell",bb=10,cb=40,db=200,eb=10,fb=10,gb="title",hb="colspan",ib="data-idx",jb="data-id",kb="data-rownum",lb=h.ui.keyCode,mb=0,nb=a.invokeAfterPaint,ob="wheel";"onwheel"in document.body||(ob=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll");var pb={begin:function(a,b,c){this.text=""},beginRow:function(a,b,c){a>0&&(this.text+="\r\n")},cell:function(a,b,c,d){a>0&&(this.text+="\t"),this.text+=d},endRow:function(){},end:function(){},toString:function(){return this.text}},qb={begin:function(a,b,c){return 1===c.length&&b.records&&1===b.records.length?void(this.text=""):(this.table=!0,void(this.text="<table><tbody>"))},beginRow:function(a,b,c){this.table&&(this.text+="<tr>")},cell:function(b,c,d,e){this.table?this.text+="<td>"+a.escapeHTML(e)+"</td>":this.text+=a.escapeHTML(e)},endRow:function(){this.table&&(this.text+="</tr>")},end:function(){this.table&&(this.text+="</tbody></table>")},toString:function(){return this.text}},rb="keydown.gridGlobalEscape",sb=function(a,b,c){a.element.hasClass(B)&&(a._updateStatus(),b&&a._trigger(Ua,c))},tb=a.debounce(sb,1),ub=a.debounce(sb,350);h.widget("apex.grid",h.apex.tableModelViewBase,h.extend(!0,{version:"18.1",widgetEventPrefix:"grid",options:{showNullAs:"-",stickyTop:!1,columns:null,columnGroups:null,columnSort:!0,columnSortMultiple:!0,resizeColumns:!0,reorderColumns:!0,aggregateLabels:{},aggregateTooltips:{},tabbableCellContent:"a,button",allowEditMode:!0,allowDelete:!0,allowInsert:!0,allowCopy:!0,rowHeader:Pa,rowHeaderCheckbox:!1,rowHeaderLabelColumn:null,rowHeaderWidth:null,selectCells:!1,multiple:!1,multipleCells:!0,selectAll:!0,persistSelection:!1,tooltip:{tooltipClass:"a-GV-tooltip"},dataTransferFormats:[{format:"text/plain",writer:Object.create(pb)},{format:"text/html",writer:Object.create(qb)}],selectionChange:null,activateColumnHeader:null,activateCell:null,cancelColumnHeader:null,sortChange:null,columnReorder:null,columnResize:null,modeChange:null,pageChange:null},_create:function(){var a=this,b=this.options,d=this.element;c.info("Grid '"+d[0].id+"' created. Model: "+b.modelName),d.addClass(B).attr("role","grid"),b.multiple&&d.attr(Ga,Sa),b.editable||d.attr(Ha,Sa),this.forwardKey=lb.RIGHT,this.backwardKey=lb.LEFT,"rtl"===d.css("direction")&&(d.addClass(Ma),this.forwardKey=lb.LEFT,this.backwardKey=lb.RIGHT),this._enforceOptionConstraints(),this._super(),this.origLabelBy=d.attr(Ka),this.idPrefix=d[0].id||"agv_"+mb++,this.accContextId=this.idPrefix+"_ctx",this.curRowHeaders="",this.tableFrozenHeader$=null,this.tableHeader$=null,this.tableFrozenData$=null,this.tableData$=null,this.lastEditModeCell=null,this.frozenColumnCount=0,this.controlBreaks=[],this.editMode=!1,this.columns=null,this.columnsStale=!0,this.columnGroups=null,this.lastFrozenColIndex=-1,this.lastFocused=null,this.lastRow$=null,this.focusInHeader=!1,this.lastHoverCell=null,this.lastHoverRow=null,this.columnControls$=null,this.scrollTimerId=null,this.deactivateDelayTimer=null,this.gotoCellPending=null,this._initContextMenu(P,function(b){return h(b.target).closest("a").length>0||a.editMode},function(b){var c;if(c=u("keydown"===b.type?this.lastFocused:b.target),c.length){if(a.options.selectCells){if(!c.hasClass(sa))return c}else if(!c.parent().hasClass(sa))return c;return!0}return!1},function(b){a.options.selectCells?b.selectedRange=a.getSelectedRange():b.selectedRecords=a.getRecords(b.selection)}),this._initModel(b.modelName),this._on(this._eventHandlers),b.allowCopy&&f.addHandler(d[0],function(b){return!a.editMode&&(a._copy(b),!0)}),this._updateHighlights(),this.refresh(),this._setSelectionMode(),b.disabled&&this._setOption("disabled",b.disabled)},_eventHandlers:{resize:function(a){a.target===this.element[0]&&(this.resize(),a.stopPropagation())},click:function(a){var b,c,d=this,e=this.options,f=h(a.target);if(!(f.closest("a,button,.a-GV-footer").length>0||f.closest(".a-GV-floatingItem").length>0)){if(b=f.closest(ga),b.length)return this.focusInHeader=!0,d.lastColIndex=null,void(e.rowHeaderCheckbox&&e.multiple&&e.selectAll&&!e.selectCells?(c=b.find(da).attr(La)===Sa,c?d.setSelection(h()):d.selectAll(),d._select(b,a,!0,!1),d._setFocusable(b[0])):d._select(b,a,!0,!1));if(b=f.closest(X),b.length)return this.focusInHeader=!0,d.lastColIndex=null,d._select(b,a,!0,!1),void a.preventDefault();if(b=f.closest(V),b.length&&0===f.closest("button").length)return this.focusInHeader=!0,d.lastColIndex=null,d._select(b,a,!0,!1),this._activateColumnHeader(a,b),void a.preventDefault();if(b=f.closest(fa),b.length)return e.rowHeaderCheckbox&&!e.selectCells&&(a.ctrlKey=!0,a.shiftKey=!1),this.focusInHeader=!1,d.lastColIndex=null,this._select(b,a,!0,!1),void a.preventDefault();b=f.closest(S),b.length&&(this.focusInHeader=!1,d.lastColIndex=null,b.hasClass(za)||(this._select(b,a,!0,!1),a.preventDefault())),b=f.closest(ka),b.length&&(this.focusInHeader=!1,d.lastColIndex=null,this._select(b,a,!0,!1),a.preventDefault())}},dblclick:function(a){var b=this.options,c=h(a.target).closest(S).not(fa);c.length&&(b.editable&&b.allowEditMode?this.editMode||this.setEditMode(!0):this._fireActivate(a,c))},mousedown:function(a){var b=h(a.target);0!==a.originalEvent.button||b.closest(".a-GV-footer").length>0||(b.closest(".a-GV-expandCollapse").length>0||!this.editMode||!b.closest(S).hasClass(za)&&!b.closest(".a-GV-floatingItem"))&&a.preventDefault()},keydown:function(a){function b(){f.hasClass(ea)?f.find(da).click():(n._activateColumnHeader(a,f),a.preventDefault())}function c(a,b){var c,d=null;for(a+=b,c=a;c>=0&&c<n.columns.length;c+=b)if(!n.columns[c].hidden){d=c;break}return d}var d,e,f,g,i,j,k,l,m,n=this,o=this.options,p=null,r=a.which,v=h(a.target);if(!(v.closest(".a-GV-footer").length>0)){if(r!==lb.PAGE_UP&&r!==lb.PAGE_DOWN||(j=this.displayPageSize),r===lb.HOME)!this.editMode&&this.lastFocused&&(this.lastColIndex=null,p=this.lastRow$.first(),a.preventDefault());else if(r===lb.END)!this.editMode&&this.lastFocused&&(this.lastColIndex=null,p=this.lastRow$.last(),a.preventDefault());else if(r===lb.PAGE_DOWN)this.focusInHeader||this.editMode||a.altKey||(p=this._getNextCellDown(t(this.lastFocused),j),a.preventDefault());else if(r===lb.PAGE_UP)this.focusInHeader||this.editMode||a.altKey||(p=this._getPrevCellUp(t(this.lastFocused),j,!0),a.preventDefault());else if(r===lb.DOWN){if(f=s(this.lastFocused),o.columnSort&&a.altKey&&f.hasClass(U))return void n._sortChange(a,f,"desc");this.editMode&&!this.focusInHeader||!this.lastFocused||a.altKey||(p=this._getNextCellDown(f,1),a.preventDefault()),v.closest(".js-menuButton").length&&a.stopPropagation()}else if(r===lb.UP){if(f=s(this.lastFocused),o.columnSort&&a.altKey&&f.hasClass(U))return void n._sortChange(a,f,"asc");this.editMode&&!this.focusInHeader||!this.lastFocused||a.altKey||(p=this._getPrevCellUp(f,1),a.preventDefault(),a.stopPropagation())}else if(r===this.backwardKey){if(a.altKey)return;if(f=s(this.lastFocused),(a.ctrlKey||a.shiftKey)&&(f.hasClass(U)||f.hasClass(W))&&(!f.hasClass(ea)||o.rowHeader===Qa||o.rowHeader===Ra)&&(i=parseInt(f.attr(ib),10),!isNaN(i)||a.ctrlKey||o.rowHeader===Qa||o.rowHeader===Ra))if(i>=0&&(g=this.columns[i]),a.shiftKey&&o.reorderColumns){if(a.preventDefault(),f.hasClass(W))k=q(f.parent()),i>0&&(this.moveColumnGroup(k,i,i-1),f=h(this.lastFocused).closest(X));else if(i=c(i,-1))return void this.moveColumn(g,i)}else if(a.ctrlKey&&o.resizeColumns&&!f.hasClass(W))return void(g?f.outerWidth()>cb&&(m=f.outerWidth()-bb,m<cb&&(m=cb),this.setColumnWidth(g,m)):n.rowHeaderWidth>cb&&(m=n.rowHeaderWidth-bb,m<cb&&(m=cb),n.rowHeaderWidth=m,this._calculateColumnWidths(f,!0)));this.editMode&&!this.focusInHeader||!this.lastFocused||(this.lastColIndex=null,e=this.lastRow$.index(f),e>0&&(e-=1,p=this.lastRow$.eq(e)),a.preventDefault())}else if(r===this.forwardKey){if(a.altKey)return;if(f=s(this.lastFocused),(a.ctrlKey||a.shiftKey)&&(f.hasClass(U)||f.hasClass(W))&&(!f.hasClass(ea)||o.rowHeader===Qa||o.rowHeader===Ra)&&(i=parseInt(f.attr(ib),10),!isNaN(i)||a.ctrlKey||o.rowHeader===Qa||o.rowHeader===Ra))if(i>=0&&(g=this.columns[i]),a.shiftKey&&o.reorderColumns){if(a.preventDefault(),f.hasClass(W))k=q(f.parent()),i<this.columnGroups[k].length-1&&(this.moveColumnGroup(k,i,i+1),f=h(this.lastFocused).closest(X));else if(i=c(i,1))return void this.moveColumn(g,i)}else if(a.ctrlKey&&o.resizeColumns&&!f.hasClass(W))return void(g?this.setColumnWidth(g,f.outerWidth()+bb):(n.rowHeaderWidth+=bb,this._calculateColumnWidths(f,!0)));this.editMode&&!this.focusInHeader||!this.lastFocused||(this.lastColIndex=null,e=this.lastRow$.index(f),e<this.lastRow$.length-1&&(e+=1,p=this.lastRow$.eq(e)),a.preventDefault())}else if(65===r&&a.ctrlKey&&!this.editMode)this.selectAll(),a.preventDefault();else if(r===lb.SPACE){if("BUTTON"===a.target.nodeName)return;if(f=v.filter(fa).find(da),f.length)return f.click(),void a.preventDefault();f=s(this.lastFocused),f.hasClass(U)?b():f.hasClass(R)&&!this.editMode&&(this._select(f,a,!0,!0),a.preventDefault())}else if(r===lb.ENTER){if(!v.hasClass("a-GV-expandCollapse")&&v.closest("a,button,.js-uses-enter,"+qa).length>0)return;if(f=v.filter(fa).find(da),f.length)return void f.click();f=s(this.lastFocused),this.editMode&&(f.hasClass(R)||f.hasClass(ja))?a.shiftKey?(p=this._getPrevCellUp(f,1),p&&p.hasClass(U)&&(p=null),a.shiftKey=!1):p=this._getNextCellDown(f,1):(a.preventDefault(),o.editable&&o.allowEditMode&&f.hasClass(R)&&!f.hasClass(ea)?this.setEditMode(!0):f.hasClass(U)?b():o.editable&&o.allowEditMode||!f.hasClass(R)||this._fireActivate(a,f))}else if(113===r)f=u(this.lastFocused),f.length&&o.editable&&o.allowEditMode&&!this.editMode&&this.setEditMode(!0);else if(r===lb.ESCAPE)o.editable&&o.allowEditMode&&this.editMode&&(f=u(this.lastFocused),f.length&&this._setFocusable(f[0]),f.focus(),this.setEditMode(!1),f.length&&this._setFocus(this._getCellFocusable(f)),a.stopPropagation());else if(r===lb.DELETE){if(o.editable&&o.allowDelete&&!this.editMode&&!this.focusInHeader){for(l=this.getSelectedRecords(),d=0;d<l.length;d++)this.model.allowDelete(l[d])||(l.splice(d,1),d-=1);l.length>0&&this.model.deleteRecords(l)}}else 45===r?o.editable&&o.allowInsert&&!this.editMode&&!o.selectCells&&this.model.allowAdd()&&(l=this.getSelectedRecords(),l.length>0?this.model.insertNewRecord(null,l[l.length-1]):this.model.insertNewRecord()):112===r&&a.altKey&&(f=s(this.lastFocused),f.hasClass(ea)||f.hasClass(W)||f.hasClass(ja)||(g=this._getColumnMetadata(f),g&&g.helpid&&apex.theme.popupFieldHelp(g.helpid,$v("pInstance"))));p&&(this._select(p,a,!0,!0),a.preventDefault())}},focusin:function(a){var b,c,d=h(a.target);return d.closest(".a-GV-floatingItem").length?void this._clearDeactivate():(b=d.closest(ha),0===b.length?void(d.hasClass(ma)||(this.lastEditModeCell=null)):(b.addClass(ua),this.lastEditModeCell===b[0]?void this._clearDeactivate():void(this.editMode&&(b.hasClass(R)||b.hasClass(ja))?(this.focusInHeader=!1,c=h(this.lastEditModeCell),this._clearDeactivate(),c.length&&this._deactivateCell(c),this._activateCell(b)):this._setFocusable(a.target))))},focusout:function(a){var b=h(a.target),c=b.closest(ha);!c.length&&this.lastEditModeCell&&b.closest(".a-GV-floatingItem").length&&(c=h(this.lastEditModeCell)),c.removeClass(ua),this.editMode&&c.hasClass(R)&&this._beginDeactivate(c)},mousemove:function(a){var b,c,d,e,f,g=h(a.target),i=this.options,j=g.closest(ha);j.length?j[0]!==this.lastHoverCell&&(b=j.parent(),b[0]!==this.lastHoverRow&&(this._clearHoverStates(),this.lastHoverRow=b[0],!b.hasClass(N)&&!b.hasClass(ia)||this.columnReordering||this.columnWidthDragging||this._setRowHoverState(b)),this.lastHoverCell=j[0],this.columnControls$.hide(),this.columnHandle$.hide(),"TH"!==j[0].nodeName||j.hasClass(R)||b.hasClass(ia)||(e=this.columns[j.attr(ib)],!i.columnSort||this.columnReordering||this.columnWidthDragging||j.hasClass(ea)||j.hasClass(W)||!e.canSort||(j.append(this.columnControls$.show()),this._updateColumnControls(e)),!i.reorderColumns||this.columnReordering||this.columnWidthDragging||j.hasClass(ea)||(this.columnReorderCell$=j,j.append(this.columnHandle$.show().css("left",""))),!i.resizeColumns||this.columnReordering||this.columnWidthDragging||j.hasClass(ea)&&i.rowHeader!==Qa&&i.rowHeader!==Ra||(c=j.closest("div")[0],d=j[0].offsetLeft+c.offsetLeft-c.scrollLeft,this.element.hasClass(Ma)||(d+=j.outerWidth()),this.columnWidthHandle$.show().css("left",d-this.columnWidthHandle$.width()/2),f=j.attr(ib),f?this.columnWidthCell$=this._columnFromIndex(f):this.columnWidthCell$=this.element.find(V+fa)))):null!==this.lastHoverCell&&(this.lastHoverCell=null,this.lastHoverRow=null,this._clearHoverStates())},mouseleave:function(){null!==this.lastHoverCell&&(this.lastHoverCell=null,this.lastHoverRow=null,this._clearHoverStates())}},_initTooltips:function(b){var d,e=this;return h.ui.tooltip?(this.tooltipOptions&&(this.element.find(F).filter(":data('ui-tooltip')").tooltip("destroy"),this.tooltipOptions=null),void(b&&(d=this.tooltipOptions=h.extend(!0,{show:apex.tooltipManager.defaultShowOption(),tooltipClass:"a-GV-tooltip"},b),d.items=Q,d._originalContent=d.content,d.content=function(b){var c,f,g,i=h(this),j=i.parent(),k=null,l=null,m=e._getColumnMetadata(i);if(c=j.attr(jb),c&&(k=e.model.getRecordMetadata(c)),m&&k&&k.fields&&(l=k.fields[m.property]),k&&!k.deleted){if(l&&(l.error||l.warning))return f=l.error?"is-error":"is-warning","<span class='"+f+"'>"+a.escapeHTML(l.message)+"</span>";if((k.error||k.warning)&&i.hasClass(ea))return f=k.error?"is-error":"is-warning","<span class='"+f+"'>"+a.escapeHTML(k.message)+"</span>";if(k.agg&&m&&(g=e.options.aggregateTooltips[k.agg+"|"+m.property]))return"<span class='"+f+"'>"+a.escapeHTML(g)+"</span>"}return d._originalContent?d._originalContent.call(this,b,e.model,k,l,m):null},d.open=function(a,b){b.tooltip.find(".is-error").length&&b.tooltip.addClass("is-error"),b.tooltip.find(".is-warning").length&&b.tooltip.addClass("is-warning")},this.element.find(F+","+D).tooltip(d)))):void c.warn("tooltip option ignored because missing tooltip widget dependency")},_destroy:function(){var a=this.element;this._tableModelViewDestroy(),a.removeClass(B+" "+xa+" "+Ma).removeAttr("role").removeAttr(Ga).removeAttr(Ha).attr(Ka,this.origLabelBy).empty(),f.removeHandler(a[0]),c.info("Grid '"+a[0].id+"' destroyed. Model: "+this.options.modelName),this.tableData$=null,this.tableFrozenData$=null,this._initModel(null),this.gridStyles$&&this.gridStyles$.remove(),this._destroyContextMenu()},_setOption:function(a,b){var d=this.element,e=this.options;if(c.info("Grid '"+d[0].id+"' set option '"+a+"' to: ",b),this._checkContextMenuOptions(a,b),"allowCopy"===a)throw new Error("Grid "+a+" cannot be set");"editable"===a&&!b&&this.editMode?this.setEditMode(!1):"multiple"===a&&this.setSelection(h()),this._super(a,b),this._enforceOptionConstraints(),"disabled"===a?(d.toggleClass(xa,b),this.lastFocused&&(b?this.lastFocused.tabIndex=-1:this._setFocusable(this.lastFocused)),b&&this.resize()):"selectCells"===a?this._setSelectionMode():"multiple"===a?(b?d.attr(Ga,Sa):d.removeAttr(Ga),e.rowHeader!==Pa&&e.rowHeaderCheckbox&&this.refreshColumns(),this.refresh()):"modelName"===a?(this.editMode&&this.setEditMode(!1),this._initModel(b),this.refresh(!1,!0)):"highlights"===a?this._updateHighlights():"tooltip"===a?this._initTooltips(b):"rowHeader"!==a&&"rowHeaderCheckbox"!==a&&"rowHeaderLabelColumn"!==a&&"columnSort"!==a&&"resizeColumns"!==a&&"reorderColumns"!==a&&"editable"!==a&&"pagination"!==a&&"selectAll"!==a&&"footer"!==a&&"autoAddRecord"!==a||("editable"===a&&(b?d.removeAttr(Ha):d.attr(Ha,Sa)),this._refreshGrid())},_enforceOptionConstraints:function(){var a=this.options;a.rowHeaderCheckbox&&a.rowHeader===Pa&&(c.warn("Option rowHeaderCheckbox cannot be true when rowHeader is 'none'."),a.rowHeaderCheckbox=!1),!a.multiple||a.rowHeader!==Pa&&a.rowHeaderCheckbox||!apex.userHasTouched()||(a.rowHeader===Pa&&(a.rowHeader="plain"),a.rowHeaderCheckbox=!0),a.editable&&a.allowEditMode||(a.autoAddRecord=!1),a.rowHeader!==Pa&&(a.rowHeaderWidth?this.rowHeaderWidth=a.rowHeaderWidth:(a.rowHeaderCheckbox?this.rowHeaderWidth=34:this.rowHeaderWidth=16,a.rowHeader!==Qa&&a.rowHeader!==Ra||(this.rowHeaderWidth+=38)))},refresh:function(a){var b,d,e,f,g,i,j,k,l=null,m=null,n=null,o=this,p=this.options,r=this.element;if(c.info("Grid '"+r[0].id+"' refreshed. Model: "+p.modelName),void 0===a&&(a=h(document.activeElement).closest(r[0]).length>0),null===r[0].offsetParent)return void(this.pendingRefresh=!0);if(this.pendingRefresh=!1,l=r.find(Ba),l.length&&this._deactivateCell(l),this.focusInHeader?this.columnsStale&&this.columns&&(n=q(h(this.lastFocused).closest(P)),d=h(this.lastFocused).closest("th").attr(ib),d&&(d=this.columns[d].property),this.lastFocused=null):this.lastFocused=null,this.tableData$&&(!p.persistSelection||p.selectCells))if(p.selectCells)e=this.getSelection(),e.length>0&&(l=e[0].first(),f=q(l),this.tableFrozenData$&&0===l.closest(this.tableFrozenData$).length&&(f+=this.tableFrozenData$.find(P).first().children().length),m={rowIndex:q(l.parent()),colIndex:f});else{for(e=this.getSelection(),m=[],b=0;b<e.length;b++)i=e[b].first().attr(jb),void 0!==i&&m.push(i);0===m.length&&(m=null)}this._refreshPagination(r.find(L)),this.columnsStale||!this.columns?this._initGrid():(this.tableFrozenData$&&this.tableFrozenData$.empty(),this.tableData$.empty(),this._clearChildrenRowCache()),this.controlBreaks=[],this._updateStatus(),this.noData||this.resize(),j=r.find(D),null!==n&&d&&(k=p.columns[0][d],k&&(d=k.seq-1,j.find("thead").each(function(){if(l=h(this).children().eq(n).find("th[data-idx='"+d+"']"),l.length)return!1})),l&&l.length||(l=j.find("thead").first().find(P).eq(n).children().first()),l&&l.length&&(o._select(l,null,a,!1,!0),a=!1)),this._addPageOfRecords(function(){var b,c,d,i,k=!1;if(r.find(V+" "+da).attr("aria-disabled",o.noData?Sa:Ta).toggleClass(xa,o.noData),o._updateAccLabel(),p.hasSize&&o._calculateColumnWidths(null,!0,!0),o.lastHoverCell=null,o.lastHoverRow=null,o.lastFocused&&h(o.lastFocused).is(Na)||(o.lastRow$=null,o.lastFocused=o._getCellFocusable(r.children(F).find("tbody tr").first().children().first()),o.lastFocused?(o.selectAnchor=o.lastFocused,o.focusInHeader=!1):(o.lastFocused=o._getCellFocusable(j.find("thead").first().find(P).last().children().first()),o.focusInHeader=!0),o.lastFocused&&!p.disabled&&(o._setFocusable(o.lastFocused),o._setCurrentRow(o.lastFocused))),m){if(p.selectCells)o.tableData$.find(".a-GV-row").length>m.rowIndex&&(f=m.colIndex,g=o.tableData$,o.tableFrozenData$&&(d=o.tableFrozenData$.find(P).first().children().length,f>d?f-=d:g=o.tableFrozenData$),c=g.find(".a-GV-row").eq(m.rowIndex).children(),f>=c.length&&(f=c.length-1),o.setSelection([c.eq(f)],a),k=!0);else{for(e=[],b=0;b<m.length;b++)i=o.model.getRecord(m[b]),i&&e.push(i);e.length>0&&(k=0!==o.setSelectedRecords(e,a))}k||(o._trigger(Ua,{}),a&&o.focus())}else a&&o.focus()})},focus:function(){this.lastFocused&&this.lastFocused.focus()},gotoCell:function(a,b){var d,e,f,g,h=this.options,i=!1,j=null,k=null,l=this.element.find("[data-id='"+a+"']");if(this.gotoCellPending=null,this.tableData$){if(b&&(j=h.columns[0][b],j?j.hidden&&j.canHide&&(j.hidden=!1,i=!0,this.refreshColumns(),this.gotoCellPending={record:a,column:b}):c.warn("Warning column not found "+b)),!l.length){if(d=this.model.getRecord(a),!d)return void c.warn("Warning record not found "+a);e=this.model.indexOf(d),this.gotoCellPending={record:a,column:b},h.pagination.scroll?(f=this.scrollParent$,g=Math.floor(e/this.displayPageSize)*this.displayPageHeight,f.scrollTop(g)):(this.pageOffset=Math.floor(e/this.pageSize)*this.pageSize,i=!0)}i&&this.refresh(!1),this.gotoCellPending||(b&&j&&(k=this._cellFromColumn(l,b)),k||(k=l.children().first()),this._select(k,null,!0,!1))}},getActiveCellFromColumnItem:function(a){var b,c=this,d=null;return this.activeRecordId&&(b=this.element.find("[data-id='"+this.activeRecordId+"']"),h.each(this.columnItems,function(e,f){a===f.item.node&&(d=c._cellFromColumn(b,e))})),d},inEditMode:function(){return this.editMode},setEditMode:function(a){function b(){g.columnItemsContainer$.off("change.gridedit"),g.activeRecord=null,g.activeRecordId=null}var d,e,f=!1,g=this;this.tableData$&&(this.options.editable?(a=!!a,d=a!==this.editMode,this.editMode=a,this.element.toggleClass("a-GV--editMode",a),e=h(this.lastFocused).closest(S),e.length&&(a?this._activateCell(e):(this.lastEditModeCell=null,this.deactivateDelayTimer&&(clearTimeout(this.deactivateDelayTimer),this.deactivateDelayTimer=null),this._deactivateCell(e),this.activeRecord&&(this._deactivateRow(b),f=!0))),d&&(a?this.columnItemsContainer$.on("change.gridedit",function(a){var b,c,d;if(g.activeRecord)for(b=0;b<g.columns.length;b++)if(c=g.columns[b],c.elementId===a.target.id){d=c.property,g.setActiveRecordValue(d);break}}):f||b(),this._trigger(Va,null,{editMode:a}))):a&&c.warn("Grid is not editable."))},getSelection:function(){var a,b,c=[];return this.tableData$&&(this.options.selectCells?(b=this.tableData$.find(ta).parent(P),this.tableFrozenData$&&(a=this.tableFrozenData$.find(ta).parent(P)),a&&a.length?a.each(function(a){c.push(h(this).find(ta).filter(Q).add(b.eq(a).find(ta).filter(Q)))}):b.each(function(){c.push(h(this).find(ta).filter(Q))})):(b=this.tableData$.find(ta).filter(P),this.tableFrozenData$?(a=this.tableFrozenData$.find(ta).filter(P),a.each(function(a){c.push(h([this,b[a]]))})):b.each(function(){c.push(h(this))}))),c},setSelection:function(a,b,c){var d,e,f=null,g=this.lastFocused,i=this.focusInHeader,j=[];if(this.tableData$){if(this.options.selectCells)h.isArray(a)||(a=[a]),e=a[0].first()[0],j.push(a[a.length-1].last()[0]),e!==j[0]&&(this._select(h(e),null,!1,!1,!1),f={type:"click",shiftKey:!0});else if(h.isArray(a))for(d=0;d<a.length;d++)e=a[d].children(Q)[0],e&&j.push(e);else a.each(function(){e="TR"===this.nodeName?h(this).children(Q)[0]:h(this).closest(Q)[0],e&&j.push(e)});b=!!b,this.focusInHeader=!1,this._select(h(j),f,b,!1,c),b||(this.focusInHeader=i,i&&(this._setFocusable(g),this._setCurrentRow(g)))}},selectAll:function(a,b){var c=[],d=this.options,e=this.tableFrozenData$||this.tableData$;e&&d.multiple&&d.selectAll&&!d.selectCells&&(e.children().each(function(){c.push(h(this).children()[0])}),this.setSelection(h(c),a,b))},getRecords:function(a){var b,c,d,e=[];for(b=0;b<a.length;b++)c=a[b].first().attr(jb),void 0!==c&&(d=this.model.getRecord(c),d&&e.push(d));return e},getSelectedRange:function(){var a,b,c,d,e,f,g,h=this.options,i=null;if(h.selectCells)for(i={columns:[],recordIds:[],values:[]},a=this.getSelection(),b=0;b<a.length;b++){if(e=a[b],0===b)for(c=0;c<e.length;c++)g=this._getColumnMetadata(e.eq(c)),i.columns.push(g?g.property:null);for(f=e.first().parent().attr(jb),i.recordIds.push(void 0!==f?f:null),d=[],c=0;c<e.length;c++)d.push(e.eq(c).text());i.values.push(d)}return i},getSelectedRecords:function(){var a=this.options;return a.selectCells?[]:a.persistSelection?this.model.getSelectedRecords():this.getRecords(this.getSelection())},setSelectedRecords:function(a,b,c){var d,e=0,f=[],g={},i=this.tableFrozenData$||this.tableData$;if(!i)return-1;if(this.options.selectCells)return-1;for(d=0;d<a.length;d++)g[this.model.getRecordId(a[d])]=!0;return i.children().each(function(){var a=h(this),b=a.attr(jb);g[b]&&(f.push(a),e+=1)}),this.setSelection(f,b,c),e},activateRow:function(a,b){function c(){setTimeout(function(){b()},1)}var d=!1,e=a.parent(),f=e.attr(jb);this.editMode&&f===this.activeRecordId||(this.element.one("apexbeginrecordedit",function(){c()}),d=!0),a.focus(),this.editMode||this.setEditMode(!0),d||c()},copyDownSelection:function(a,b){return this._setSelectionValues(1,a,b)},fillSelection:function(a,b,c){return this._setSelectionValues(0,b,c,a)},_setSelectionValues:function(a,b,c,d){function e(){j=[],k.each(function(c){var e,f=h(this),g=l._getColumnMetadata(f);g&&b.indexOf(g.property)>=0&&g.elementId&&!g.readonly&&(e=l.columnItems[g.property].item,j.push({index:c,item:e,value:1===a?e.getValue():d}))}),o=a,f()}function f(){for(var a,b;;){if(o>=i.length||!j.length){m||l.setEditMode(!1),l.setSelection(i),h(n).focus(),c&&c();break}if(o>0&&(k=p.selectCells?i[o]:i[o].children()),o+=1,a=k.first().parent().attr(jb),l.model.allowEdit(l.model.getRecord(a))){b=k.first(),p.rowHeader!==Pa&&k.length>=2&&(b=k.eq(1)),l.activateRow(b,g);break}}}function g(){var a,b;for(a=0;a<j.length;a++)b=j[a],k.eq(b.index).focus(),b.item.setValue(b.value);f()}var i,j,k,l=this,m=this.editMode,n=this.lastFocused,o=0,p=this.options;return i=this.getSelection(),!(i.length<=a)&&(b||(b=[],p.selectCells?this.getSelectedRange().columns.forEach(function(a){a&&b.push(a)}):this.columns.forEach(function(a){var c=a.property;!c||a.hidden||a.virtual||a.noCopy||l.model.isIdentityField(c)||!a.elementId||a.readonly||b.push(c)})),k=p.selectCells?i[o]:i[o].children(),this.activateRow(k.first(),e),!0)},resize:function(){var a,b,c,d,e=this.element,f=this.options,g=e.height(),i=e.width(),j=e.children(D),k=e.children(F);if(null!==e[0].offsetParent){if(!k.length||this.pendingRefresh)return void this.refresh();d=this.tableData$.prev().height(),e.find(F+" .a-GV-table").css("margin-top",-(d+parseInt(this.tableHeader$.find("th").first().css("border-bottom-width"),10))),a=i,this.tableFrozenData$&&(c=this.tableFrozenData$.closest(H).width(),e.find(H).width(c).toggleClass("a-GV-w-frozen--showLabels",c>db),this.tableData$.parent().parent().find(ra).css("visibility",c>db?"hidden":"visible"),a-=c),e.find(L+","+J).width(a),h.apex.stickyWidget&&e.find(".js-stickyWidget-toggle").stickyWidget("refresh"),f.hasSize&&(b=g-j.height()-this._footerHeight(),k.children(L).addBack().height(b)),this._calculateColumnWidths(null,!0,f.hasSize||this.tableData$.parent().width()>a),this._initPageSize()}},expandControlBreak:function(a){this._expandCollapseControlBreak(a,!0)},collapseControlBreak:function(a){this._expandCollapseControlBreak(a,!1)},getColumns:function(){return this.columns},refreshColumns:function(){this.columnsStale=!0},setColumnWidth:function(a,b){var c=this._updateColumnWidth(a,b,!0);this._trigger(Ya,null,{header$:c[1],column:c[0],width:b})},hideColumn:function(a){var b=this._columnName(a);this.options.columns[0][b].hidden=!0,this._refreshGrid()},showColumn:function(a){var b=this._columnName(a);this.options.columns[0][b].hidden=!1,this._refreshGrid()},freezeColumn:function(a){var b,c,d=this.columns,e=this._columnName(a);for(b=0;b<d.length&&(c=d[b],b<d.length-1&&(c.frozen=!0),c.property!==e);b++);this._refreshGrid()},unfreezeColumn:function(a){var b,c,d=this._columnName(a);for(b=this.columns.length-1;b>=0&&(c=this.columns[b],c.frozen=!1,c.property!==d);b--);this._refreshGrid()},moveColumn:function(a,b){var c=this._moveColumn(a,b);this._refreshGrid(),c.header$=this._columnFromIndex(b),this._trigger(Xa,null,c)},moveColumnGroup:function(a,b,c){var d,e,f,g,h,i,j,k=[];if(f=this.columnGroups[a],!f)throw new Error("Invalid column group level: "+a);for(g=-1,d=0;d<f.length;d++)e=f[d],d===b&&(g=e.start,h=e.end),d===c&&(i=g===-1?e.start:e.end);if(c>b)for(d=g;d<=h;d++)j=this._moveColumn(this.columns[g],i),j.newPosition=i-(h-d),j.oldPosition=d,k.push(j),this._updateColumns();else for(d=h;d>=g;d--)j=this._moveColumn(this.columns[h],i),j.newPosition=i+(d-g),j.oldPosition=d,k.push(j),this._updateColumns();for(this._refreshGrid(),d=0;d<k.length;d++)j=k[d],j.header$=this._columnFromIndex(j.newPosition),this._trigger(Xa,null,j)},_refreshGrid:function(){var a;a=this.element.find(Ba),a.length&&this._deactivateCell(a),this.refreshColumns(),this.refresh()},_cellFromColumn:function(a,b){var d,e,f,g=this.columns,h=this.options,i=null,j=0;if(e=h.columns[0][b],!e)return c.warn("Warning column not found "+b),null;for(h.rowHeader!==Pa&&(j=1),d=0;d<g.length;d++)if(f=g[d],!f.hidden){if(f.property===b){i=a.children().eq(j);break}j+=1}return d>=g.length&&c.warn("Warning column is hidden "+b),i},_columnFromIndex:function(a){return this.element.find(".a-GV-header[data-idx='"+a+"']")},_columnName:function(a){var b;if(b="object"==typeof a?a.property:a,!this.options.columns[0].hasOwnProperty(b))throw new Error("Unknown column: "+b);return b},_moveColumn:function(a,b){var c,d,e,f,g=this.columns,h=this._columnName(a);for(e=-1,c=0;c<g.length;c++)if(d=g[c],d.property===h){e=c;break}if(f=g[b].seq,e!==b){if(e<b)for(c=b;c>e;c--)g[c].seq=g[c-1].seq;else for(c=b;c<e;c++)g[c].seq=g[c+1].seq;return g[e].frozen=b<=this.lastFrozenColIndex,g[e].seq=f,{column:d,newPosition:b,oldPosition:e}}},_updateColumns:function(){
var a,b,c,d,e,f,g,i,j,k,l,m,n,o={},p=this.options,q=p.columns[0];this.columns=[],this.columnsStale=!1,this.columnGroups=[],this.breakColumns=[],this.fieldToColumnIndex={};for(d in q)q.hasOwnProperty(d)&&(c=q[d],c.property=d,c.domId=c.elementId?c.elementId+"_HDR":this.idPrefix+"_h_"+c.property,c.seq=c.seq||"0",this.columns.push(c));for(this.columns.sort(function(a,b){return a.seq-b.seq}),this.lastFrozenColIndex=-1,a=0;a<this.columns.length;a++)if(c=this.columns[a],!c.hidden){if(!c.frozen)break;this.lastFrozenColIndex=a}for(l=p.rowHeader!==Pa?1:0,a=0;a<this.columns.length;a++)c=this.columns[a],c.controlBreakIndex>0&&this.breakColumns.push(c),c.hidden||(this.fieldToColumnIndex[c.property]=l,l+=1);for(this.breakColumns.sort(function(a,b){return a.controlBreakIndex-b.controlBreakIndex}),f=null,i=null,j=null,m=!0,l=0,g=0,b=0,n=[],a=0;a<this.columns.length;a++)if(c=this.columns[a],!c.hidden){if(null===f&&(f=[],this.columnGroups.push(f)),k=z(c),k!==i||a===this.lastFrozenColIndex+1){if(i=k,j&&(j.span=l-g,j.end=b,j.children=n,n=[]),g=l,k){if(j=h.extend({},p.columnGroups[k]),!j)throw new Error("Unknown column group name: "+k);j.heading&&(m=!1,o[k]||(j.domId=this.idPrefix+"_g_"+k)),j.property=k,f.push(j)}else j={},f.push(j);j.start=a,a<=this.lastFrozenColIndex&&(j.frozen=!0,o[k]=1)}n.push(c),l+=1,b=a,null===j&&(j={start:a},this.lastFrozenColIndex>=0&&(j.frozen=!0),f.push(j))}for(j&&(j.span=l-g,j.end=b,j.children=n),m&&(this.columnGroups=[],f=null);f;){for(e=f,f=null,i=null,j=null,m=!0,l=0,n=[],a=0;a<e.length;a++){if(c=e[a],k=c.parentGroupName||null,k!==i||c.frozen!==(!!j&&j.frozen)){if(i=k,null===f&&(f=[],this.columnGroups.unshift(f),l>0&&(j={},c.frozen&&(j.frozen=!0),f.push(j))),j&&(j.span=l-g,j.children=n,n=[]),g=l,k){if(j=h.extend({},p.columnGroups[k]),!j)throw new Error("Unknown column group name: "+k);j.heading&&(m=!1,o[k]||(j.domId=this.idPrefix+"_g_"+k)),j.property=k,f.push(j)}else j={},f.push(j);j.start=c.start,c.frozen&&(j.frozen=!0,o[k]=1)}n.push(c),j.end=c.end,l+=c.span}j&&(j.span=l-g,j.end=c.end,j.children=n),m&&(this.columnGroups.shift(),f=null)}},_initGrid:function(){function b(){y!==A&&(f[0].scrollLeft=y=A,i[0].scrollLeft=y,s.css("left",y)),z!==B&&(z=B,j.prop("scrollTop",z),i[0].scrollTop=z),C=null}function d(a){var b,c;if(v){if(c=a-v,b=w*c,w/=1.6,b>-2&&b<2)return void(w=0);j[0].scrollTop=i[0].scrollTop=z=B=j[0].scrollTop-b}v=a,nb(d)}function e(){var a=E.element.find(Ba);E.floatingItem$.hasClass(ya)?E._collapseFloatingItem(a):E._expandFloatingItem(a)}var f,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=0,z=0,A=0,B=0,C=null,E=this,G="scroll.gvss",I=this.options,K=this.element,M="a-GV-table--checkbox";c.info("Grid render and initialize."),this._updateColumns(),this.columnItems||this._initColumnItems(this.columns),this._renderGrid(),K.find(D+" "+Oa).prop("tabIndex",-1),I.tooltip&&this._initTooltips(I.tooltip),I.rowHeader!==Pa&&I.rowHeaderCheckbox&&(this.tableFrozenHeader$.parent().addClass(M),this.tableFrozenData$.parent().addClass(M)),f=K.find(J),i=K.find(L),j=K.find(H).last(),k=K.children(F),p=k.find("col"),q=k.find("thead").find(".a-GV-header"),x=this.tableData$.width()-a.getScrollbarSize().width,this.tableFrozenData$&&(x-=this.tableFrozenData$.width()),f.add(i).width(x),p.each(function(a){var b=h(this),c=E.columns[b.attr(ib)];c&&(c.width?c.curWidth=c.width:c.curWidth=c.defWidth=q.eq(a).width(),c.curWidth<cb&&(c.curWidth=cb))}),s=this.tableData$.parent().parent().find(ra),i.on(G,function(){A=this.scrollLeft,B=this.scrollTop,C||(C=nb(b))}),f.on(G,function(){A=this.scrollLeft,C||(C=nb(b))}),j.on(G,function(){B=this.scrollTop,C||(C=nb(b))}),I.hasSize&&j.length&&(j.on(ob,function(a){var c=a.originalEvent.deltaY||a.originalEvent.detail||-.025*a.originalEvent.wheelDelta;void 0!==a.originalEvent.deltaMode&&1!==a.originalEvent.deltaMode||(c=30*c),B=this.scrollTop+c,C||(C=nb(b)),a.preventDefault()}),apex.userHasTouched()&&(t=new Hammer(j[0]),t.get("pan").set({direction:Hammer.DIRECTION_VERTICAL}),t.on("panup pandown",function(a){B=u-a.deltaY,C||(C=nb(b)),w=0,a.isFinal&&(a.velocityY>=.1||a.velocityY<=-.1)&&(v=0,w=a.velocityY,nb(d))}),t.on("panstart",function(a){u=j[0].scrollTop}))),m=this.element.find(na),this.tabTraps$=m,2===m.length?n=0:(3===m.length?(n=1,o=0):(n=4,o=3,m.eq(0).on("focus",function(){E.tableData$.find(Oa).first().focus()}),m.eq(1).on("focus",function(){E.tableData$.find(Oa).last().focus()}),m.eq(2).on("focus",function(){E.tableFrozenData$.find(Oa).first().focus()})),m.eq(o).on("focus",function(){h(this).hasClass(oa)?E._autoAddRecord(E.activeRecord):E.tableFrozenData$.find(Oa).last().focus()})),m.eq(n).on("focus",function(){var a,b,c=h(E.lastEditModeCell).closest("tbody"),d=c.find(Oa).add(E.lastEditModeCell),e=d.index(E.lastEditModeCell);e>0?d.first().focus():E.tableFrozenData$&&0===m.eq(0).prop("tabIndex")?(c=c[0]===E.tableFrozenData$[0]?E.tableData$:E.tableFrozenData$,c.find(Oa).first().focus()):(a=h(Oa),b=E.element.find(Oa).first(),e=a.index(b),a.eq(e-1).focus())}),m.eq(n+1).on("focus",function(){var a=h(E.lastEditModeCell).closest("tbody"),b=a.find(Oa).add(E.lastEditModeCell),c=b.index(E.lastEditModeCell);h(this).hasClass(oa)?E._autoAddRecord(E.activeRecord):c<b.length-1?b.last().focus():E.tableFrozenData$&&(a=a[0]===E.tableFrozenData$[0]?E.tableData$:E.tableFrozenData$,a.find(Oa).last().focus())}),m.prop("tabIndex",-1),I.reorderColumns&&this._initColumnReorder(),this.columnWidthHandle$=h(),I.resizeColumns&&this._initColumnResize(),this.columnControls$.on("click","button",function(a){var b=h(a.target);E._sortChange(a,b.closest(V),b.closest("button").hasClass("js-asc")?"asc":"desc")}),this.floatingItem$.draggable({handle:".a-GV-cellMoveHandle",containment:"document"}).on("keydown",function(a){if(a.ctrlKey&&117===a.which)return e(),!1}).children(".a-GV-expandCollapse").click(e),g.TouchProxy.addTouchListeners(this.floatingItem$[0]),this._initPaginationFooter(i),!I.hasSize&&I.stickyTop&&h.apex.stickyWidget&&(r={stickToEnd:!0,toggleWidth:!0,bottom:function(){return K.offset().top+K.outerHeight()-E._footerHeight()}},h.isFunction(I.stickyTop)&&(r.top=I.stickyTop),K.find(D).css("overflow","hidden").stickyWidget(r)),this.breakColumns.length>0&&K.find(F).on("click",".js-toggleBreak",function(){l=h(this).closest("."+ia),E._expandCollapseControlBreak([l],!l.hasClass(ya))})},_initColumnReorder:function(){var a,b,c,d,e,f,i,j,k,l,m,n,o,p,r=this.element.hasClass(Ma),s=this.element.find(D),t=this;s.append(this.columnMoveMarker$),p=parseInt(t.columnHandle$.css("margin-left"),10),r&&(p=-p),t.columnHandle$.draggable({appendTo:this.element,containment:s,cursor:"move",cursorAt:r?{right:-2*p}:{left:0},axis:"x",delay:100,distance:4,helper:function(){var a=h("<div class='a-GV-header-dragHelper'></div>"),b=t.columnReorderCell$;return a.append(b.find(".a-GV-headerLabel,."+_).clone()),a.width(b.outerWidth()),a},start:function(g,p){t.columnControls$.hide(),t._trigger($a,g,{}),a=t.columnReorderCell$.parent().offset().top-t.element.offset().top,b=a+t.element[0].offsetTop,f=s.css("position"),j="absolute",i=2,k=-s.offset().left,"relative"!==f&&("fixed"===f&&(k=0,a=b=t.columnReorderCell$.parent()[0].offsetTop+s[0].offsetTop,j="fixed",p.helper.css("margin-left",t.element.offset().left+"px")),i=parseInt(s.css("z-index"),10)+1),l=-t.columnMoveMarker$.width()/2,p.helper.css({top:b+"px",position:j,"z-index":i}),n=p.helper.outerWidth(),t.columnMoveMarker$.show().css({top:a+"px",left:t.columnReorderCell$.offset().left+k+(r?t.columnReorderCell$.width():0)+"px",position:j,"z-index":i}),t.columnReorderCell$.find(".a-GV-headerLabel,.a-GV-header-sort").hide(),t.columnHandle$.hide(),t.columnWidthHandle$.hide(),x(function(){t.columnReorderCancel=!0}),m=parseInt(t.columnReorderCell$.attr(ib),10),t.hdrScrollParent=t.element.find(J)[0],o=t.hdrScrollParent.scrollLeft,c=[],e=null,d=t._getRowForCell(t.columnReorderCell$),d.children().each(function(){var a=h(this),b=!0,d=a.offset().left+k;a.parent().parent().parent().parent()[0]===t.hdrScrollParent&&(d+=o,b=!1),c.push({colIdx:parseInt(a.attr(ib),10),start:d,end:d+a.outerWidth(),frozen:b})}),t.columnReordering=!0,t.columnReorderCancel=!1},drag:function(a,b){function d(){var b,d,h,i=!1,j=a.pageX-p+k+t.hdrScrollParent.scrollLeft;for(b=0;b<c.length;b++)if(d=c[b],j>=d.start&&j<d.end){b!==e&&(e=b,h=r?(d.colIdx<m?d.end:d.start)+l:(d.colIdx<m?d.start:d.end)+l,d.frozen||(h-=t.hdrScrollParent.scrollLeft),g=h,f=t.hdrScrollParent.scrollLeft,t.columnMoveMarker$.css("left",h+"px"),i=!0);break}i||f===t.hdrScrollParent.scrollLeft||(h=g-(t.hdrScrollParent.scrollLeft-f),t.columnMoveMarker$.css("left",h+"px"))}var f=t.hdrScrollParent.scrollLeft,g=parseInt(t.columnMoveMarker$.css("left"),10);return t.columnReorderCancel?void a.preventDefault():(d(),void(t._headerScrollCheck(a.pageX-p,n)?t.scrollTimerId||t._headerScrollStart(a.pageX-p,n,d):t.scrollTimerId&&t._headerScrollStop()))},stop:function(a,b){var f=null;null!==e&&(f=c[e].colIdx),isNaN(f)&&e+1<c.length&&(f=c[e+1].colIdx),isNaN(f)||(t.columnReordering=!1,t.columnReorderCell$.find(".a-GV-headerLabel,.a-GV-header-sort").show(),f===m&&(t.columnHandle$.show(),t.columnWidthHandle$.show(),t.columnControls$.show()),t.columnMoveMarker$.hide(),t.lastHoverCell=null,y(),t.scrollTimerId&&t._headerScrollStop(),t.columnReorderCancel||null===f||f===m||(t.columnReorderCell$.hasClass(W)?t.moveColumnGroup(q(d),m,f):t.moveColumn(t.columns[m],f),t.focus()))}}),g.TouchProxy.addTouchListeners(t.columnHandle$[0])},_initColumnResize:function(){var a,b,c,d=this,e=this.element.hasClass(Ma)?-1:1,f=this.element.find(D),i=f.find(P).last();this.columnWidthHandle$=h("<div class='a-GV-columnWidthHandle'></div>").appendTo(f).css("top",i[0].offsetTop).height(i.height()),this.columnWidthHandle$.draggable({axis:"x",containment:f,start:function(e,f){d.columnWidthDragging=!0,d.columnWidthCancel=!1,d.columnWidthStartPos=f.position.left,d.columnWidthStartWidth=d.columnWidthCell$.first().outerWidth(),a=f.helper.outerWidth(),d.hdrScrollParent=d.element.find(J)[0],c=d.columnWidthCell$.parent().parent().parent().parent()[0]!==d.hdrScrollParent,b=d.hdrScrollParent.scrollLeft,x(function(){d.columnWidthCancel=!0})},drag:function(f,g){function h(a){var f,h,i=d.columnWidthStartWidth+e*(g.position.left-d.columnWidthStartPos);f=d.hdrScrollParent.scrollWidth,c||(i+=d.hdrScrollParent.scrollLeft-b),i>cb&&(d.columnWidthCell$.hasClass(ea)?(d.rowHeaderWidth=i,d._calculateColumnWidths()):d._updateColumnWidth(d._getColumnMetadata(d.columnWidthCell$.first()),i)),h=d.hdrScrollParent.scrollWidth-f,h<0&&!a&&d.hdrScrollParent.scrollLeft!==b&&(d.hdrScrollParent.scrollLeft+=h,b+=h)}return d.columnWidthCancel?void f.preventDefault():(h(),void(d._headerScrollCheck(g.offset.left,a)?d.scrollTimerId||d._headerScrollStart(g.offset.left,a,function(){h(!0)}):d.scrollTimerId&&d._headerScrollStop()))},stop:function(a,f){var g=d.columnWidthStartWidth+e*(f.position.left-d.columnWidthStartPos);c||(g+=d.hdrScrollParent.scrollLeft-b),d.columnWidthDragging=!1,y(),d.scrollTimerId&&d._headerScrollStop(),d.columnWidthCancel&&(g=d.columnWidthStartWidth),g<cb&&(g=cb),d.columnWidthCell$.hasClass(ea)?(d.rowHeaderWidth=g,d._calculateColumnWidths(null,!0)):d.setColumnWidth(d._getColumnMetadata(d.columnWidthCell$.first()),g)}}),g.TouchProxy.addTouchListeners(this.columnWidthHandle$[0])},_updateColumnWidth:function(a,b,c){var d,e,f,g=this._columnName(a);return d=this.options.columns[0][g],d.width=b,d.curWidth=b,f=this.columns.indexOf(d),e=this._columnFromIndex(f),this._calculateColumnWidths(e,c),[d,e]},_calculateColumnWidths:function(b,c,d){function e(a){var b,c;for(b=a+1;b<v.columns.length;b++)if(c=v.columns[b],!c.hidden&&!c.noStretch&&b!==q)return!1;return!0}function f(a,b){var c,d=b.parent().find("col"),e=a.parent().find("col");return c=0,e.each(function(a){var b,e,f=h(this),g=f.attr(ib);g?(e=v.columns[g],b=e.curWidth):b=v.rowHeaderWidth,f[0].width=b,d[a].width=b,c+=b}),b.parent().width(c),a.parent().width(c),c}var g,i,j,k,l,m,n,o,p,q,r,s,t=this.options.hasSize,u=this.element,v=this;if(d)for(g=0;g<this.columns.length;g++)i=this.columns[g],i.curWidth=i.width||i.defWidth,i.curWidth<cb&&(i.curWidth=cb);if(c&&this.tableFrozenHeader$&&this.tableData$.prev().add(this.tableFrozenData$.prev()).add(this.tableHeader$).add(this.tableFrozenHeader$).each(function(){h(this).find(V).first().css("height","")}),b&&(m=b.parent().parent()[0],q=parseInt(b.attr(ib),10)),!this.tableFrozenData$||m&&m!==this.tableFrozenHeader$[0]||(f(this.tableFrozenData$,this.tableFrozenHeader$),k=this.tableFrozenData$.parent().outerWidth(),u.find(H).width(k),j=u.width()-k,u.find(L+","+J).width(j)),j=m&&m!==this.tableHeader$[0]?this.tableData$.parent().width():f(this.tableData$,this.tableHeader$),c){if(l=u.find(L)[0].clientWidth,t&&0===this.tableData$.children().length&&(l-=a.getScrollbarSize().width),j<l){if(l=l-j-1,l>10)for(p=l,g=0;g<this.columns.length;g++)i=this.columns[g],i.hidden||i.frozen||i.noStretch||g===q||(e(g)?i.curWidth+=p:(o=Math.floor(l*(i.curWidth/j)),i.curWidth+=o,p-=o));else for(g=this.columns.length-1;g>0;g--)if(i=this.columns[g],!(i.hidden||i.frozen||i.noStretch||g===q)){i.curWidth=i.curWidth+l;break}f(this.tableData$,this.tableHeader$)}this.tableFrozenHeader$&&(s=this.tableFrozenHeader$.find(V).outerHeight(),r=this.tableHeader$.find(V).outerHeight(),s!==r&&(r=Math.max(s,r),this.tableData$.prev().add(this.tableFrozenData$.prev()).add(this.tableHeader$).add(this.tableFrozenHeader$).each(function(){h(this).find(V).first().css("height",r+"px")})))}t&&(n=u.children(F),this._adjustSizeForScrollBars(n.height(),n.find(L).width()))},_renderGrid:function(){function b(a,b){var c,d;for(b&&l.rowHeader!==Pa&&a.markup("<col").optionalAttr("width",j.rowHeaderWidth).markup("/>"),c=0;c<j.columns.length;c++)d=j.columns[c],(d.frozen||!1)!==b||d.hidden||a.markup("<col").optionalAttr("width",d.width).attr(ib,c).markup("/>")}function c(a,b,c){var d,e,f,h,k,o,p,q,r,s=j.columns,t=j.lastFrozenColIndex+1,u=s.length;for(e=0;e<j.columnGroups.length;e++){for(o=j.columnGroups[e],a.markup("<tr class='"+N+"' role='row'>"),d=0;d<o.length;d++)for(b&&l.rowHeader!==Pa&&(a.markup("<th role='columnheader' class='"+W+" "+ea+"'"),c&&a.markup(" style='visibility: hidden;'"),a.markup(">")),d=0;d<o.length;d++)f=o[d],(f.frozen||!1)===b&&(h=W,h+=i(f.headingAlignment||"center",!0),r=c?null:f.domId,a.markup("<th role='columnheader' ").attr("class",h).attr(hb,f.span).attr(ib,d),c&&a.markup(" style='visibility: hidden;'"),a.markup(" tabindex='-1'><span class='"+Y+"'").optionalAttr("id",r).markup(">"+(f.heading||"")).markup("</span></th>"));a.markup("</tr>")}for(a.markup("<tr class='"+N+"' role='row'>"),b&&(l.rowHeader!==Pa&&(q=null,c&&(q+="visibility: hidden;"),a.markup("<th role='columnheader' class='"+U+" "+ea+"'").optionalAttr("style",q).markup("><span class='u-vh "+Y+"'").attr("id",j.idPrefix+"_shh").markup(">").markup(m("ROW_HEADER")).markup("</span>"),l.rowHeaderCheckbox&&l.multiple&&l.selectAll&&a.markup("<span class='"+ba+"' role='checkbox' aria-checked='false'").attr("title",m("SELECT_ALL")).markup("></span>"),l.rowHeader===Qa?a.markup("<span class='a-GV-rownum' aria-hidden='true'></span>"):l.rowHeader===Ra&&a.markup("<span class='a-GV-rowLabel'></span>"),a.markup("</th>")),t=0,u=j.lastFrozenColIndex+1),d=t;d<u;d++)f=s[d],f.hidden||(h=U,h+=i(f.headingAlignment||"center",!0),f.isRequired&&(h+=" is-required"),f.elementId&&!f.readonly||(h+=" is-readonly"),f.headingCssClasses&&(h+=" "+f.headingCssClasses),p=null,1===f.sortIndex&&("asc"===f.sortDirection?p="ascending":"desc"===f.sortDirection&&(p="descending")),q=null,c?(q="visibility: hidden;",r=null):r=f.domId,a.markup("<th role='columnheader' ").attr("class",h).attr(ib,d).optionalAttr("style",q).optionalAttr("aria-sort",p).optionalAttr("aria-haspopup",l.activateColumnHeader?Sa:null).markup(" tabindex='-1'><span class='"+Y+"'").optionalAttr("id",r).markup(">").markup(f.heading).markup("</span>"),f.sortDirection&&(k=n("asc"===f.sortDirection?"SORTED_ASCENDING":"SORTED_DESCENDING",g>1?f.sortIndex:""),a.markup("<span class='a-GV-header-sort'><span aria-hidden='true'").attr("class","a-Icon "+("asc"===f.sortDirection?"icon-irr-sort-asc":"icon-irr-sort-desc")).attr(gb,k).markup("></span><span class='u-vh'>").content(" "+k).markup("</span>"),g>1&&a.markup("<span aria-hidden='true'>").content(f.sortIndex).markup("</span>"),a.markup("</span>")),a.markup("</th>"));a.markup("</tr>")}var d,e,f,g,j=this,k=this.element,l=this.options,o=a.htmlBuilder(),p="<table role='presentation' class='"+M+"'>",q="<thead role='rowgroup'>",r="<span class='"+ma+" u-vh is-focusable' aria-hidden='true' tabindex='-1'></span>";for(f=this.lastFrozenColIndex>=0||l.rowHeader!==Pa,g=0,d=0;d<this.columns.length;d++)this.columns[d].sortDirection&&(g+=1);o.markup("<div class='"+C+"'>"),f&&(o.markup("<div class='"+G+"'>"+p),b(o,!0),o.markup(q),c(o,!0,!1),o.markup("</thead></table></div>")),o.markup("<div class='"+I+"'>"+p),b(o,!1),o.markup(q),c(o,!1,!1),o.markup("</thead></table></div></div><div class='"+E+"'>"),this._renderAltDataMessages(o,this.idPrefix),o.markup("<div class='u-vh'").attr("id",this.accContextId).markup("></div>"),f&&(o.markup(r+"<div class='"+G+"'>"+p),b(o,!0),o.markup(q),c(o,!0,!0),o.markup("</thead><tbody></tbody></table>"),this._renderLoadMore(o),o.markup("</div>"+r+r)),o.markup("<div class='"+K+"' tabindex='-1'>"+p),b(o,!1),o.markup(q),c(o,!1,!0),o.markup("</thead><tbody></tbody></table>"),this._renderLoadMore(o),o.markup("</div>"),(f||l.autoAddRecord&&this.model.allowAdd())&&o.markup(r),o.markup("</div>"),l.editable&&o.markup("<div class='a-GV-floatingItem' tabindex='-1' style='display: none;'>").markup("<div class='a-GV-cellMoveHandle'></div>").markup("<button type='button' class='a-GV-expandCollapse' tabindex='-1'><span aria-hidden='true' class='a-Icon'></span></button>"+r+"<div class='"+pa+"'></div>"+r+"</div>"),this._renderFooter(o,this.idPrefix),l.columnSort&&(o.markup("<div class='"+Z+"' style='display:none'>"),this._renderButton(o,"a-Button js-asc","icon-up-chevron",m("SORT_ASCENDING")),this._renderButton(o,"a-Button js-desc","icon-down-chevron",m("SORT_DESCENDING")),o.markup("</div>")),l.reorderColumns&&o.markup("<div class='"+_+"' style='display:none'></div>").markup("<div class='a-GV-colMoveMarker' style='display:none'>").markup("<span class='a-GV-colMoveMarker-x'></span></div>"),k.html(o.toString()),this._updateAccLabel(),this.pageKey=null,e=k.find("tbody,thead"),f?(this.tableFrozenHeader$=e.eq(0),this.frozenColumnCount=this.tableFrozenHeader$.children().last().children().length,this.tableHeader$=e.eq(1),this.tableFrozenData$=e.eq(3),this.tableData$=e.eq(5)):(this.tableFrozenHeader$=null,this.frozenColumnCount=0,this.tableFrozenData$=null,this.tableHeader$=e.eq(0),this.tableData$=e.eq(2)),this._clearChildrenRowCache(),this.accContext$=h("#"+this.accContextId),this.columnControls$=k.find($),this.columnControls$.find("button").attr("tabindex",-1),this.columnHandle$=k.find("."+_),this.columnMoveMarker$=k.find(".a-GV-colMoveMarker"),this.floatingItem$=k.find(".a-GV-floatingItem")},_updateAccLabel:function(){var a=this.origLabelBy;this.noData?a+=" "+this.idPrefix+"_msg":this.options.footer&&(a+=" "+this.idPrefix+"_pageRange "+this.idPrefix+"_status"),this.element.attr(Ka,a)},_calcSpanAllColumns:function(a){var b,c,d,e;for(c=0,a?(d=0,e=this.lastFrozenColIndex+1,this.options.rowHeader!==Pa&&(c+=1)):(d=this.lastFrozenColIndex+1,e=this.columns.length),b=d;b<e;b++)this.columns[b].hidden||(c+=1);return c},_getHeaderHeight:function(){return this.element.find(D).outerHeight()},_getStickyTop:function(){return h.isFunction(this.options.stickyTop)?this.options.stickyTop():0},_selectedCount:function(){var a=0;if(this.tableData$)return this.options.selectCells?(a=this.tableData$.find(ta).filter(Q).length,this.tableFrozenData$&&(a+=this.tableFrozenData$.find(ta).filter(Q).length)):a=this.options.persistSelection?this.model.getSelectedCount():this.tableData$.find(ta).filter(P).length,a},_selectedStatusMessage:function(){var a=this.options;return d.getMessage(a.selectCells?"APEX.GV.SELECTION_CELL_COUNT":a.selectionStatusMessageKey)},_deletedCount:function(){return this.tableData$.find(Da).length},_hasControlBreaks:function(){return this.breakColumns.length>0},_getRecordHeight:function(){var a,b;return a=this.tableData$.find(P).filter(Na).first(),a.length?b=a.outerHeight():(a=h("<tr class='"+N+"'><td class='"+R+"'></td></tr>"),a=this.tableData$.append(a),b=a.outerHeight(),this.tableData$.empty()),b},_getDataRenderContext:function(){return{hasFrozenColumns:this.lastFrozenColIndex>=0||this.options.rowHeader!==Pa,dataOut:a.htmlBuilder(),frozenOut:a.htmlBuilder()}},_getDataContainer:function(){return this.tableFrozenData$?h([this.tableFrozenData$[0],this.tableData$[0]]):this.tableData$},_insertFiller:function(a,b){var c,d;return a.hasFrozenColumns&&(d=h(a.frozenOut.toString()),b?b.first().before(d):this.tableFrozenData$.html(d)),c=h(a.dataOut.toString()),b?b.last().before(c):this.tableData$.html(c),a.hasFrozenColumns&&(c=h([d[0],c[0]])),this._clearChildrenRowCache(),c},_insertData:function(a,b,c,d,e){var f,g,h,i=this;a.hasFrozenColumns&&(h=r(a.frozenOut)),g=r(a.dataOut),d?(a.hasFrozenColumns&&d.first()[e](h),d.last()[e](g)):(a.hasFrozenColumns&&this.tableFrozenData$.append(h),this.tableData$.append(g)),this._clearChildrenRowCache(),this.options.hasSize&&(f=this.element.children(F),this._adjustSizeForScrollBars(f.height(),f.find(L).width())),this.gotoCellPending&&setTimeout(function(){i.gotoCell(i.gotoCellPending.record,i.gotoCellPending.column)},1),this._trigger(_a,null,{offset:b,count:c})},_controlBreakLabel:function(b){var c,d,e,f,g=this.options,h="";for(c=0;c<this.breakColumns.length;c++)d=this.breakColumns[c],c>0&&(h+=", "),e=this.model.getValue(b,d.property),null===e&&(e=""),"object"==typeof e&&e.hasOwnProperty("d")?e=e.d:(f=this.columnItems[d.property],f&&(e=f.item.displayValueFor(e))),""===e&&g.showNullAs&&(e=g.showNullAs),d.escape===!1&&(e=a.escapeHTML(e)),h+="<span class='a-GV-breakLabel'>"+(d.label?a.escapeHTML(d.label):d.heading)+":</span> <span class='a-GV-breakValue'> "+e+"</span>";return h},_renderBreakRecord:function(a,b,c,d){a.hasFrozenColumns&&(this._renderBreakRow(a.frozenOut,!0,b,c,d),b=!1),this._renderBreakRow(a.dataOut,!1,b,c,d)},_renderFillerRecord:function(a,b){a.hasFrozenColumns&&a.frozenOut.markup("<tr class='"+b+"'><td ").attr(hb,this._calcSpanAllColumns(!0)).markup("></td></tr>"),a.dataOut.markup("<tr class='"+b+"'><td ").attr(hb,this._calcSpanAllColumns(!1)).markup("></td></tr>")},_renderRecord:function(a,b,c,d,e){a.hasFrozenColumns&&this._renderRow(a.frozenOut,b,c,d,e,!0),this._renderRow(a.dataOut,b,c,d,e,!1)},_insertRecord:function(b,c,d,e,f){var g,i,j=this.lastFrozenColIndex>=0||this.options.rowHeader!==Pa,k=a.htmlBuilder(),l=[];return j&&(this._renderRow(k,c,null,d,e,!0),g=r(k),l.push(g[0]),"after"===f&&b?(i=b.first(),i.after(g)):this.tableFrozenData$.prepend(g),k.clear()),this._renderRow(k,c,null,d,e,!1),g=r(k),l.push(g[0]),"after"===f&&b?(i=b.last(),i.after(g)):this.tableData$.prepend(g),this._clearChildrenRowCache(),h(l)},_afterInsert:function(a){var b,c,d=!!this.element.find("."+ua).length||h(document.activeElement).hasClass(oa),e=a[0].find(".a-GV-cell").first();for(b=0;b<this.columns.length;b++)if(c=this.columns[b],!c.hidden&&!c.readonly&&this.columnItems[c.property]){e=v(a[0],this.fieldToColumnIndex[c.property]);break}this._select(e,null,d,!1,!1),d&&this.options.editable&&!this.editMode&&this.setEditMode(!0)},_updateRecordField:function(b,c,d,e){var f,g,h,i,j=this.fieldToColumnIndex[d],k=a.htmlBuilder();void 0!==j&&(f=v(b,j),this.editMode&&c===this.activeRecord&&!this.ignoreItemChange&&(g=this.columnItems[d],g&&this._setColumnItemValue(g.item,c,d)),f.hasClass(za)||(h=this.options.columns[0][d],i=null,e.fields&&(i=e.fields[h.property]),k=a.htmlBuilder(),this._renderFieldDataValue(k,h,c,e,i),f.html(k.toString())))},_updateRecordState:function(a,b,c,d){var e,f,g,h,i,j=this.options,m=!this.tooltipOptions;if(h=k(d,j,a.hasClass(sa),this.model,c),a.attr("class",h),m&&(d.message?a.first().find(fa).attr(gb,d.message):a.first().find(fa).removeAttr(gb)),d.fields)for(e in d.fields)if(d.fields.hasOwnProperty(e)){if(f=d.fields[e],i=this.fieldToColumnIndex[e],void 0===i)continue;g=v(a,i),h=l(j.columns[0][e],d,f,j,g),g.attr("class",h),m&&(f.message&&!d.deleted?g.attr(gb,f.message):g.removeAttr(gb))}},_removeRecord:function(a){a.remove()},_identityChanged:function(a,b){var c=this._elementsFromRecordIds([a])[0];c.attr(jb,b),this.activeRecordId===a&&(this.activeRecordId=b)},_replaceRecord:function(b,c,d,e,f){var g,i,j,k=null,l=null,m=[],n=b.first().children().first().find(".a-GV-rownum").text()||null,o=this.lastFrozenColIndex>=0||this.options.rowHeader!==Pa,p=a.htmlBuilder();this.activeRecord=null,n&&(n=parseInt(n,10)-1),i=b.hasClass(sa),j=b.find(this.lastFocused).length,j&&(k=0,l=q(t(this.lastFocused))),o&&(j&&b.last().find(this.lastFocused).length&&(k=1),this._renderRow(p,c,n,e,f,!0),g=r(p),m.push(g[0]),b.first().replaceWith(g),p.clear()),this._renderRow(p,c,n,e,f,!1),g=r(p),m.push(g[0]),b.last().replaceWith(g),this._clearChildrenRowCache(),g=h(m),j?this._select(v(g.eq(k),l),null,!1,!1):i&&g.addClass(sa)},_removeFocus:function(a){var b,c,d;b=h(this.lastFocused).closest(P),(b[0]===a[0]||a.length>1&&b[0]===a[1])&&(c=u(this.lastFocused),d=this._getNextCellDown(c,1),d||(d=this._getPrevCellUp(c,1)),d&&this._select(d,null,!0,!1))},_elementsFromRecordIds:function(a){var b,c,d=!0,e=[],f={};for(b=0;b<a.length;b++)f[a[b]]=b,e[b]=null;return this.tableFrozenData$||(d=!1),d&&(c=this.tableFrozenData$.children()),this.tableData$.children().each(function(a){var b=h(this),g=b.attr(jb);void 0!==f[g]&&(d?e[f[g]]=h([c[a],this]):e[f[g]]=b)}),e},_renderBreakRow:function(a,b,c,d,e){var f;f=this._calcSpanAllColumns(b),a.markup("<tr role='row' class='"+ia+" is-expanded'><th role='rowheader' class='a-GV-controlBreakHeader'").attr(hb,f).markup(">"),c&&this._renderButton(a,"a-Button js-toggleBreak","icon-down-arrow",m("BREAK_COLLAPSE")),a.markup("<span class='a-GV-controlBreakLabel'>").markup(d).markup("</span></th></tr>"),b||(this.controlBreaks.push({offset:e+1,label:d}),this.controlBreaks.sort(p))},_getControlBreak:function(a){var b,c=null;return this.breakColumns.length>0&&(b=o(this.controlBreaks,{offset:a},p),c=this.controlBreaks[b],c&&c.offset===a||(c=this.controlBreaks[b-1])),c},_renderRow:function(a,b,c,d,e,f){var g,h,i,j,n,o,p,q=null,r=null,s=null,t=this.options,u=this.columns,v=this.lastFrozenColIndex+1,w=u.length,x=!this.tooltipOptions;for(i=k(e,t,null,this.model,b),e.agg?q=e.grandTotal?t.aggregateLabels[e.agg].overallLabel:t.aggregateLabels[e.agg].label:!e.deleted&&e.message&&x&&(r=e.message),o=void 0!==e.serverOffset?e.serverOffset+1:"",a.markup("<tr role='row'").attr(jb,d).optionalAttr(kb,o).attr("class",i).optionalAttr(gb,q).optionalAttr(Fa,e.sel?Sa:null).optionalAttr("style",this.controlBreakCollapsed?"display:none;":null).markup(">"),f&&t.rowHeader!==Pa&&(p=e.agg||t.rowHeader===Ra,a.markup("<th role='rowheader'").attr("class",R+" "+ea+(p?" "+aa:"")).optionalAttr(gb,r).markup(">"),e.agg||(t.rowHeaderCheckbox&&(j=t.multiple?ba:ca,e.sel&&(j+=" "+sa),a.markup("<span class='"+j+"'").attr("title",m("SELECT_ROW")).markup("></span>")),t.rowHeader===Qa&&a.markup("<span class='a-GV-rownum' aria-hidden='true'>").content(o).markup("</span>")),p&&(a.markup("<span class='a-GV-rowLabel'>"),e.agg?a.content(t.aggregateLabels[e.agg][e.grandTotal?"overallLabel":"label"]):t.rowHeaderLabelColumn&&a.markup(this.model.getValue(b,t.rowHeaderLabelColumn)),a.markup("</span>")),a.markup("</th>")),f&&(v=0,w=this.lastFrozenColIndex+1),g=v;g<w;g++)h=u[g],n=null,e.fields&&(n=e.fields[h.property]),h.hidden||(i=l(h,e,n,t),s=null,x&&(n&&n.message?s=n.message:e.agg&&(s=t.aggregateTooltips[e.agg+"|"+h.property])),a.markup("<td role='gridcell' tabindex='-1'").attr("class",i).optionalAttr(gb,s).markup(">"),this._renderFieldDataValue(a,h,b,e,n),a.markup("</td>"));a.markup("</tr>")},_getColumnMetadata:function(a){var b,c,d;if(a.hasClass(R))b=q(a),c=a.closest(H).length?this.tableFrozenHeader$:this.tableHeader$,d=c.children().last().children().eq(b);else{if(!a.hasClass(U))return null;d=a}return b=parseInt(d.attr(ib),10),isNaN(b)?null:this.columns[b]},_activateColumnHeader:function(a,b){var c=this._getColumnMetadata(b);c.noHeaderActivate||this._trigger(Za,a,{header$:b,column:c})},_activateRow:function(a){var b,c,d,e,f,g,h,i=a.parent(),j=i.attr(jb);for(e=this.model.getRecord(j),f=this.model.getRecordId(e),h=this.model.allowEdit(e),g=this.model.getRecordMetadata(f),i.addClass(za),this._beginSetColumnItems(),b=0;b<this.columns.length;b++)d=this.columns[b].property,c=this.columnItems[d],c&&this._setColumnItemValue(c.item,e,d,h?g:null);this.activeRecord=e,this.activeRecordId=f,this._endSetColumnItems(),this._triggerBeginEditing(this.activeRecord,this.activeRecordId)},_deactivateRow:function(a){var b,c,d,e,f,g,h,i=this.element.find(".a-GV-row.is-active");if(this.activeLockCount>0)return void(this.activeUnlockCallback=a);if(i.removeClass(za),f=this.model.getRecordMetadata(this.activeRecordId),f&&!f.deleted&&this.model.allowEdit(this.activeRecord))for(b=0;b<this.columns.length;b++)d=this.columns[b].property,c=this.columnItems[d],c&&(h=c.item.isDisabled(),h?this.model.setValidity("valid",this.activeRecordId,d):(e=c.item.getValidity(),e.valid||this.model.setValidity("error",this.activeRecordId,d,c.item.getValidationMessage())),g=f.fields?f.fields[d]:null,(g&&g.hasOwnProperty("disabled")||h)&&(g||(f.fields||(f.fields={}),g={},f.fields[d]=g),g.disabled=h));this._triggerEndEditing(this.activeRecord,this.activeRecordId),this.activeRecord=null,this.activeRecordId=null,a()},_beginDeactivate:function(a,b){var c=this;this.deactivateDelayTimer=setTimeout(function(){c.lastEditModeCell=null,c._deactivateCell(a),b&&(c.dontFocusEditableItem=!0,a.focus()),c.deactivateDelayTimer=null},10)},_clearDeactivate:function(){this.deactivateDelayTimer&&(clearTimeout(this.deactivateDelayTimer),this.deactivateDelayTimer=null)},_activateCell:function(a){function b(){c=m._getColumnMetadata(a),c&&(n=m.columnItems[c.property]),n&&m.model.allowEdit(m.activeRecord)&&!c.readonly&&!a.hasClass("is-readonly")&&(a.addClass(za),f=n.item.getPopupSelector(),f&&h(document.body).on("focusin.gridpopup",function(a){h(a.target).closest(f).length&&m._clearDeactivate()}).on("focusout.gridpopup",function(a){var b;h(a.target).closest(f).length&&(b=h(m.lastEditModeCell),m._beginDeactivate(b,!0))}),n.element$.height()>a.height()?(a.empty(),m.floatingItem$.children(qa).append(n.element$),m._expandFloatingItem(a,!0)):a.empty().append(n.element$),m._activateColumnItem(n,c.domId),m.dontFocusEditableItem||n.item.setFocus(),m.dontFocusEditableItem=!1)}var c,d,e,f,g,i,j,k=this.options,l=k.autoAddRecord&&this.model.allowAdd(),m=this,n=null,o=a.hasClass(ja),p=this.tabTraps$;if(this.lastEditModeCell=a[0],a.parent().hasClass(sa)||this._select(a,null,!1,!1),this._setFocusable(a[0]),a.attr("tabindex",-1),d=this._nextCellWithWrap(a).attr("tabindex",0),e=this._prevCellWithWrap(a).attr("tabindex",0),i=null,this.tableFrozenData$?(i=3,g=5,p.eq(0).prop("tabIndex",e.length?0:-1),j=1===a.parent().children().length,p.eq(1).prop("tabIndex",j?0:-1),p.eq(2).prop("tabIndex",j?0:-1)):l?(i=0,g=2):g=1,null!==i&&(l&&this.onLastPage&&0===d.length?p.eq(i).prop("tabIndex",0).addClass(oa):p.eq(i).prop("tabIndex",d.length?0:-1).removeClass(oa)),l&&this.onLastPage&&0===d.length?p.eq(g).prop("tabIndex",0).toggleClass("js-last",!d.length).addClass(oa):p.eq(g).prop("tabIndex",d.length?0:-1).toggleClass("js-last",!d.length).removeClass(oa),!this.activeRecord||this.activeRecordId!==a.parent().attr(jb)){if(this.activeRecord)return void this._deactivateRow(function(){o||(m._activateRow(a),b())});o||this._activateRow(a)}o||b()},_expandFloatingItem:function(a,b){var c,d,e=a.outerWidth();this.floatingItem$.css("position","").css("min-width",e+"px").insertAfter(this.element.find(F)).show().addClass(ya).draggable("enable").find(".a-GV-expandCollapse span").removeClass("icon-ig-expand").addClass("icon-ig-restore"),this.floatingItem$.children(qa).show().css({
width:"",height:""}),b?this.floatingItem$.position({my:"left top",at:"left top",of:a,collision:"fit fit"}):this.floatingItem$.css({left:this.lastFloatingPos.left,top:this.lastFloatingPos.top}),this.floatingItem$.find(na).not(".js-last").attr("tabindex",0),c=this._getColumnMetadata(a),c&&(d=this.columnItems[c.property]),d.item.setFocus()},_collapseFloatingItem:function(a){var b=a.innerWidth(),c=a.innerHeight();this.lastFloatingPos={left:this.floatingItem$.css("left"),top:this.floatingItem$.css("top")},this.floatingItem$.css({position:"relative",left:"",top:""}).appendTo(a).draggable("disable").removeClass(ya+" ui-state-disabled").find(".a-GV-expandCollapse span").removeClass("icon-ig-restore").addClass("icon-ig-expand"),this.floatingItem$.children(qa).hide().width(b).height(c),this.floatingItem$.find(".a-GV-expandCollapse").focus(),this.floatingItem$.find(na).not(".js-last").attr("tabindex",-1)},_deactivateCell:function(b){var c,d,e,f,g=null;b.length<=0||(this._setFocusable(b[0]),this._nextCellWithWrap(b).attr("tabindex",-1),this._prevCellWithWrap(b).attr("tabindex",-1),this.tabTraps$.prop("tabIndex",-1),c=this._getColumnMetadata(b),c&&(g=this.columnItems[c.property]),g&&b.hasClass(za)&&(h(document.body).off(".gridpopup"),this._setModelValue(b,g.item,this.activeRecord,c.property),e=this.model.getRecordMetadata(this.activeRecordId),f=null,e.fields&&(f=e.fields[c.property]),this.debugDontDeactivateCell?b.addClass(ua+" "+za):(this.floatingItem$.insertAfter(this.element.find(F)),this.floatingItem$.hide(),this._deactivateColumnItem(g),d=a.htmlBuilder(),this._renderFieldDataValue(d,c,this.activeRecord,e,f),b.html(d.toString())),this._updateRecordState(this.lastRow$.parent(),this.activeRecordId,this.activeRecord,e)))},_setFocus:function(a){a.tabIndex=0,a.focus()},_setFocusable:function(a){function b(a){var b,c,d,e;for(b=0;b<t.columnGroups.length;b++)for(d=t.columnGroups[b],c=0;c<d.length;c++)if(e=d[c],e.property===a)return e;return null}var c,d,e,f,g,i,j,k,l,o,p,q,r,t=this,u=this.options.tabbableCellContent,v=s(a);if(this.lastFocused&&(h(this.lastFocused).removeAttr(Ka).closest(Q).removeAttr("id"),d=s(this.lastFocused),v[0]!==d[0]&&d.add(d.find(u).not(":disabled,.js-asc,.js-desc")).prop("tabIndex",-1)),q=v.closest(P),k=q.attr(kb),l=null,(v.hasClass(ja)||v.hasClass(W))&&(l=this.lastColIndex),null===l&&(l=w(v)),this.tableFrozenHeader$&&!v.closest(P).closest(O).parent().hasClass(G)&&(l+=this.frozenColumnCount),l+=1,q.hasClass(ia)?o=m("BREAK_CONTEXT"):q.hasClass(Ea)?o=m("AGG_CONTEXT"):v.hasClass(U)?o=m("HEADER_CONTEXT"):v.hasClass(W)?o=m("GROUP_CONTEXT"):(k!==this.curRowNum&&l!==this.curColNum?o=n("ROW_COLUMN_CONTEXT",k,l):k!==this.curRowNum?o=n("ROW_CONTEXT",k):l!==this.curColNum&&(o=n("COLUMN_CONTEXT",l)),r=this._getControlBreak(parseInt(k,10)),r&&r.offset!==this.curControlBreak&&(o+=" "+m("BREAK_CONTEXT")+" "+r.label+".")),o&&this.accContext$.text(o),e=v.find(u).not(":disabled,.js-asc,.js-desc").prop("tabIndex",0).length,e||v.prop("tabIndex",0),this.lastFocused=a,f="",k!==this.curRowNum&&(this.curRowHeaders&&h(this.curRowHeaders).removeAttr("id"),this.curRowHeaders="",q=this._getRowForCell(v),q.find("."+aa).not(v).each(function(a){var b=t.idPrefix+"_rh_"+a;h(this).attr("id",b),f+=b+" ",t.curRowHeaders&&(t.curRowHeaders+=","),t.curRowHeaders+="#"+b})),l!==this.curColNum&&!this.focusInHeader)if(c=this._getColumnMetadata(v),c&&c.domId){for(g="",i=z(c);i;)j=b(i),j&&j.domId&&(g=j.domId+" "+g),i=j.parentGroupName;g+=c.domId,f+=g+" "}else v.hasClass(ea)&&(f+=this.idPrefix+"_shh ");p=this.idPrefix+"_cur",f+=p,f=this.accContextId+" "+f,h(a).attr(Ka,f).closest(Q).attr("id",p),this.curRowNum=k,this.curColNum=l,this.curControlBreak=r?r.offset:null},_getCellFocusable:function(a){var b=a.find(this.options.tabbableCellContent).not(":disabled,.js-asc,.js-desc");return b.length?b[0]:a[0]},_getPrevCellUp:function(a,b,c){var d,e=null,f=null;return(a.hasClass(ja)||a.hasClass(W))&&(f=this.lastColIndex),null===f&&(f=w(a),this.lastColIndex=f),a.closest(P).prevAll(Na).each(function(a){var c=h(this);return!c.hasClass(T)&&(d=c,a<b-1)}),this.focusInHeader||c||d||(this.focusInHeader=!0,d=a.closest(P).closest(O).parent().hasClass(G)?this.tableFrozenHeader$.children().last():this.tableHeader$.children().last()),d&&(e=d.hasClass(ia)?d.children().first():v(d,f)),e},_getNextCellDown:function(a,b){var c,d=null,e=null;return(a.hasClass(ja)||a.hasClass(W))&&(e=this.lastColIndex),null===e&&(e=w(a),this.lastColIndex=e),a.closest(P).nextAll(Na).each(function(a){var d=h(this);return!d.hasClass(T)&&(c=d,a<b-1)}),this.focusInHeader&&!c&&(this.focusInHeader=!1,c=a.closest(P).closest(O).parent().hasClass(G)?this.tableFrozenData$.children().first():this.tableData$.children().first()),c&&(d=c.hasClass(ia)?c.children().first():v(c,e)),d},_copy:function(a){var b,c,d,e,f,g,h,i,j,k,l=this.model,m=this.options,n=m.dataTransferFormats;if(m.selectCells){if(i=[],d=this.getSelectedRange(),!d||!d.values.length)return;for(i=d.columns.map(function(a){return a?m.columns[0][a]:null}),n.forEach(function(a){a.writer.begin(l,d,i)}),b=0;b<d.values.length;b++){for(j=d.recordIds[b],h=null!==j?l.getRecord(j):null,n.forEach(function(a){a.writer.beginRow(b,h,j)}),g=d.values[b],c=0;c<g.length;c++)k=h&&i[c]?l.getValue(h,i[c].property):"",n.forEach(function(a){a.writer.cell(c,i[c],k,g[c])});n.forEach(function(a){a.writer.endRow()})}}else{if(d=this.getSelection(),!d.length)return;for(i=[],"NONE"!==m.rowHeader&&i.push(null),this.getColumns().forEach(function(a){a.hidden||i.push(a)}),n.forEach(function(a){a.writer.begin(l,d,i)}),b=0;b<d.length;b++){for(e=d[b],j=e.first().attr(jb),h=null!==j?l.getRecord(j):null,n.forEach(function(a){a.writer.beginRow(b,h,j)}),f=e.children(),c=0;c<f.length;c++)k=h&&i[c]?l.getValue(h,i[c].property):"",n.forEach(function(a){a.writer.cell(c,i[c],k,f.eq(c).text())});n.forEach(function(a){a.writer.endRow()})}n.forEach(function(a){a.writer.end()})}n.forEach(function(b){b.writer.end(),a.setData(b.format,b.writer.toString())})},_setSelectionMode:function(){var a=this.options,b=this.element.children(F).find(ta);this.element.toggleClass("a-GV--selectCells",a.selectCells),b.removeClass(sa).removeAttr(Fa),a.persistSelection&&this.model.clearSelection(),this.lastFocused&&b[0]&&this._select(h(this.lastFocused),null)},_select:function(b,c,d,e,f){function g(a,b){var c;H.persistSelection&&(c=a.length,J.tableFrozenHeader$&&(c/=2),a.each(function(a){var d;return!(a>=c)&&(d=h(this).attr(jb),void(b&&x[d]===!1?delete x[d]:x[d]=b))}))}var i,j,k,l,m,n,o,p,r,s,t,u,v,w,x,y,z,A,B,C,D,E,G=!1,H=this.options,I="set",J=this,K=this.element.children(F).find(H.selectCells?"td.is-selected,th.is-selected":"tr.is-selected");if(H.persistSelection&&(x={}),b=b.filter(Na),p=b.parent(P),y=this.lastRow$&&this.lastRow$.index(b.first())>=0,this.tableFrozenHeader$&&(v=[],p.each(function(){u=J._getOtherTable(h(this)),v.push(u[J._rowIndex(h(this))])}),p=p.add(h(v))),c&&(H.selectCells&&H.multipleCells||!H.selectCells&&H.multiple)&&("click"===c.type?c.ctrlKey||c.metaKey?I="toggle":c.shiftKey&&(I="range"):"keydown"===c.type&&(c.keyCode===lb.SPACE?I=c.ctrlKey?"toggle":c.shiftKey?"range":"add":c.ctrlKey?I="none":c.shiftKey&&(I="range")),H.selectCells&&"range"!==I&&(I="set"),c.target||(c=null)),"range"!==I||this.selectAnchor&&!this.focusInHeader||(I="set"),!this.focusInHeader)if("set"!==I&&"range"!==I||(H.rowHeaderCheckbox&&K.find(da).removeClass(sa),K.removeClass(sa).removeAttr(Fa),H.persistSelection&&this.model.clearSelection()),H.selectCells)"range"===I?(z=h(this.selectAnchor),j=q(z.parent()),k=q(b.last().parent()),j>k&&(n=k,k=j,j=n),l=q(z),A=this.tableFrozenData$&&z.closest(this.tableFrozenData$).length>0,m=q(b.last()),B=this.tableFrozenData$&&b.last().closest(this.tableFrozenData$).length>0,(A===B&&l>m||A!==B&&!A)&&(n=m,m=l,l=n,n=B,B=A,A=n),this.tableData$&&!B&&this.tableData$.children().each(function(a){C=l,D=m+1,A!==B&&(C=0),a>=j&&a<=k&&h(this).hasClass("a-GV-row")&&!h(this).hasClass(Ea)&&h(this).children().slice(C,D).addClass(sa).attr(Fa,!0)}),A&&this.tableFrozenData$&&(C=l,D=m+1,A!==B&&(D=void 0),this.tableFrozenData$.children().each(function(a){a>=j&&a<=k&&h(this).hasClass("a-GV-row")&&!h(this).hasClass(Ea)&&h(this).children().slice(C,D).addClass(sa).attr(Fa,!0)}))):(b.addClass(sa).attr(Fa,!0),this.selectAnchor=b[0]);else if(i=p.hasClass(sa),r=p.filter(".a-GV-row").not(".is-aggregate"),"set"===I||"add"===I||"toggle"===I&&!i?(r.addClass(sa).attr(Fa,!0),this.selectAnchor=r[0],G=!0):"range"===I?(j=this._rowIndex(h(this.selectAnchor)),k=this._rowIndex(p.last()),j>k&&(n=k,k=j,j=n),v=[],this.tableDataChildren$.each(function(a){a>=j&&a<=k&&h(this).hasClass("a-GV-row")&&!h(this).hasClass(Ea)&&v.push(this)}),this.tableFrozenData$&&this.tableFrozenDataChildren$.each(function(a){a>=j&&a<=k&&h(this).hasClass("a-GV-row")&&!h(this).hasClass(Ea)&&v.push(this)}),r=h(v),r.addClass(sa).attr(Fa,!0),G=!0):"toggle"===I&&i&&(r.removeClass(sa).removeAttr(Fa),this.selectAnchor=r[0],H.rowHeaderCheckbox&&r.find(da).removeClass(sa),g(r,!1)),G&&(H.rowHeaderCheckbox&&r.find(da).addClass(sa),g(r,!0)),H.rowHeaderCheckbox&&H.multiple&&(s=this.tableFrozenData$.children(".a-GV-row"),t=s.length===s.filter(ta).length,this.tableFrozenHeader$.find(da).first().toggleClass(sa,t).attr(La,t?Sa:Ta).closest(fa).toggleClass(sa,t)),H.persistSelection)for(w in x)x.hasOwnProperty(w)&&this.model.setSelectionState(w,x[w]);b.length>0&&(o=this._getCellFocusable(b.first()),d?this._setFocus(o):this._setFocusable(o),y||this._setCurrentRow(b[0])),!this.focusInHeader&&("toggle"===I||"range"===I&&!i||"add"===I&&!i||"set"===I&&!a.arrayEqual(K,p))&&(E=!(f||H.navigation&&c&&"click"===c.type),e?ub(this,E,c):tb(this,E,c))},_clearChildrenRowCache:function(){this.tableFrozenDataChildren$=this.tableDataChildren$=null},_getOtherTable:function(a){var b,c=a.closest(O).parent().hasClass(G);return a.parents(F).length?c?(this.tableDataChildren$||(this.tableDataChildren$=this.tableData$.children()),b=this.tableDataChildren$):(this.tableFrozenDataChildren$||(this.tableFrozenDataChildren$=this.tableFrozenData$.children()),b=this.tableFrozenDataChildren$):b=(c?this.tableHeader$:this.tableFrozenHeader$).children(),b},_rowIndex:function(a){var b,c=a.closest(O).parent().hasClass(G);return a.parents(F).length?(this.tableFrozenData$&&!this.tableFrozenDataChildren$&&(this.tableFrozenDataChildren$=this.tableFrozenData$.children()),this.tableDataChildren$||(this.tableDataChildren$=this.tableData$.children()),b=c?this.tableFrozenDataChildren$:this.tableDataChildren$,b.index(a)):q(a)},_getRowForCell:function(a){var b=a.closest(P);return this.tableFrozenHeader$&&(b=b.add(this._getOtherTable(b).eq(this._rowIndex(b)))),b},_setCurrentRow:function(a){this.lastRow$=this._getRowForCell(h(a)).children()},_fireActivate:function(a,b){var c=this._getRowForCell(b);this._trigger(ab,a,{cell$:b,row$:c})},_nextCellWithWrap:function(a){var b,c,d,e=a.next();return e.length||(b=a.closest(P),this.tableFrozenHeader$?(c=this._getOtherTable(b),d=this._rowIndex(b),e=b.closest(O).parent().hasClass(G)?c.eq(d).children().first():c.eq(d+1).children().first()):e=b.next().children().first()),e},_prevCellWithWrap:function(a){var b,c,d,e=a.prev();return e.length||(b=a.closest(P),this.tableFrozenHeader$?(c=this._getOtherTable(b),d=this._rowIndex(b),b.closest(O).parent().hasClass(G)?(d-=1,d>=0&&(e=c.eq(d).children().last())):e=c.eq(d).children().last()):e=b.prev().children().last()),e},_clearHoverStates:function(){this.element.find(wa).removeClass(va),this.columnControls$.hide(),this.columnHandle$.hide()},_setRowHoverState:function(a){this.element.find(wa).removeClass(va),a=this._getRowForCell(a.children().eq(0)),a.addClass(va)},_sortChange:function(a,b,c){var d,e="set",f=this._getColumnMetadata(b);f.canSort&&(d=c===f.sortDirection,this.options.columnSortMultiple&&a.shiftKey?(e="add",e=d?"remove":f.sortDirection?"change":"add"):d&&(e="clear"),this._trigger(Wa,a,{header$:b,column:f,direction:c,action:e}))},_updateColumnControls:function(a){var b,c,d=!1,e=!1;"asc"===a.sortDirection?(b=m("SORT_OFF"),c=m("SORT_DESCENDING"),d=!0):"desc"===a.sortDirection?(b=m("SORT_ASCENDING"),c=m("SORT_OFF"),e=!0):(b=m("SORT_ASCENDING"),c=m("SORT_DESCENDING")),this.columnControls$.find(".js-asc").attr(gb,b).attr(Ia,b).toggleClass(za,d),this.columnControls$.find(".js-desc").attr(gb,c).attr(Ia,c).toggleClass(za,e)},_adjustSizeForScrollBars:function(b,c,d){var e=this.element.children(),f=e.filter(F).children(H),g=e.filter(D).children(J),h=A(this.tableData$.parent(),d);h.h&&(b-=a.getScrollbarSize().height),f.height(b),h.v&&(c-=a.getScrollbarSize().width),g.width(c)},_headerScrollCheck:function(a,b,c){var d,e,f,g=0,i=this.hdrScrollParent;return i&&(f=h(this.hdrScrollParent).offset().left,this.element.hasClass(Ma)?(a-b-f<eb?g=-fb:f+i.offsetWidth-a<eb&&f+i.offsetWidth-a>0&&(g=fb),c&&g&&(d=i.scrollLeft+g,d>0?(i.scrollLeft=0,g=0):d>i.scrollWidth-i.clientWidth?(i.scrollLeft=i.scrollWidth-i.clientWidth,g=0):i.scrollLeft=d)):(f+i.offsetWidth-(a+b)<eb?g=fb:a-f<eb&&a-f>0&&(g=-fb),c&&g&&(d=i.scrollLeft+g,d<0?(i.scrollLeft=0,g=0):d>i.scrollWidth-i.clientWidth?(i.scrollLeft=i.scrollWidth-i.clientWidth,g=0):i.scrollLeft=d)),e=!!g),e},_headerScrollStart:function(a,b,c){function d(){e.scrollTimerId=setTimeout(function(){e._headerScrollCheck(a,b,!0)?(c(),d()):e._headerScrollStop()},g[f]),f<g.length-1&&(f+=1)}var e=this,f=0,g=[151,134,119,106,95,86,79,74,71];this.scrollTimerId&&this._headerScrollStop(),d()},_headerScrollStop:function(){clearTimeout(this.scrollTimerId),this.scrollTimerId=null},_expandCollapseControlBreak:function(a,b){function c(a,c){var d=h(c);return!(!d.hasClass("a-GV-row")||d.hasClass(Ea))&&void d[b?"show":"hide"]()}var d,e,f,g;for(h.isArray(a)||(a=[a]),d=0;d<a.length;d++)e=a[d],e.hasClass(ia)&&(2!==e.length&&this.tableFrozenHeader$&&(f=this._getOtherTable(e),e=h([e[0],f[this._rowIndex(e)]])),e.first().nextAll().each(c),2===e.length&&e.last().nextAll().each(c),b?(g=m("BREAK_COLLAPSE"),e.addClass(ya).find(".js-toggleBreak").attr(Ja,Sa).attr(gb,g).attr(Ia,g).children(".a-Icon").removeClass("icon-right-arrow").addClass("icon-down-arrow")):(g=m("BREAK_EXPAND"),e.removeClass(ya).find(".js-toggleBreak").attr(Ja,Ta).attr(gb,g).attr(Ia,g).children(".a-Icon").removeClass("icon-down-arrow").addClass("icon-right-arrow")))},debugCellEdit:function(a){this.debugDontDeactivateCell=!!a}},apex.widget.contextMenuMixin))}(apex.util,apex.model,apex.debug,apex.lang,apex.item,apex.clipboard,apex.widget.util,apex.jQuery);