apex.message={},function(a,b,c,d){"use strict";function e(a,b,e){var f,g=c.getTopApex().jQuery,h=null,i=[{id:"apexConfirmBtn",text:d.getMessage(e.okLabelKey||"APEX.DIALOG.OK"),click:function(){h=!0,g(this).dialog("close")}}];void 0===e.dialogClass&&(e.dialogClass="ui-dialog--notification"),f="string"==typeof a?g("<div><p>"+c.escapeHTML(a).replace(/\r\n|\n/g,"<br>")+"</p></div>"):a,b&&i.unshift({text:d.getMessage("APEX.DIALOG.CANCEL"),click:function(){h=!1,g(this).dialog("close")}}),e.extraButtons&&e.extraButtons.forEach(function(a){i.unshift(a)}),g("body").append(f),f.dialog({closeText:d.getMessage("APEX.DIALOG.CLOSE"),autoOpen:!0,modal:!0,dialogClass:e.dialogClass,draggable:!0,resizable:!1,title:e.title||"",closeOnEscape:!0,create:function(){g(this).closest(".ui-dialog").css("position","fixed").attr("role","alertdialog"),g("#apexConfirmBtn").addClass("ui-button--hot")},open:function(){apex.navigation.beginFreezeScroll(),e.focus?e.focus():g("#apexConfirmBtn").focus()},beforeClose:e.beforeClose,close:function(){apex.navigation.endFreezeScroll(),f.remove(),null===h&&(h=!1),e.callback&&(b?e.callback(h):e.callback())},buttons:i}),e.defaultButton&&f.on("keydown",function(a){13===a.which&&"INPUT"===a.target.nodeName&&(g("#apexConfirmBtn").click(),a.preventDefault())})}function f(a,c){var d=c.closest("fieldset").parent();return d.length||(d=c.parent()),b("<div id='"+a+"_error_placeholder' data-template-id='FALLBACK_ET' class='u-hidden'></div>").appendTo(d)}function g(a){var d,e=apex.item(a);return d=e.callbacks&&e.callbacks.setFocusTo?b.isFunction(e.callbacks.setFocusTo)?e.callbacks.setFocusTo.call(e):b(e.callbacks.setFocusTo):b("#"+c.escapeCSS(a))}function h(a){var d={},e={},h=c.escapeCSS(a.pageItem)+"_error",i=g(a.pageItem),j=b("#"+c.escapeCSS(a.pageItem)+"_error_placeholder"),k=i.attr(s),l=c.htmlBuilder();j.length||(j=f(a.pageItem,i),v[n]||(v[n]="<div class='t-Form-error'>#ERROR_MESSAGE#</div>")),l.markup("<div").attr("id",h).markup(">").content(a.message).markup("</div>"),e.placeholders={ERROR_MESSAGE:l.toString()},j.html(v[j.data(m)]),j.html(c.applyTemplate(j.html(),e)).removeClass(p).addClass(o),k?(d[u]=k,d[s]=h+" "+k):d[s]=h,d[t]=!0,i.addClass(q).attr(d)}function i(e){var f,g,h,i,j,k,l,n=c.htmlBuilder(),q={},r=!0,s=b("#APEX_ERROR_MESSAGE");for(s.html(v[s.data(m)]),n.markup("<div").attr("class","a-Notification a-Notification--error").markup(">"),n.markup("<h2").attr("class","a-Notification-title aErrMsgTitle").markup(">"),h=1===e.length?d.getMessage("FLOW.SINGLE_VALIDATION_ERROR"):d.formatMessage("FLOW.VALIDATION_ERROR",e.length),n.content(h).markup("</h2>"),n.markup("<ul").attr("class","a-Notification-list htmldbUlErr").markup(">"),f=0;f<e.length;f++){if(i=e[f],n.markup("<li").attr("class","a-Notification-item htmldbStdErr").markup(">"),l=i.pageItem||i.regionStaticId,l&&n.markup("<a").attr("href","#").optionalAttr("data-region",i.regionStaticId).optionalAttr("data-instance",i.instance).optionalAttr("data-record",i.recordId).optionalAttr("data-column",i.columnName).optionalAttr("data-for",i.pageItem).attr("class","a-Notification-link").markup(">"),i.unsafe?n.content(i.message):n.markup(i.message),l&&n.markup("</a>"),i.techInfo){for(k=d.getMessage("APEX.ERROR.TECHNICAL_INFO"),n.markup("<button class='a-Button a-Button--notification js-showDetails' tabindex='-1' type='button'").attr("aria-label",k).attr("title",k).markup("><span class='a-Icon icon-info' aria-hidden='true'></span></button>"),n.markup("<div class='a-Notification-details' style='display:none'><h2>").content(k).markup("</h2><ul class='error_technical_info'>"),g=0;g<i.techInfo.length;g++)j=i.techInfo[g],n.markup("<li><span class='a-Notification-detailName'>").content(j.name+": ").markup("</span>"),j.usePre&&n.markup("<br>"),n.markup("<span").attr("class","a-Notification-detailValue"+(j.usePre?" a-Notification--pre":"")).markup(">").content(j.value).markup("</span></li>");n.markup("</ul></div>")}n.markup("</li>")}n.markup("</ul>"),n.markup("</div>"),q.placeholders={MESSAGE:n.toString(),CLOSE_NOTIFICATION:d.getMessage("APEX.CLOSE_NOTIFICATION"),ERROR_MESSAGE_HEADING:d.getMessage("APEX.ERROR_MESSAGE_HEADING"),IMAGE_PREFIX:window.apex_img_dir||""},s.html(c.applyTemplate(s.html(),q)),y.beforeShow&&(r=y.beforeShow(a.TYPE.ERROR,s)),(void 0===r||r)&&s.removeClass(p).addClass(o)}function j(){b("#APEX_ERROR_MESSAGE").removeClass(o).addClass(p)}var k="page",l="inline",m="template-id",n="FALLBACK_ET",o="u-visible",p="u-hidden",q="apex-page-item-error",r="a-Form-error",s="aria-describedby",t="aria-invalid",u="data-old-aria-describedby",v={},w=[],x=[],y={beforeShow:null,beforeHide:null,closeNotificationSelector:"button.t-Button--closeAlert"};a.TYPE={SUCCESS:"success",ERROR:"error"},a.registerTemplates=function(c){var d,e,f,g;if(b.isPlainObject(c))v=b.extend(v,c);else for(d=0;d<c.length;d++)for(f=c[d].ids.split(","),e=0;e<f.length;e++)g={},g[f[e]]=c[d].markup,a.registerTemplates(g)},a.clearTemplates=function(){v={}},a.getTemplates=function(){return v},a.setThemeHooks=function(a){y=b.extend(y,a)},a.showErrors=function(a){var c,d,e,f,g=b.isPlainObject(a)?[a]:a,j=[],m=b("#APEX_SUCCESS_MESSAGE");for(c=0;c<g.length;c++)w.push(g[c]);for(d=0;d<w.length;d++)e=w[d],f="string"==typeof e.location?[e.location]:e.location,b.inArray(l,f)>-1&&e.pageItem&&h(e),b.inArray(k,f)>-1&&j.push(e);j.length>0&&i(j),m.removeClass(o).addClass(p)},a.clearErrors=function(c){function d(a){var b=g(a),c=b.attr(u);c?b.attr(s,c).removeAttr(t+" "+u).removeClass(q):b.removeAttr(t+" "+s).removeClass(q)}var e,f,h,i,j=!0,k=b("#APEX_ERROR_MESSAGE");if(c)d(c),h=b("#"+c+"_error_placeholder."+r);else{for(e=0;e<w.length;e++)f=w[e],i="string"==typeof f.location?[f.location]:f.location,b.inArray(l,i)>-1&&f.pageItem&&d(f.pageItem);h=b("span."+r),y.beforeHide&&(j=y.beforeHide(a.TYPE.ERROR,k)),(void 0===j||j)&&k.removeClass(o).addClass(p).html("")}h.html("").removeClass(o).addClass(p),w=[]},a.showPageSuccess=function(e){var f=!0,g=b("#APEX_SUCCESS_MESSAGE"),h={placeholders:{SUCCESS_MESSAGE:e,CLOSE_NOTIFICATION:d.getMessage("APEX.CLOSE_NOTIFICATION"),SUCCESS_MESSAGE_HEADING:d.getMessage("APEX.SUCCESS_MESSAGE_HEADING"),IMAGE_PREFIX:window.apex_img_dir||""}};a.clearErrors(),g.html(c.applyTemplate(v[g.data(m)],h)),y.beforeShow&&(f=y.beforeShow(a.TYPE.SUCCESS,g)),(void 0===f||f)&&g.removeClass(p).addClass(o)},a.hidePageSuccess=function(){var c=!0,d=b("#APEX_SUCCESS_MESSAGE");y.beforeHide&&(c=y.beforeHide(a.TYPE.SUCCESS,d)),(void 0===c||c)&&d.removeClass(o).addClass(p)},a.confirm=function(a,c){var d;b.ui.dialog&&"CSS1Compat"===document.compatMode?e(a,!0,{callback:c}):(d=confirm(a),c(d))},a.alert=function(a,c){b.ui.dialog&&"CSS1Compat"===document.compatMode?e(a,!1,{callback:c}):(alert(a),c&&c())},a.addVisibilityCheck=function(a){x.push(a)},a.showDialog=e,b(function(){b("#APEX_SUCCESS_MESSAGE").on("click",y.closeNotificationSelector,function(b){a.hidePageSuccess(),b.preventDefault()}),b("#APEX_ERROR_MESSAGE").on("click",y.closeNotificationSelector,function(a){j(),a.preventDefault()}).on("click","a.a-Notification-link",function(a){function c(a){var b;for(b=0;b<x.length;b++)x[b](a)}var d,e,f,g=b(this),h={};b.each(["data-region","data-instance","data-record","data-column","data-for"],function(a,b){var c=b.substr(5),d=g.attr(b);void 0!==d&&(h[c]=d)}),f=h["for"],f?(c(f),0===b("#"+f+"_CONTAINER,#"+f+"_DISPLAY,#"+f,apex.gPageContext$).filter(":visible").length&&apex.item(f).show(),apex.item(f).setFocus()):h.region&&(e=h.region,c(e),d=apex.region(e),d&&d.gotoError(h)),a.preventDefault()}).on("click",".js-showDetails",function(a){var c=b(this),d=c.next();e(d,!1,{callback:function(){c.after(d)},dialogClass:"ui-dialog--notificationLarge"})}).on("keydown",".a-Notification-link",function(a){112===a.which&&a.altKey&&b(this).parent().find(".js-showDetails").click()})})}(apex.message,apex.jQuery,apex.util,apex.lang);