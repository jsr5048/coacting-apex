!function(a,b,c,d,e,f){"use strict";function g(a){return f.getMessage("APEXIR_"+a)}function h(a){var b=g(a),c=[b].concat(Array.prototype.slice.call(arguments,1));return f.formatNoEscape.apply(this,c)}function i(a){return"#"+b.escapeCSS(a)}var j="a-IRR",k=j+"-dialog",l=j+"-sortWidget",m=l+"-button",n=j+"-chart-attr-not-for-pie",o=j+"-group-by-column",p=j+"-add-function",q=j+"-column-num",r=j+"-function",s=j+"-function-col",t=j+"-function-num",u=j+"-function-num-col",v=j+"-function-row-",w=j+"-pivot-column",x=j+"-row-column",y=j+"-col-value",z=j+"-singleRow-group",A="ui-button--hot",B="is-active",C="REPORT",D="ICON",E="DETAIL",F="GROUP_BY",G="PIVOT",H="CHART",I="SHOW_COLUMN",J="SHOW_FILTER",K="SHOW_HIGHLIGHT",L="SHOW_ORDERING",M="SHOW_CTRL_BREAK",N="SHOW_COMPUTATION",O="SHOW_AGGREGATE",P="SHOW_CHART",Q="SHOW_GROUP_BY",R="SHOW_GROUP_BY_SORT",S="SHOW_PIVOT",T="SHOW_PIVOT_SORT",U="SHOW_FLASHBACK",V="SHOW_RENAME",W="SHOW_DELETE",X="SHOW_SAVE_DEFAULT",Y="SHOW_RENAME_DEFAULT",Z="SHOW_DELETE_DEFAULT",$="SHOW_RESET",_="SHOW_DOWNLOAD",aa="SHOW_NOTIFY",ba="SAVE_REPORT",ca="action",da="ASC",ea="DESC",fa="dialog_js",ga="checked",ha="PAGE",ia="REGION",ja={BUTTON:{CANCEL:g("CANCEL"),DELETE:g("DELETE"),APPLY:g("APPLY"),SEND:g("SEND")},DIALOG_TITLE:{SELECT_COLUMNS:g("SELECT_COLUMNS"),FILTER:g("FILTER"),HIGHLIGHT:g("HIGHLIGHT"),SORT:g("SORT"),CONTROL_BREAK:g("CONTROL_BREAK"),COMPUTATION:g("COMPUTE"),AGGREGATE:g("AGGREGATE"),CHART:g("CHART"),GROUP_BY:g("GROUP_BY"),GROUP_BY_SORT:g("GROUP_BY_SORT"),PIVOT:g("PIVOT"),PIVOT_SORT:g("PIVOT_SORT"),FLASHBACK:g("FLASHBACK"),SAVE_REPORT:g("SAVE_REPORT"),RENAME_REPORT:g("RENAME_REPORT"),DELETE_REPORT:g("DELETE_REPORT"),SAVE_DEFAULT_REPORT:g("SAVE_DEFAULT_REPORT"),RENAME_DEFAULT_REPORT:g("RENAME_DEFAULT_REPORT"),DELETE_DEFAULT_REPORT:g("DELETE_DEFAULT_REPORT"),RESET:g("RESET"),DOWNLOAD:g("DOWNLOAD"),SUBSCRIPTION:g("SUBSCRIPTION")}};a.widget("apex.interactiveReport",{version:"18.1",widgetEventPrefix:"interactivereport",suppressUpdate:!1,ajaxBusy:!1,lastFunction:null,idPrefix:null,currentAction:null,currentControl:null,currentColumnId:null,lastColumnId:null,computationId:null,reportId:null,worksheetId:null,region$:null,dialogDrop$:null,tempReturnElement$:null,viewMode:C,options:{regionId:null,ajaxIdentifier:null,toolbar:!0,searchField:!0,columnSearch:!0,rowsPerPageSelect:!1,reportsSelect:!0,actionsMenu:!0,reportViewMode:C,selectColumns:!0,filter:!0,rowsPerPage:!0,currentRowsPerPage:50,maxRowsPerPage:null,maxRowCount:null,sort:!0,controlBreak:!0,highlight:!0,compute:!0,aggregate:!0,chart:!0,groupBy:!0,pivot:!0,flashback:!0,saveReport:!0,saveDefaultReport:!1,reset:!0,help:!0,helpLink:"",download:!0,subscription:!0,pagination:!0,detailLink:!1,isControlPanelCollapsed:!1,fixedHeader:ha,fixedHeaderMaxHeight:null,pageItems:null,actionsMenuStructure:"IG",beforeRefresh:null,afterRefresh:null},_create:function(){var b=this.options.regionId,c=this,d=a(i(b),apex.gPageContext$),e=a(i(b+"_ir"),apex.gPageContext$);0===d.length&&(d=e.wrap('<div id="'+b+'"></div>')),this.idPrefix=this.options.regionId,this.reportId=this._getElement("report_id").val(),this.worksheetId=this._getElement("worksheet_id").val(),this.viewMode=this._getElement("view_mode").val(),this.region$=d,this.dialogDrop$=this._getElement(fa),this._getElement("worksheet_region").addClass(j),this._initOnCreate(),this._on(this.region$,{apexrefresh:function(a){this._search(),a.stopPropagation()}}),apex.region.create(b,{type:"InteractiveReport",refresh:function(){c.refresh()},widget:function(){return c.element}})},_destroy:function(){this._getElement("worksheet_region").removeClass(j),apex.region.destroy(this.options.regionId)},_setOption:function(a,b){this._super(a,b)},_action:function(b,c){var d=a.extend({widgetMod:"ACTION",widgetAction:b},c);this.currentAction=b,this._get(d)},_aggregateClear:function(a){this._action("DELETE_AGGREGATE",{id:a})},_aggregateControl:function(){var b=this._getDialogElement("aggregate_by").val(),c=a.inArray(b,["COUNT","COUNT_DISTINCT"])!==-1;this._getDialogElement("all_columns_container").toggle(c),this._getDialogElement("number_columns_container").toggle(!c)},_aggregateSave:function(){var b,c=this._getDialogElement("aggregate_by").val(),d=this._getDialogElement("aggregation").val();b=a.inArray(c,["COUNT","COUNT_DISTINCT"])!==-1?this._getDialogElement("all_columns").val():this._getDialogElement("number_columns").val(),this._action("SAVE_AGGREGATE",{id:d,value:c,x05:b})},_chartClear:function(){this.options.reportViewMode=C,this._action("DELETE_CHART")},_chartControl:function(){a("td."+n,this._getElement(fa)).toggle(!this._getDialogElement("chart_type_2").prop(ga))},_chartSave:function(){this.suppressUpdate=!0,this._action("SAVE_CHART",{f01:this._utilGetFormElValues([this._getId("chart_type"),this._getId("chart_label"),this._getId("chart_value"),this._getId("aggregate_by"),this._getId("label_axis_title"),this._getId("value_axis_title"),this._getId("sort"),this._getId("orientation")])})},_chartView:function(){this._action("VIEW_CHART")},_columnOrder:function(a){var b;a===da||a===ea?this._action("COLUMN_ORDER",{f01:this.lastColumnId,f02:a}):(b=this._utilGetFormElAttributes(),this._action("SORT",{f01:b.ids,f02:b.values}))},_columnDisplay:function(){var a=[];this._getDialogElement("shuttle_right").find("option").each(function(){a.push(this.value)}),this._action("SET_COLUMNS",{f01:a})},_columnHelp:function(){this._controlsGet("INFO",this.currentColumnId)},_columnHide:function(a){var b;b=a?a:this.currentColumnId,this._action("HIDE",{id:b})},_columnSearchShow:function(a){var b,c,d=[],e=[],f=this,g=JSON.parse(a).row;for(b=0;b<g.length;b++)c="0"===g[b].C,c?(d.push({type:ca,label:g[b].D,value:g[b].R,action:function(){f._getElement("column_search_root").removeClass(B),f._getElement("column_search_current_column").val(""),f._getElement("search_field").attr({title:"Search",placeholder:""})}}),d.push({type:"separator"})):e.push({label:g[b].D,value:g[b].R});d.push({type:"radioGroup",get:function(){return f._getElement("column_search_current_column").val()},set:function(a){var c,d,e=this.choices;for(b=0;b<e.length;b++)if(e[b].value===a){c=h("SEARCH_COLUMN",e[b].label),d=e[b].value,f._getElement("column_search_root").addClass(B),f._getElement("column_search_current_column").val(d),f._getElement("search_field").attr({title:c,placeholder:c});break}},choices:e}),this.searchMenu.items=d,this.searchMenuCallback(),this.searchMenuCallback=null,this.searchMenu=null},_computationClear:function(){this._action("DELETE_COMPUTATION",{id:this._getDialogElement("comp_id").val()})},_computationSave:function(){var a=$f_get_emptys([this._getId("column_heading"),this._getId("computation_expr")],"error","");a||(this.suppressUpdate=!0,this._action("SAVE_COMPUTATION",{id:this._getDialogElement("comp_id").val(),value:this._getDialogElement("column_heading").val(),x06:this._getDialogElement("format_mask").val(),x07:this._getDialogElement("computation_expr").val()}))},_computationShow:function(a){var b;b=a?a:this.computationId,this._controlsGet(N,b),this.computationId=null},_controlBreakOn:function(a){a&&(this.currentColumnId=a),this._action("BREAK",{id:this.currentColumnId})},_controlBreakSave:function(){var a,b=[];for(a=1;a<7;a++)b.push(this._getId("column")+"_0"+a),b.push(this._getId("enable")+"_0"+a);this._action("SAVE_BREAK",{f01:b,f02:this._utilGetFormElValues(b)})},_controlBreakToggle:function(a,b){this._action("BREAK_TOGGLE",{id:a,value:b})},_controlsFormatMask:function(b){this.suppressUpdate=!0,this.tempReturnElement$=a(i(b)),this._controlsGet("FORMAT_MASK_LOV")},_controlsGet:function(a,b){this._dialogReset(),this.currentAction="CONTROL",this.currentControl=a,b&&(this.currentColumnId=b),this._get({widgetMod:"CONTROL",widgetAction:a,id:b})},_controlsNarrow:function(b){this.suppressUpdate=!0,this.tempReturnElement$=a(i(b)),this._controlsGet("NARROW",this._getDialogElement("column_name").val())},_controlsRow:function(a){this._controlsGet("SHOW_DETAIL",a)},_dialogCheck:function(b,c){var d="."+l,e=this._dialogReset;b&&(d=b),c&&(e=c),this._on(this.document,{click:function(b){a(b.target).closest(d).length||e.call(this)}})},_dialogColorPicker:function(b){var c=this;a(b).each(function(){var b=a(this).ColorPicker({eventName:"xxx",onSubmit:function(b,c,d,e){var f=a(e);f.val("#"+c.toUpperCase()).trigger("change").ColorPickerHide()},onBeforeShow:function(){a(this).ColorPickerSetColor(this.value)},onShow:function(b){return a(b).fadeIn("fast"),!1},onHide:function(b){return a(b).fadeOut("fast"),!1}}).ColorPickerHide();c._on(b,{keyup:function(a){b.ColorPickerSetColor(a.target.value)},blur:function(){b.ColorPickerHide()},change:function(b){var c=b.target;c.value=c.value.toUpperCase(),a(i(c.id+"_preview")).css("background",c.value)}}),c._on(i(this.id+"_picker"),{click:function(a){b.ColorPickerShow(),a.preventDefault()}}),a(i(this.id+"_preview")).css("background",this.value)})},_dialogComp:function(a,b){var c=!isNaN(b)||"."===b;html_ReturnToTextSelection(b+"",a,c)},_dialogCurrentOperator:function(){var b=this._getDialogElement("column_name"),c=a(b.find("option")[b.prop("selectedIndex")]).attr("class");return this._getDialogElement(c+"_OPT")},_dialogColumnCheck:function(){var b=this._dialogCurrentOperator();a(b).siblings().hide().end().show(),this._dialogOperatorCheck(b)},_dialogOpen:function(a){function b(a,b,c,d,e){var f,i;f=c?c:ja.BUTTON.APPLY,d&&(i=A),g.push({text:f,"class":i,click:function(){a?b.call(h,a):b.call(h),e&&h._getElement(fa).dialog("close")}})}var c,d,e,f,g,h=this;switch(g=[{text:ja.BUTTON.CANCEL,click:function(){h._getElement(fa).dialog("close")}}],h.currentControl){case I:d=ja.DIALOG_TITLE.SELECT_COLUMNS,b(null,h._columnDisplay,null,!0,!0);break;case J:d=ja.DIALOG_TITLE.FILTER,e=h._getDialogElement("filter_id").val(),e&&b(e,h._filterDelete,ja.BUTTON.DELETE,!1,!0),b(e,h._filterSave,null,!0,!1);break;case K:d=ja.DIALOG_TITLE.HIGHLIGHT,e=h._getDialogElement("highlight_id").val(),e&&b(e,h._highlightClear,ja.BUTTON.DELETE,!1,!0),b(e,h._highlightSave,null,!0,!1);break;case L:d=ja.DIALOG_TITLE.SORT,b(this,h._columnOrder,null,!0,!0);break;case M:d=ja.DIALOG_TITLE.CONTROL_BREAK,b(null,h._controlBreakSave,null,!0,!0);break;case N:d=ja.DIALOG_TITLE.COMPUTATION,e=h._getDialogElement("comp_id").val(),e&&b(null,h._computationClear,ja.BUTTON.DELETE,!1,!0),b(null,h._computationSave,null,!0,!1);break;case O:d=ja.DIALOG_TITLE.AGGREGATE,e=h._getDialogElement("aggregation").val(),e&&b(e,h._aggregateClear,ja.BUTTON.DELETE,!1,!0),b(null,h._aggregateSave,null,!0,!0);break;case P:d=ja.DIALOG_TITLE.CHART,e=h._getDialogElement("chart_type_hidden").val(),e&&b(null,h._chartClear,ja.BUTTON.DELETE,!1,!0),b(null,h._chartSave,null,!0,!1);break;case Q:d=ja.DIALOG_TITLE.GROUP_BY,e=h._getDialogElement("group_by_id").val(),e&&b(null,h._groupByRemove,ja.BUTTON.DELETE,!1,!0),b(null,h._groupBySave,null,!0,!1);break;case R:d=ja.DIALOG_TITLE.GROUP_BY_SORT,b(this,h._groupBySort,null,!0,!0);break;case S:d=ja.DIALOG_TITLE.PIVOT,e=h._getDialogElement("pivot_id").val(),e&&b(null,h._pivotRemove,ja.BUTTON.DELETE,!1,!0),b(null,h._pivotSave,null,!0,!1);break;case T:d=ja.DIALOG_TITLE.PIVOT_SORT,b(this,h._pivotSort,null,!0,!0);break;case U:d=ja.DIALOG_TITLE.FLASHBACK,e=h._getDialogElement("flashback_time").val(),e&&b(null,h._flashbackClear,ja.BUTTON.DELETE,!1,!0),b(null,h._flashbackSave,null,!0,!1);break;case ba:d=ja.DIALOG_TITLE.SAVE_REPORT,b(null,h._save,null,!0,!1);break;case V:d=ja.DIALOG_TITLE.RENAME_REPORT,b(h.reportId,h._save,null,!0,!1);break;case W:d=ja.DIALOG_TITLE.DELETE_REPORT,b(null,h._remove,null,!0,!0);break;case X:d=ja.DIALOG_TITLE.SAVE_DEFAULT_REPORT,b(null,h._saveDefault,null,!0,!1);break;case Y:d=ja.DIALOG_TITLE.RENAME_DEFAULT_REPORT,b("RENAME_DEFAULT",h._saveDefault,null,!0,!1);break;case Z:d=ja.DIALOG_TITLE.DELETE_DEFAULT_REPORT,b("DELETE_DEFAULT",h._remove,null,!0,!0);break;case $:d=ja.DIALOG_TITLE.RESET,b(null,h._reset,null,!0,!0);break;case _:d=ja.DIALOG_TITLE.DOWNLOAD;break;case aa:d=ja.DIALOG_TITLE.SUBSCRIPTION,e=h._getDialogElement("notify_id").val(),f=h._getDialogElement("email_not_configured").text(),e&&b(null,h._notifyClear,ja.BUTTON.DELETE,!1,!0),f||b(null,h._notifySave,null,!0,!1)}c=this._getElement(fa).dialog({modal:!0,dialogClass:k,width:"auto",height:"auto",minWidth:"360",title:d,buttons:g,position:{my:"left+10 top+10",at:"left top",of:this._getElement("content")},close:function(){h._off(c),c.dialog("destroy")}}),a&&a.call()},_dialogColumnHandlers:function(){this._on(this._getDialogElement("column_name"),{change:function(){this._dialogColumnCheck()}}),this._on(this._getElement(fa),{"change select.a-IRR-operator":function(b){this._dialogOperatorCheck(a(b.target))},"click button.a-Button--menu":function(b){var c=a(b.currentTarget).data("picker-for");this._controlsNarrow(c)}})},_dialogOperatorCheck:function(b){var c,d=[],e=b.val(),f=b.data("column-type"),g=["is in the last","is not in the last","is in the next","is not in the next"];d[0]=$x(this._getId("expression")).parentNode,d[1]=$x(this._getId("expression2")).parentNode,d[2]=$x(this._getId("expression3")).parentNode,d[3]=$x(this._getId("between_from")).parentNode,d[4]=$x(this._getId("between_to")).parentNode,$x_Show_Hide(this._getId("expression_icon_link"),d),"is null"===e||"is not null"===e?this._getDialogElement("expression_label").hide():(this._getDialogElement("expression_label").show(),"DATE"===f&&a.inArray(e,g)===-1?($x_Show(d[3]),c=this._getDialogElement("column_name").find(":selected").data("format-mask"),this._setDateFieldFormatMask(this._getDialogElement("between_from"),c),"between"===e&&($x_Show(d[4]),this._setDateFieldFormatMask(this._getDialogElement("between_to"),c))):($x_Show(d[0]),"between"===e&&$x_Show(d[1]),a.inArray(e,g)>-1&&$x_Show_Hide(d[2],this._getId("expression_icon_link"))))},_dialogReset:function(){this.suppressUpdate||(this.currentColumnId=null,this.computationId=null,this._off(this.document,"click"))},_dialogUtilExpType:function(){var a={};return a.col=$x(this._getId("column_name")),a.col_type=a.col.options[a.col.selectedIndex].className,a.col_opt=$x(this._getId(a.col_type+"_OPT")),a.col_opt_val=$v(a.col_opt),"DATE"===a.col_type&&"is in the last"!==a.col_opt_val&&"is not in the last"!==a.col_opt_val&&"is in the next"!==a.col_opt_val&&"is not in the next"!==a.col_opt_val?a.form_items=[this._getId("between_from"),this._getId("between_to")]:a.form_items=[this._getId("expression"),this._getId("expression2")],a},_dialogValidate:function(){var a=[],b=this._dialogUtilExpType();switch(!0){case"between"===b.col_opt_val:a=[b.form_items[0],b.form_items[1]];break;case"is null"===b.col_opt_val||"is not null"===b.col_opt_val:a=[];break;case"is in the last"===b.col_opt_val||"is not in the last"===b.col_opt_val||"is in the next"===b.col_opt_val||"is not in the next"===b.col_opt_val:a=[b.form_items[0],this._getId("expression3")];break;default:a=[b.form_items[0]]}return!$f_get_emptys(a,"error","")&&b},_emailSend:function(){var a,b=[this._getId("email_to")],c=$f_get_emptys(b,"error","");c||(a=[this._getId("email_to"),this._getId("email_cc"),this._getId("email_bcc"),this._getId("email_subject"),this._getId("email_body")],this._action("SEND_EMAIL",{f01:a,f02:this._utilGetFormElValues(a)}),this._getElement(fa).dialog("close"))},_emailShow:function(){var a,b=this,c=this._getElement(fa),d=this._getDialogElement("email"),e=this._getDialogElement("email_button");d.show(),e.show(),e.is(":visible")&&(a=[{text:ja.BUTTON.CANCEL,click:function(){c.dialog("close")}},{text:ja.BUTTON.SEND,"class":A,click:function(){b._emailSend()}}],c.dialog("option","buttons",a))},_filterDelete:function(a){this._action("FILTER_DELETE",{id:a})},_filterSave:function(a){var b,c,d="ADD",e=this._getId("filter_type");if(a?(this.currentColumnId=a,d="UPDATE"):a=this._getDialogElement("column_name").val(),"COLUMN"===$v(e)){if(b=this._dialogValidate(),!b)return;c=[e,b.col.id,b.col_opt.id,b.form_items[0],b.form_items[1],this._getId("expression3")]}else c=[e,this._getId("filter_expr"),this._getId("filter_name")];this.suppressUpdate=!0,this._action("FILTER",{widgetActionMod:d,f01:this._utilGetFormElValues(c),id:a})},_flashbackSave:function(){this.suppressUpdate=!0,this._action("FLASHBACK_SET",{value:this._getDialogElement("flashback_time").val()})},_filterToggle:function(a,b){this._action("FILTER_TOGGLE",{id:a,value:b})},_flashbackClear:function(){this._action("FLASHBACK_CLEAR")},_flashbackToggle:function(){this._action("FLASHBACK_TOGGLE")},_functionControl:function(b){var c,d,e,f=["SUM","AVG","MAX","MIN","MEDIAN","RATIO_TO_REPORT_SUM"];b&&(c=b.id,d=c.substr(c.length-2),e=a.inArray(a(b).val(),f)!==-1,this._getDialogElement("number_columns_container_"+d).toggle(e),this._getDialogElement("all_columns_container_"+d).toggle(!e))},_get:function(b){function c(b){var c,d,e,f,g,h;if("CONTROL"===i.currentAction){if("SORT_WIDGET"===i.currentControl)i._sortWidgetShow(b);else if("INFO"===i.currentControl)i._helpWidgetShow(b);else if("NARROW"===i.currentControl)c=i._inlinePicker("NARROW",b);else if("FORMAT_MASK_LOV"===i.currentControl)c=i._inlinePicker("FORMAT_MASK_LOV",b);else if("SEARCH_COLUMN"===i.currentControl)i._columnSearchShow(b);else if("SHOW_DETAIL"===i.currentControl)i._singleRowViewShow(b);else{switch(i.currentControl){case J:e=function(){i._dialogColumnCheck(),i._dialogColumnHandlers(),i._on(i._getDialogElement("filter_type"),{"click input":function(a){var b="COLUMN"===a.target.value;i._getDialogElement("column_filter").toggle(b),i._getDialogElement("row_filter").toggle(!b)}}),i._on(i._getDialogElement("filter_expr_clear"),{click:function(a){i._getDialogElement("filter_expr").val(""),a.preventDefault()}}),i._on(i._getDialogElement("row_filter_columns"),{"click tr.a-IRR-row-filter-column":function(b){var c=a(b.currentTarget).data("column-id");i._dialogComp(i._getId("filter_expr"),c),b.preventDefault()}}),i._on(i._getDialogElement("row_filter_operators"),{"click tr.a-IRR-row-filter-operator":function(b){var c=a(b.currentTarget).data("operator");i._dialogComp(i._getId("filter_expr"),c),b.preventDefault()}})};break;case K:e=function(){i._dialogColumnCheck(),i._dialogColumnHandlers(),i._dialogColorPicker(i._getIdSelector("bg_color")+","+i._getIdSelector("font_color"))};break;case P:e=function(){i._chartControl(),i._on(i._getDialogElement("chart_type"),{"click input":function(){i._chartControl()}})};break;case N:e=function(){i._on(i._getDialogElement("comp_id"),{change:function(b){i._computationShow(a(b.currentTarget).val())}}),i._on(i._getDialogElement("format_mask_picker"),{click:function(a){i._controlsFormatMask(i._getId("format_mask")),a.preventDefault()}}),i._on(i._getDialogElement("computation_expr_clear"),{click:function(a){i._getDialogElement("computation_expr").val(""),a.preventDefault()}}),i._on(i._getDialogElement("computation_columns"),{"click tr.a-IRR-computation-column":function(b){var c=a(b.currentTarget).data("column-id");i._dialogComp(i._getId("computation_expr"),c),b.preventDefault()}}),i._on(i._getDialogElement("computation_keypad"),{"click td.a-IRR-key":function(b){var c=a(b.currentTarget).data("key");i._dialogComp(i._getId("computation_expr"),c),b.preventDefault()}}),i._on(i._getDialogElement("computation_functions"),{"click tr.a-IRR-computation-function":function(b){var c=a(b.currentTarget).data("function");i._dialogComp(i._getId("computation_expr"),c),b.preventDefault()}})};break;case I:e=function(){if(i.g_Shuttlep_v01=null,!a)var a=[];a[2]=$x(i._getId("shuttle_left")),a[1]=$x(i._getId("shuttle_right")),window.g_Shuttlep_v01=new dhtml_ShuttleObject(a[2],a[1])};break;case ba:e=function(){i._on(i._getDialogElement("save_option"),{change:function(a){i._controlsGet(a.target.value)}})};break;case X:case Y:e=function(){i._on(i._getDialogElement("default_type"),{"click input":function(a){this._saveDefaultTypeCheck(a.target.value)}}),i._saveDefaultTypeCheck($v(i._getId("default_type")))};break;case O:e=function(){i._on(i._getDialogElement("aggregation"),{change:function(b){this._controlsGet(O,a(b.currentTarget).val())}}),i._on(i._getDialogElement("aggregate_by"),{change:function(){this._aggregateControl()}})};break;case _:e=function(){i._on(i._getDialogElement("download_EMAIL"),{click:function(a){i._emailShow(),a.preventDefault()}})};break;case Q:e=function(){i._on(i._getDialogElement("add_column"),{click:function(a){this._utilAddMoreColumn(this._groupByMaxValue,o),a.preventDefault()}}),i._on(i._getDialogElement("group_by_functions"),{"change select.a-IRR-function":function(a){this._functionControl(a.target)},"click a.a-IRR-format-mask-picker":function(b){i._controlsFormatMask(a(b.currentTarget).data("picker-for")),b.preventDefault()}}),i._on(i._getDialogElement("add_function"),{click:function(a){this._utilAddMoreFunction(this._groupByMaxValue),a.preventDefault()}})};break;case S:e=function(){i._on(i._getDialogElement("add_pivot_column"),{click:function(a){this._utilAddMoreColumn(this._pivotMaxValue,w),a.preventDefault()}}),i._on(i._getDialogElement("add_row_column"),{click:function(a){this._utilAddMoreColumn(this._pivotMaxValue,x),a.preventDefault()}}),i._on(i._getDialogElement("pivot_functions"),{"change select.a-IRR-function":function(a){this._functionControl(a.target)},"click a.a-IRR-format-mask-picker":function(b){i._controlsFormatMask(a(b.currentTarget).data("picker-for")),b.preventDefault()}}),i._on(i._getDialogElement("add_function"),{click:function(a){this._utilAddMoreFunction(this._pivotMaxValue),a.preventDefault()}})}}i._getElement(fa).html(b),i._dialogOpen(e)}void 0===c&&(c=a(":input:visible",i._getElement(fa))),c.length>0&&c[0].focus()}else i.suppressUpdate?(d=["SAVE_NOTIFY","SAVE_COMPUTATION","FLASHBACK_SET","SAVE_HIGHLIGHT","FILTER","GROUP_BY_SAVE","SAVE_PIVOT","SAVE_CHART"],a.inArray(i.currentAction,d)>-1&&(i.lastFunction=function(){i._validAction(b)}),i.ajaxBusy=!1,i.suppressUpdate=!1,i.currentAction=null):(f=a($u_js_temp_drop()),f.html(b),g=f.find(i._getIdSelector("toolbar_controls")),h=f.find(i._getIdSelector("content")),i._getElement("toolbar_controls",i.element).replaceWith(g),i._getElement("content",i.element).replaceWith(h),i.options.currentRowsPerPage=1*i._getElement("row_select").val(),i.viewMode=i._getElement("view_mode").val(),i._initToolbar(),i._initControlPanel(),i.currentAction=null,i.currentControl=null,i.reportId=i._getElement("report_id").val(),i._singleRowViewHide(),i._getElement("full_view").show(),f.remove(),i._initFixedHeader(!0),a(":focus").length||(c=i.currentElementId?a("#"+i.currentElementId):i.element.find(":focusable"),c.length>0&&c[0].focus()))}function e(){i.lastFunction&&(i.lastFunction(),i.lastFunction=!1),i.ajaxBusy=!1,"SEARCH_COLUMN"===i.currentControl&&i.searchMenuCallback&&(i.searchMenuCallback(!1),i.searchMenuCallback=null,i.searchMenu=null)}var f,g,h,i=this,j=!1;"INFO"!==b.widgetAction&&this._sortWidgetHide(),b.widgetMod&&!this.suppressUpdate&&(a.inArray(b.widgetMod,["ACTION","PULL"])!==-1?j=!0:"CONTROL"===b.widgetMod&&b.widgetAction&&"SHOW_DETAIL"===b.widgetAction&&(j=!0)),f=a.extend({p_widget_name:"worksheet",p_widget_mod:b.widgetMod,p_widget_action:b.widgetAction,p_widget_action_mod:b.widgetActionMod,p_widget_num_return:i.options.currentRowsPerPage,x01:i.worksheetId,x02:i.reportId,x03:b.id,x04:b.value,pageItems:this.options.pageItems},b),delete f.widgetMod,delete f.widgetAction,delete f.widgetActionMod,delete f.id,delete f.value,"RESET"!==f.p_widget_action&&"REPORT_CHANGED"!==f.p_widget_action||delete f.p_widget_num_return,f.p_widget_action_mod||delete f.p_widget_action_mod,g={dataType:"html",refreshObject:j?this.region$:null,loadingIndicator:i._getElement("worksheet_region"),loadingIndicatorPosition:"centered",success:c,complete:e},h=d.plugin(this.options.ajaxIdentifier,f,g),h||(this.ajaxBusy=!1)},_getId:function(a){return this.idPrefix+"_"+a},_getIdSelector:function(a){return i(this._getId(a))},_getElement:function(b,c){var d;return d=c?c:b===fa||/^sort_widget.*$/.test(b)?apex.gPageContext$:this.element,a(this._getIdSelector(b),d)},_getDialogElement:function(a){return this._getElement(a,this._getElement(fa))},_groupByMaxValue:8,_groupByRemove:function(){this._action("GROUP_BY_REMOVE")},_groupBySave:function(){var a=this._utilGetFormElAttributes();this.suppressUpdate=!0,this._action("GROUP_BY_SAVE",{f01:a.ids,f02:a.values})},_groupBySort:function(a){var b,c=this._getDialogElement("group_by_id").val();a===da||a===ea?(this.lastColumnId=a.id,this._action("GROUP_BY_COLUMN_SORT",{id:c,f01:this.lastColumnId,f02:a})):(b=this._utilGetFormElAttributes(),this._action("GROUP_BY_SORT",{id:c,f01:b.ids,f02:b.values}))},_groupByView:function(){this._action("VIEW_GROUP_BY")},_helpWidgetShow:function(a){this._getElement("sort_widget_help").html(a).show(),this._getElement("sort_widget_action_help").find("button.a-IRR-sortWidget-button").addClass(B),this.lastColumnId=this.currentColumnId,this._dialogCheck(null,this._sortWidgetHide)},_highlightClear:function(a){var b;b=a?a:$x("HIGHLIGHT_ID").value,this._action("CLEAR_HIGHLIGHT",{id:b})},_highlightSave:function(){var a,b=this._dialogValidate();b&&(this.suppressUpdate=!0,a=this._utilGetFormElAttributes(),this._action("SAVE_HIGHLIGHT",{f01:a.ids,f02:a.values}),b=null)},_highlightToggle:function(a,b){this._action("TOGGLE_HIGHLIGHT",{id:a,value:b})},_initControlPanel:function(){function b(){d.options.isControlPanelCollapsed&&(d.options.isControlPanelCollapsed=!1,d.suppressUpdate=!0,d._action("CONTROL_MIN",{value:"N"})),d._getElement("control_panel_summary").hide()}function c(){d.options.isControlPanelCollapsed||(d.options.isControlPanelCollapsed=!0,d.suppressUpdate=!0,d._action("CONTROL_MIN",{value:"Y"})),d._getElement("control_panel_summary").show()}var d=this;this._on(this._getElement("control_panel"),{"click a.a-IRR-controlsLabel":function(b){var c=a(b.currentTarget),e=c.data("setting");switch(e){case"filter":this._controlsGet(J,c.data("filter-id"));break;case"report":this._controlsGet(V);break;case"report-default":this._controlsGet(Y);break;case"highlight":this._controlsGet(K,c.data("highlight-id"));break;case"break":this._controlsGet(M);break;case"chart":this._controlsGet(P);break;case"group_by":this._controlsGet(Q);break;case"pivot":this._controlsGet(S);break;case"flashback":d._controlsGet(U)}b.preventDefault()},"click a.a-IRR-reportSummary-label":function(b){var c=a(b.currentTarget),e=c.data("setting");switch(e){case"filter":this._controlsGet(J,c.data("filter-id"));break;case"report":this._controlsGet(V);break;case"report-default":this._controlsGet(Y);break;case"highlight":this._controlsGet(K,c.data("highlight-id"));break;case"break":this._controlsGet(M);break;case"chart":this._controlsGet(P);break;case"group-by":this._controlsGet(Q);break;case"pivot":this._controlsGet(S);break;case"flashback":d._controlsGet(U);break;default:d._getElement("control_panel").collapsible("expand")}b.preventDefault()},"click input.a-IRR-controlsCheckbox":function(b){var c=a(b.target),d=c.prop(ga)?"Y":"N",e=c.data("setting");switch(e){case"break":this._controlBreakToggle(c.data("break-column"),d);break;case"filter":this._filterToggle(c.data("filter-id"),d);break;case"highlight":this._highlightToggle(c.data("highlight-id"),d);break;case"flashback":this._flashbackToggle()}},"click button.a-IRR-button--remove":function(b){var c=a(b.currentTarget),d=c.data("setting");switch(d){case"break":this._controlBreakOn(c.data("break-column"));break;case"filter":this._filterDelete(c.data("filter-id"));break;case"report":this._controlsGet(W);break;case"report-default":this._controlsGet(Z);break;case"highlight":this._highlightClear(c.data("highlight-id"));break;case"flashback":this._flashbackClear();break;case"chart":this._chartClear();break;case"group-by":this._groupByRemove();break;case"pivot":this._pivotRemove()}b.preventDefault()}}),this._getElement("control_panel").collapsible({content:"div.a-MediaBlock-content",collapsed:d.options.isControlPanelCollapsed,collapse:c,expand:b})},_initFixedHeader:function(b){var c,d=this.options;if((d.fixedHeader===ha||d.fixedHeader===ia)&&0===a(".a-IRR-header--group",this.element).length){switch(this.viewMode){case C:d.reportViewMode===C&&(c="a-IRR-reportView");break;case F:c="a-IRR-groupByView"}if(c){if(0===a(this.element).find(".a-IRR-iconViewTable").length)switch(d.fixedHeader){case ha:a("."+c,this.element).setTableHeadersAsFixed(),a(".js-stickyTableHeader",this.element).stickyWidget({toggleWidth:!0,stickToEnd:!0});break;case ia:a("."+c,this.element).setTableHeadersAsFixed({maxHeight:d.fixedHeaderMaxHeight})}b&&a(window).trigger("apexwindowresized")}}},_initMenus:function(){function b(a,b){for(f=0;f<a.length;f++)if(a[f].id===b)return a[f]}function c(a,b){var c,d=a?1*a:null,e=b?1*b:null;return a&&b?c=d<e?d:e:a?b||(c=d):c=e,c}var d,f,h=this,i=this.options,j=[1,5,10,15,20,25,50,100,1e3];d="IG"===i.actionsMenuStructure?{items:[{id:"irColumn",type:ca,label:g("COLUMNS"),hide:!0,icon:"icon-irr-select-cols",action:function(){h._controlsGet(I,"COLUMN")}},{type:"separator"},{id:"irFilter",type:ca,label:g("FILTER"),hide:!0,icon:"icon-irr-filter",action:function(){h._controlsGet(J)}},{id:"irData",type:"subMenu",label:g("DATA"),hide:!1,icon:"icon-ig-data",menu:{items:[{id:"irOrdering",type:ca,label:g("SORT"),hide:!0,icon:"icon-irr-sort",action:function(){h._controlsGet(L)}},{id:"irGroupBySort",type:ca,label:g("GROUP_BY_SORT"),hide:!0,icon:"icon-irr-sort",action:function(){h._controlsGet(R)}},{id:"irPivotSort",type:ca,label:g("PIVOT_SORT"),hide:!0,icon:"icon-irr-sort",action:function(){h._controlsGet(T)}},{id:"irAggregate",type:ca,label:g("AGGREGATE"),hide:!0,icon:"icon-irr-aggregate",action:function(){h._controlsGet(O)}},{id:"irCompute",type:ca,label:g("COMPUTE"),hide:!0,icon:"icon-irr-compute",action:function(){h._computationShow()}},{id:"irFlashback",type:ca,label:g("FLASHBACK"),hide:!0,icon:"icon-irr-flashback",action:function(){h._controlsGet(U)}}]}},{id:"irFormat",type:"subMenu",label:g("FORMAT"),hide:!1,icon:"icon-irr-format",menu:{items:[{id:"irCtrlBreak",type:ca,label:g("CONTROL_BREAK"),hide:!0,icon:"icon-irr-control-break",action:function(){h._controlsGet(M)}},{id:"irHighlight",type:ca,label:g("HIGHLIGHT"),hide:!0,icon:"icon-irr-highlight",action:function(){h._controlsGet(K)}},{id:"irRowsPerPage",type:"subMenu",label:g("ROWS_PER_PAGE"),hide:!0,icon:"icon-irr-rows",menu:{items:[{type:"radioGroup",set:function(a){h.options.currentRowsPerPage=1*a,h._search("SEARCH")},get:function(){return h.options.currentRowsPerPage},choices:[]}]}}]}},{type:"separator"},{id:"irChart",type:ca,label:g("CHART"),hide:!0,icon:"icon-irr-chart",action:function(){h._controlsGet(P)}},{id:"irGroupBy",type:ca,label:g("GROUP_BY"),hide:!0,icon:"icon-irr-group-by",action:function(){h._controlsGet(Q)}},{id:"irPivot",type:ca,label:g("PIVOT"),hide:!0,icon:"icon-irr-pivot",action:function(){h._controlsGet(S)}},{type:"separator"},{id:"irReport",type:"subMenu",label:g("REPORT"),hide:!1,icon:"icon-irr-saved-report",menu:{items:[{id:"irSaveReport",type:ca,label:g("SAVE_REPORT"),hide:!0,icon:"icon-ig-save",action:function(){h._controlsGet(ba)}},{id:"irSaveDefault",type:ca,label:g("SAVE_REPORT_DEFAULT"),hide:!0,icon:"icon-ig-save",action:function(){h._controlsGet(X)}},{type:"separator"},{id:"irReset",type:ca,label:g("RESET"),hide:!0,icon:"icon-irr-reset",action:function(){h._controlsGet($)}}]}},{type:"separator"},{id:"irDownload",type:ca,label:g("DOWNLOAD"),hide:!0,icon:"icon-irr-download",action:function(){h._controlsGet(_)}},{id:"irNotify",type:ca,label:g("SUBSCRIPTION"),hide:!0,icon:"icon-irr-subscription",action:function(){h._controlsGet(aa)}},{type:"separator"},{id:"irHelp",type:ca,label:g("HELP"),hide:!0,icon:"icon-irr-help",action:function(){e.popup.url(h.options.helpLink)}}],beforeOpen:function(d,e){var k,l,m,n=e.menu.items,o=b(n,"irData"),p=o.menu.items,q=b(p,"irOrdering"),r=b(p,"irAggregate"),s=b(p,"irFlashback"),t=b(p,"irCompute"),u=b(p,"irGroupBySort"),v=b(p,"irPivotSort"),w=b(n,"irFormat"),x=w.menu.items,y=b(x,"irCtrlBreak"),z=b(x,"irHighlight"),A=b(x,"irRowsPerPage"),B=b(n,"irReport"),D=B.menu.items;if(h._dialogReset(),h._sortWidgetHide(),b(n,"irColumn").hide=!(i.selectColumns&&h.viewMode===C),
b(n,"irFilter").hide=!i.filter,o.hide=!0,h.viewMode===C?(i.sort||i.aggregate||i.flashback||i.compute)&&(o.hide=!1,q.hide=!i.sort,r.hide=!i.aggregate,s.hide=!i.flashback,t.hide=!i.compute,u.hide=!0,v.hide=!0):h.viewMode===F?i.groupBy&&(o.hide=!1,q.hide=!0,r.hide=!0,s.hide=!i.flashback,t.hide=!0,u.hide=!1,v.hide=!0):h.viewMode===G?i.pivot&&(o.hide=!1,q.hide=!0,r.hide=!0,s.hide=!i.flashback,t.hide=!0,u.hide=!0,v.hide=!1):h.viewMode===H&&(o.hide=!1,q.hide=!0,r.hide=!0,s.hide=!i.flashback,t.hide=!0,u.hide=!0,v.hide=!0),w.hide=!0,h.viewMode===C?(i.controlBreak||i.highlight)&&(w.hide=!1,y.hide=!i.controlBreak,z.hide=!i.highlight,A.hide=!i.rowsPerPage):h.viewMode===F?i.groupBy&&(w.hide=!1,y.hide=!0,z.hide=!0,A.hide=!i.rowsPerPage):h.viewMode===G?i.pivot&&(w.hide=!1,y.hide=!0,z.hide=!0,A.hide=!i.rowsPerPage):h.viewMode===H&&(w.hide=!1,y.hide=!0,z.hide=!0,A.hide=!i.rowsPerPage),i.rowsPerPage){for(A=b(x,"irRowsPerPage"),A.menu.items[0].choices=[],l=A.menu.items[0].choices,m=c(i.maxRowsPerPage,i.maxRowCount),f=0;f<j.length&&(k=j[f],!(m&&k>m));f++)l.push({label:""+k,value:k});i.maxRowsPerPage||l.push({label:g("ALL"),value:1e5})}h.viewMode===C?(i.chart||i.groupBy||i.pivot)&&(b(n,"irChart").hide=!i.chart,b(n,"irGroupBy").hide=!i.groupBy,b(n,"irPivot").hide=!i.pivot):h.viewMode===F?i.groupBy&&(b(n,"irChart").hide=!0,b(n,"irGroupBy").hide=!1,b(n,"irPivot").hide=!0):h.viewMode===G?i.pivot&&(b(n,"irChart").hide=!0,b(n,"irGroupBy").hide=!0,b(n,"irPivot").hide=!1):h.viewMode===H&&(b(n,"irChart").hide=!1,b(n,"irGroupBy").hide=!0,b(n,"irPivot").hide=!0),B.hide=!0,(i.saveReport||i.saveDefaultReport||i.reset)&&(B.hide=!1,b(D,"irSaveReport").hide=!i.saveReport,b(D,"irSaveDefault").hide=!i.saveDefaultReport,b(D,"irReset").hide=!i.reset),b(n,"irDownload").hide=!(i.download&&a.inArray(h.viewMode,[C,F,G])!==-1),b(n,"irNotify").hide=!(i.subscription&&a.inArray(h.viewMode,[C,F,G])!==-1),b(n,"irHelp").hide=!i.help}}:{items:[{id:"irColumn",type:ca,label:g("SELECT_COLUMNS"),hide:!0,icon:"icon-irr-select-cols",action:function(){h._controlsGet(I,"COLUMN")}},{type:"separator"},{id:"irFilter",type:ca,label:g("FILTER"),hide:!0,icon:"icon-irr-filter",action:function(){h._controlsGet(J)}},{id:"irRowsPerPage",type:"subMenu",label:g("ROWS_PER_PAGE"),hide:!0,icon:"icon-irr-rows",menu:{items:[{type:"radioGroup",set:function(a){h.options.currentRowsPerPage=1*a,h._search("SEARCH")},get:function(){return h.options.currentRowsPerPage},choices:[]}]}},{id:"irFormat",type:"subMenu",label:g("FORMAT"),hide:!1,icon:"icon-irr-format",menu:{items:[{id:"irOrdering",type:ca,label:g("SORT"),hide:!0,icon:"icon-irr-sort",action:function(){h._controlsGet(L)}},{id:"irCtrlBreak",type:ca,label:g("CONTROL_BREAK"),hide:!0,icon:"icon-irr-control-break",action:function(){h._controlsGet(M)}},{id:"irHighlight",type:ca,label:g("HIGHLIGHT"),hide:!0,icon:"icon-irr-highlight",action:function(){h._controlsGet(K)}},{id:"irCompute",type:ca,label:g("COMPUTE"),hide:!0,icon:"icon-irr-compute",action:function(){h._computationShow()}},{id:"irAggregate",type:ca,label:g("AGGREGATE"),hide:!0,icon:"icon-irr-aggregate",action:function(){h._controlsGet(O)}},{id:"irChart",type:ca,label:g("CHART"),hide:!0,icon:"icon-irr-chart",action:function(){h._controlsGet(P)}},{id:"irGroupBySort",type:ca,label:g("GROUP_BY_SORT"),hide:!0,icon:"icon-irr-sort",action:function(){h._controlsGet(R)}},{id:"irGroupBy",type:ca,label:g("GROUP_BY"),hide:!0,icon:"icon-irr-group-by",action:function(){h._controlsGet(Q)}},{id:"irPivotSort",type:ca,label:g("PIVOT_SORT"),hide:!0,icon:"icon-irr-sort",action:function(){h._controlsGet(T)}},{id:"irPivot",type:ca,label:g("PIVOT"),hide:!0,icon:"icon-irr-pivot",action:function(){h._controlsGet(S)}}]}},{type:"separator"},{id:"irFlashback",type:ca,label:g("FLASHBACK"),hide:!0,icon:"icon-irr-flashback",action:function(){h._controlsGet(U)}},{type:"separator"},{id:"irSaveReport",type:ca,label:g("SAVE_REPORT"),hide:!0,icon:"icon-irr-saved-report",action:function(){h._controlsGet(ba)}},{id:"irSaveDefault",type:ca,label:g("SAVE_REPORT_DEFAULT"),hide:!0,icon:"icon-irr-saved-report",action:function(){h._controlsGet(X)}},{id:"irReset",type:ca,label:g("RESET"),hide:!0,icon:"icon-irr-reset",action:function(){h._controlsGet($)}},{type:"separator"},{id:"irHelp",type:ca,label:g("HELP"),hide:!0,icon:"icon-irr-help",action:function(){e.popup.url(h.options.helpLink)}},{type:"separator"},{id:"irDownload",type:ca,label:g("DOWNLOAD"),hide:!0,icon:"icon-irr-download",action:function(){h._controlsGet(_)}},{id:"irNotify",type:ca,label:g("SUBSCRIPTION"),hide:!0,icon:"icon-irr-subscription",action:function(){h._controlsGet(aa)}}],beforeOpen:function(d,e){var k,l,m,n,o=e.menu.items,p=b(o,"irFormat"),q=p.menu.items,r=b(q,"irOrdering"),s=b(q,"irCtrlBreak"),t=b(q,"irHighlight"),u=b(q,"irCompute"),v=b(q,"irAggregate"),w=b(q,"irChart"),x=b(q,"irGroupBySort"),y=b(q,"irGroupBy"),z=b(q,"irPivotSort"),A=b(q,"irPivot");if(h._dialogReset(),h._sortWidgetHide(),b(o,"irColumn").hide=!(i.selectColumns&&h.viewMode===C),b(o,"irFilter").hide=!i.filter,b(o,"irRowsPerPage").hide=!i.rowsPerPage,p.hide=!0,h.viewMode===C?(i.sort||i.controlBreak||i.highlight||i.compute||i.aggregate||i.chart||i.groupBy||i.pivot)&&(p.hide=!1,r.hide=!i.sort,s.hide=!i.controlBreak,t.hide=!i.highlight,u.hide=!i.compute,v.hide=!i.aggregate,w.hide=!i.chart,x.hide=!0,y.hide=!i.groupBy,z.hide=!0,A.hide=!i.pivot):h.viewMode===F?i.groupBy&&(p.hide=!1,r.hide=!0,s.hide=!0,t.hide=!0,u.hide=!0,v.hide=!0,w.hide=!0,x.hide=!1,y.hide=!1,z.hide=!0,A.hide=!0):h.viewMode===G?i.pivot&&(p.hide=!1,r.hide=!0,s.hide=!0,t.hide=!0,u.hide=!0,v.hide=!0,w.hide=!0,x.hide=!0,y.hide=!0,z.hide=!1,A.hide=!1):h.viewMode===H&&(p.hide=!1,r.hide=!0,s.hide=!0,t.hide=!0,u.hide=!0,v.hide=!0,w.hide=!1,x.hide=!0,y.hide=!0,z.hide=!0,A.hide=!0),b(o,"irFlashback").hide=!i.flashback,b(o,"irSaveReport").hide=!i.saveReport,b(o,"irSaveDefault").hide=!i.saveDefaultReport,b(o,"irReset").hide=!i.reset,b(o,"irHelp").hide=!i.help,b(o,"irDownload").hide=!(i.download&&a.inArray(h.viewMode,[C,F,G])!==-1),b(o,"irNotify").hide=!(i.subscription&&a.inArray(h.viewMode,[C,F,G])!==-1),i.rowsPerPage){for(l=b(o,"irRowsPerPage"),l.menu.items[0].choices=[],m=l.menu.items[0].choices,n=c(i.maxRowsPerPage,i.maxRowCount),f=0;f<j.length&&(k=j[f],!(n&&k>n));f++)m.push({label:""+k,value:k});i.maxRowsPerPage||m.push({label:g("ALL"),value:1e5})}}},i.toolbar&&i.actionsMenu&&h._getElement("actions_menu").menu(d)},_initOnCreate:function(){function b(b){this.currentElementId=a(b.target).attr("id")}var c=this.options,d=this;c.toolbar&&this._initToolbar(!0),this._initControlPanel(),a(document.body).append(this._getElement("sort_widget")),this._on(this.element,{focusin:b,"click button, input[type=checkbox]":b}),this._on(this.element,{"click a.a-IRR-headerLink":function(b){this.viewMode===C?this._controlsGet("SORT_WIDGET",a(b.currentTarget).data("column")):this.viewMode===F?this._controlsGet(R):this.viewMode===G&&this._controlsGet(T),b.preventDefault()}}),this._on(this.element,{"click button.a-IRR-button--pagination":function(b){c.detailLink&&"SHOW_DETAIL"===this.currentControl?this._controlsRow(a(b.currentTarget).data("row-id")):c.pagination&&this._paginate(a(b.currentTarget).data("pagination"))},"click a.a-IRR-pagination-reset":function(a){this._search("SEARCH"),a.preventDefault()}}),c.pagination&&this._on(this.element,{"click a.a-IRR-pagination-reset":function(a){this._search("SEARCH"),a.preventDefault()}}),c.detailLink&&this._on(this.element,{"click a.a-IRR-detail-row":function(b){this._controlsRow(a(b.currentTarget).data("row-id")),b.preventDefault()}}),this._initFixedHeader(),apex.widget.util.onVisibilityChange(this.element[0],function(a){a&&d.element.find(".js-stickyTableHeader").trigger("forceresize")})},_initToolbar:function(b){var c=this.options,d=this;c.searchField&&(this._on(this._getElement("search_field"),{keydown:function(b){b.which===a.ui.keyCode.ENTER&&(this._search("SEARCH"),b.preventDefault())}}),this._on(this._getElement("search_button"),{click:function(a){this._search("SEARCH"),a.preventDefault()}}),c.columnSearch&&b&&this._getElement("column_search_drop").menu({asyncFetchMenu:function(a,b){d.searchMenu=a,d.searchMenuCallback=b,d._controlsGet("SEARCH_COLUMN")},afterClose:function(a,b){b.actionTaken&&setTimeout(function(){d._getElement("search_field").focus()},100)},items:[]})),c.rowsPerPageSelect&&this._on(this._getElement("row_select"),{change:function(a){var b=a.target.value;this._search("SEARCH",b),a.preventDefault()}}),c.reportsSelect&&this._on(this._getElement("saved_reports"),{change:function(a){var b=a.target.value;this._pull("REPORT_CHANGED",b),a.preventDefault()}}),this._on(this._getElement("toolbar_controls"),{"click .a-IRR-button--views":function(b){var c=a(b.currentTarget).data("view");switch(c){case"report":this._reportView(C);break;case"icon":this._reportView(D);break;case"details":this._reportView(E);break;case"chart":this._chartView();break;case"group_by":this._groupByView();break;case"pivot":this._pivotView()}}}),c.actionsMenu&&b&&this._initMenus()},_inlinePicker:function(c,d){var e,f,g=b.htmlBuilder(),h=JSON.parse(d),i=a("[data-picker-for="+b.escapeCSS(this.tempReturnElement$.attr("id"))+"]",this._getElement(fa));for(g.markup("<div").attr("id",this._getId("col_values_drop")).attr("class","a-IRR-col-values-drop").markup(">"),e=0;e<h.row.length;e++)g.markup("<a").attr("href","#").attr("class",y).attr("data-return-value",h.row[e].R).markup(">").markup(h.row[e].D).markup("</a>");return g.markup("</div>"),i.after(g.toString()),f=this._getDialogElement("col_values_drop"),"NARROW"===c?this._on(f,{"click a.a-IRR-col-value":function(b){var c,d=a(b.currentTarget).data("returnValue"),e=this._dialogCurrentOperator().val();"in"===e||"not in"===e?(c=this.tempReturnElement$.val(),c&&(d=c+","+d),this.tempReturnElement$.val(d)):(this.tempReturnElement$.val(d),f.remove(),this.tempReturnElement$.focus()),b.preventDefault()}}):this._on(f,{"click a.a-IRR-col-value":function(b){var c=a(b.currentTarget).data("returnValue");this.tempReturnElement$.val(c),f.remove(),this.tempReturnElement$.focus(),b.preventDefault()}}),this.suppressUpdate=!1,this.currentAction=null,this._on(f,{"keydown a":function(b){var c=f.find("a"),d=c.index(a(b.target)),e=c.length-1;switch(c.attr("tabindex",-1),b.which){case a.ui.keyCode.DOWN:d<e?c.eq(d+1).focus():c.eq(0).focus(),b.preventDefault();break;case a.ui.keyCode.UP:d>0?c.eq(d-1).focus():c.eq(e).focus(),b.preventDefault();break;case a.ui.keyCode.TAB:f.remove(),i.focus(),b.preventDefault();break;case a.ui.keyCode.ESCAPE:f.remove(),i.focus(),b.stopImmediatePropagation()}}}),this._dialogCheck(this._getIdSelector("col_values_drop"),function(){f.remove()}),f.find("a:first")},_paginate:function(a){this._action(ha,{widgetActionMod:a})},_notifyClear:function(){this._action("DELETE_NOTIFY",{id:this._getDialogElement("notify_id").val()})},_notifySave:function(){var a=[this._getId("notify_id"),this._getId("email_address"),this._getId("email_subject"),this._getId("notify_interval"),this._getId("start_date"),this._getId("end_date")];this.suppressUpdate=!0,this._action("SAVE_NOTIFY",{f01:a,f02:this._utilGetFormElValues(a)})},_pivotMaxValue:3,_pivotRemove:function(){this._action("DELETE_PIVOT")},_pivotSave:function(){var a=this._utilGetFormElAttributes();this.suppressUpdate=!0,this._action("SAVE_PIVOT",{f01:a.ids,f02:a.values})},_pivotSort:function(a){var b,c=this._getDialogElement("pivot_id").val();a===da||a===ea?(this.lastColumnId=a.id,this._action("PIVOT_COLUMN_SORT",{id:c,f01:this.lastColumnId,f02:a})):(b=this._utilGetFormElAttributes(),this._action("PIVOT_SORT",{id:c,f01:b.ids,f02:b.values}))},_pivotView:function(){this._action("VIEW_PIVOT")},_pull:function(b,c,d){var e=a.extend({widgetMod:"PULL",widgetAction:b},d);c&&(this.reportId=c),this.currentAction=b,this._get(e)},_remove:function(a){var b="DELETE";a&&(b=a),this._action(b)},_reportView:function(a){this.options.reportViewMode=a,this._action("VIEW_REPORT",{p_widget_view_mode:this.options.reportViewMode})},_reset:function(){this._action("RESET")},_save:function(a){var b=[],c="SAVE",d=this._getId("report_name"),e=$f_get_emptys([d],"error","");e||(a&&(c="RENAME"),b.push(d),b.push(this._getId("public_report")),b.push(this._getId("report_description")),this._action(c,{f01:b,f02:this._utilGetFormElValues(b)}),this._getElement(fa).dialog("close"))},_saveDefault:function(a){var b,c=[],d=[],e="SAVE_DEFAULT",f=this._getId("default_type"),g=$v(f),h=this._getId("report_name");"ALTERNATIVE"===g&&(b=$f_get_emptys([h],"error","")),b||(a&&(e=a),c.push(f),d.push(g),"ALTERNATIVE"===g&&(c.push(h),d.push(this._getDialogElement("report_name").val())),this._action(e,{f01:c,f02:d}),this._getElement(fa).dialog("close"))},_saveDefaultTypeCheck:function(a){var b="ALTERNATIVE"===a;this._getDialogElement("report_name").closest("tr").toggle(b)},_search:function(a,b){var c,d,e=this.options,f=this._getElement("search_field").val();b&&(e.rowsPerPage||e.rowsPerPageSelect)&&(e.currentRowsPerPage=1*b),d=this._utilGetFormElAttributes(this._getId("toolbar_controls")),c={f01:d.ids,f02:d.values},""===f?this._pull(null,this.reportId,c):this._action("QUICK_FILTER",c)},_setDateFieldFormatMask:function(a,b){var c,d,e,f=!1;a.length>0&&b&&(/HH|hh|ii|ss/.test(b)&&(f=!0,c=/HH/.test(b)),d=a.val(),e=a.datepicker("option","dateFormat"),a.datepicker("option","onSelect",null),a.datepicker("option","showTime",f).datepicker("option","showButtonPanel",f).datepicker("option","dateFormat",b),f&&a.datepicker("option","time24h",c),a.val(""),b===e&&a.val(d))},_singleRowViewClear:function(){var a=this._getElement("single_row_view"),b=this._getElement("report_view");return this._off(a),this._off(b),a.html(""),a},_singleRowViewControl:function(){var b=this._getElement("exclude_nulls"),c=this._getElement("show_displayed_only"),d=b.prop(ga),e=c.prop(ga),f=a("div.a-IRR-singleRow-row",this.element),g=f.filter(".is-displayed"),h=f.not(".is-displayed"),i=f.filter(".is-null");this.ajaxBusy||(g.show(),h.show(),i.show(),d&&e?(i.hide(),h.hide()):d?i.hide():e&&h.hide(),this.currentAction="CHANGE_DETAIL_OPTION",this.suppressUpdate=!0,this._action("CHANGE_DETAIL_OPTION",{value:d?b.val():"",x05:e?c.val():""}))},_singleRowViewHide:function(){this._singleRowViewClear().hide()},_singleRowViewShow:function(b){var c=this._singleRowViewClear();this._getElement("full_view").hide(),this._getElement("data_panel").val(""),this._getElement(fa).html(""),c.html(b).show(),c.find(":focusable")[0].focus(),this.options.detailLink&&(this._on(this._getElement("report_view"),{click:function(b){this._pull(null,a(b.target).data("report-id"))}}),this._on(c,{"click input.a-IRR-viewOptions-checkbox":function(){this._singleRowViewControl()}}),a("."+z).collapsible({collapsed:!1}))},_sortWidgetHide:function(){var b,c,d,e=this._getElement("sort_widget");e.is(":visible")&&(b=this._getElement("sort_widget_rows"),c=this._getElement("sort_widget_search_field"),d=a("[data-column="+this.lastColumnId+"]",this.element),e.removeAttr("style").css({position:"absolute",display:"none"}),d.closest(".a-IRR-header").removeClass(B),b.html(""),a("button.a-IRR-sortWidget-button",this.element).removeClass(B),this._off(e),this._off(b),this._off(c))},_sortWidgetSearch:function(a,b){var c=b?"contains":"=",d=[this.currentColumnId,c,a,"",""];this._sortWidgetHide(),this._action("COL_FILTER",{f01:d})},_sortWidgetShow:function(c){function d(a){var b=n.find(":focusable");a||(f=b.first(),f.data("first",!0)),g=b.last(),g.data("last",!0)}var e,f,g,h,j,k=JSON.parse(c),l=b.htmlBuilder(),n=this._getElement("sort_widget"),o=this._getElement("sort_widget_help"),p=this._getElement("sort_widget_rows"),q=a("[data-column='"+this.currentColumnId+"']",this.element),r=this._getElement("sort_widget_search"),s=this._getElement("sort_widget_search_field");if(this.computationId=k.dialog.id,o.hide(),a("button."+m,n).parent().show(),a.each(k.dialog.hide,function(b,c){a(i(c),n).hide()}),k.dialog.leadSortDir&&(k.dialog.leadSortDir===da?this._getElement("sort_widget_action_up").find("button.a-IRR-sortWidget-button").addClass(B):k.dialog.leadSortDir===ea&&this._getElement("sort_widget_action_down").find("button.a-IRR-sortWidget-button").addClass(B)),k.dialog.uv){for(h=k.dialog.row.length,e=0;e<h;e++)(0===k.dialog.row[e].R||k.dialog.row[e].R)&&(j=0===k.dialog.row[e].D||k.dialog.row[e].D?k.dialog.row[e].D:k.dialog.row[e].R,l.markup("<a").attr("href","#").attr("data-return-value",k.dialog.row[e].R).attr("class","a-IRR-sortWidget-row").markup(">").markup(j).markup("</a>"));p.append(l.toString()),r.show(),s.val("")}else r.hide();n.show().position({my:"left top",at:"left bottom",of:q}),q.closest(".a-IRR-header").addClass(B),this.lastColumnId=this.currentColumnId,this._on(n,{"click button.a-IRR-sortWidget-button":function(b){var c=a(b.currentTarget).data("option");switch(c){case"up":this._columnOrder(da);break;case"down":this._columnOrder(ea);break;case"hide":this._columnHide();break;case"break":this._controlBreakOn();break;case"help":this._columnHelp();break;case"computation":this._computationShow()}},keydown:function(b){if(b.which===a.ui.keyCode.ESCAPE&&(this._sortWidgetHide(),b.preventDefault(),q.focus()),b.which===a.ui.keyCode.TAB){var c=!!b.shiftKey;!c&&a(b.target).data("last")&&(b.preventDefault(),f.focus()),c&&a(b.target).data("first")&&(b.preventDefault(),g.focus())}}}),this._on(p,{"click a":function(b){this._sortWidgetSearch(a(b.currentTarget).data("returnValue")),b.preventDefault()}}),this._on(s,{keyup:function(a){g.data("last",!1),$d_Find(this._getId("sort_widget_rows"),a.target.value,"a"),d(!0)},keydown:function(b){b.which===a.ui.keyCode.ENTER&&(this._sortWidgetSearch(a(b.target).val(),!0),b.preventDefault())}}),this._dialogCheck(null,this._sortWidgetHide),d(),f.focus()},_utilGetFormEls:function(b){return a(i(b)+" :input").not("button")},_utilGetFormElAttributes:function(a){var b,c=[],d=[];return b=a?a:this._getId(fa),this._utilGetFormEls(b).each(function(a,b){c.push(b.id),d.push($v(b.id))}),{ids:c,values:d}},_utilGetFormElValues:function(a){var b,c=[];for(b=0;b<a.length;b++)c.push($v(a[b]));return c},_utilReplaceAttrText:function(a,b,c,d){var e=a.attr(b).replace(c,d);a.attr(b,e)},_utilAddMoreColumn:function(b,c){var d,e,f,g,h,i,j,k,l=this._getElement(fa);d=a("select."+c,l).length,d<b&&(e=d,f=++d,e<10?(g="0"+e,h="0"+f):(g=e+"",h=f+""),i=a("tr."+c+"-row-"+e,l),j=i.clone(),this._utilReplaceAttrText(j,"class",e,f),a("."+q,j).text(f),k=a("select."+c,j),this._utilReplaceAttrText(k,"id",new RegExp(g+"$"),h),this._utilReplaceAttrText(k,"title",e,f),j.insertAfter(i)),f===b&&(a("tr."+c+"-add",l).hide(),j.focus())},_utilAddMoreFunction:function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,q,w=this._getElement(fa);c=a("select."+r,w).length,c<b&&(d=c,e=++c,d<10?(f="0"+d,g="0"+e):(f=d+"",g=e+""),h=a("tr."+v+d,w),i=h.clone(),this._utilReplaceAttrText(i,"class",d,e),a("span."+t,i).text(e),j=a("select."+r,i),this._utilReplaceAttrText(j,"title",d,e),this._utilReplaceAttrText(j,"id",new RegExp(f+"$"),g),this._utilReplaceAttrText(a(this._getIdSelector("number_columns_container")+"_"+f,i),"id",new RegExp(f+"$"),g),this._utilReplaceAttrText(a(this._getIdSelector("all_columns_container")+"_"+f,i),"id",new RegExp(f+"$"),g),k=a("select."+u,i),this._utilReplaceAttrText(k,"title",d,e),this._utilReplaceAttrText(k,"id",new RegExp(f+"$"),g),l=a("select."+s,i),this._utilReplaceAttrText(l,"title",d,e),this._utilReplaceAttrText(l,"id",new RegExp(f+"$"),g),m=a(this._getIdSelector("label")+"_"+f,i),this._utilReplaceAttrText(m,"title",d,e),this._utilReplaceAttrText(m,"id",new RegExp(f+"$"),g),m.val(""),n=a(this._getIdSelector("format_mask")+"_"+f,i),this._utilReplaceAttrText(n,"title",d,e),this._utilReplaceAttrText(n,"id",new RegExp(f+"$"),g),n.val(""),o=a(this._getIdSelector("format_mask_picker")+"_"+f,i),this._utilReplaceAttrText(o,"id",new RegExp(f+"$"),g),this._utilReplaceAttrText(o,"data-picker-for",new RegExp(f+"$"),g),q=a(this._getIdSelector("function_sum")+"_"+f,i),this._utilReplaceAttrText(q,"title",d,e),this._utilReplaceAttrText(q,"id",new RegExp(f+"$"),g),q.prop(ga,!1),i.insertAfter(h)),e===b&&(a("tr."+p,w).hide(),i.focus())},_validAction:function(a){"true"===a?(this._pull("PULL_TOOLBAR"),this._getElement(fa).dialog("close")):(this._getDialogElement("dialog_msg").html(a),this.options.reportViewMode=C)},refresh:function(){this._pull()}})}(apex.jQuery,apex.util,apex.debug,apex.server,apex.navigation,apex.lang);