!function(a,b,c,d,e,f){"use strict";function g(a){return d.getMessage("APEX.GV."+a)}function h(a){var b=Array.prototype.slice.call(arguments);return b[0]="APEX.GV."+a,d.formatMessage.apply(d,b)}var i="a-GV-noDataMsg",j="a-GV-moreDataMsg",k="a-GV-altMessage",l="."+k,m=k+"-text",n="."+m,o=k+"-icon",p="a-GV-footer",q="a-GV--hideDeleted",r="a-GV-scrollFiller",s="."+r,t="is-deleted",u="."+t,v="aria-selected",w="is-active",x="is-selected",y="is-expanded",z="."+x,A="aria-labelledby",B="js-tabbable",C="."+B,D=":tabbable",E="data-start",F="data-end",G=300,H="apexbeginrecordedit",I="apexendrecordedit",J={};f.widget("apex.tableModelViewBase",{version:"18.1",widgetEventPrefix:"tableModelViewBase",options:{modelName:null,noDataMessage:null,moreDataMessage:null,editable:!1,autoAddRecord:!1,hasSize:!1,progressOptions:null,stickyFooter:!1,pagination:{scroll:!1,loadMore:!1,showPageLinks:!1,maxLinks:5,showPageSelector:!1,showRange:!0,firstAndLastButtons:!1},highlights:{},rowsPerPage:null,selectionStatusMessageKey:"APEX.GV.SELECTION_COUNT",hideDeletedRows:!1,footer:!0,scrollParentOverride:null},firstPage:function(){var a;return!this.renderInProgress&&(this.options.pagination.scroll?(a=this.scrollParent$,a.scrollTop(this.scrollDelta)):this.pageOffset>0&&(this.pageOffset=0,this.refresh(!1)),!0)},previousPage:function(){var a,b;return!this.renderInProgress&&(this.options.pagination.scroll?(a=this.scrollParent$,b=a.scrollTop()-this.scrollDelta-this.displayPageHeight,b<0&&(b=0),a.scrollTop(b+this.scrollDelta)):this.pageOffset>0&&(this.pageOffset-=this.pageSize,this.pageOffset<0&&(this.pageOffset=0),this.refresh(!1)),!0)},nextPage:function(){var a,b,c,d;return!this.renderInProgress&&(this.options.pagination.scroll?(a=this.scrollParent$,b=this._getDataContainer().first().height()-this.displayPageHeight,c=a.scrollTop()-this.scrollDelta+this.displayPageHeight,c>b&&(c=b),a.scrollTop(c+this.scrollDelta)):(d=this.model.getTotalRecords(),(d<0||this.pageOffset+this.pageCount<d)&&(this.pageOffset+=this.pageSize,this.refresh(!1))),!0)},lastPage:function(){var a,b,c,d;return!this.renderInProgress&&(this.options.pagination.scroll?(b=this.scrollParent$,c=this._getDataContainer().first().height()-this.displayPageHeight,b.scrollTop(c+this.scrollDelta)):(d=this.model.getTotalRecords(),d>0&&(a=Math.ceil(d/this.pageSize),this.pageOffset=(a-1)*this.pageSize,this.refresh(!1))),!0)},loadMore:function(){var a=this.model.getTotalRecords();return!this.renderInProgress&&(this.options.pagination.scroll&&!this.scrollPaging?(a<0||this.pageOffset+this.pageCount<a-1)&&(this.pageOffset+=this.pageSize,this._addPageOfRecords()):this.nextPage(),!0)},gotoPage:function(a){var b,c=this.model.getTotalRecords();return!this.renderInProgress&&(c>0&&(b=Math.ceil(c/this.pageSize),a>=0&&a<b&&(this.pageOffset=a*this.pageSize,this.refresh(!1))),!0)},getActiveRecordId:function(){return this.activeRecordId},getActiveRecord:function(){return this.activeRecord},setActiveRecordValue:function(a){var b=this.columnItems[a];this.activeRecord&&b&&(this.ignoreItemChange=!0,this._setModelValue(null,b.item,this.activeRecord,a,!0),this.ignoreItemChange=!1)},lockActive:function(){this.activeRecord&&(this.activeLockCount+=1)},unlockActive:function(){this.activeRecord&&(this.activeLockCount-=1,this.activeLockCount<0&&(this.activeLockCount=0),0===this.activeLockCount&&this.activeUnlockCallback&&(this.activeUnlockCallback(),this.activeUnlockCallback=null))},addStateIcon:function(b,c,d){var e=a.htmlBuilder();this.stateIconMessages[b]=d,0===this.stateIcons$.find("[data-state='"+b+"']").length&&(e.markup("<span tabindex='0'").attr("class",c).attr("data-state",b).markup("></span>"),this.stateIcons$.append(e.toString()))},removeStateIcon:function(a){this.stateIcons$.find("[data-state='"+a+"']").remove(),delete this.stateIconMessages[a]},_create:function(){var a=this.options;a.hideDeletedRows&&this.element.addClass(q),this.pageOffset=0,this.pageCount=0,this.pageSize=10,this.noData=!0,this.onLastPage=!1,this.lastScrollLeft=null,this.lastScrollTop=null,this.stateIconMessages={},this.reinitCallbacks=null,this.activeRecord=null,this.activeRecordId=null,this.activeLockCount=0,this.activeUnlockCallback=null,this.columnItems=null,this.columnItemsContainer$=null,a.progressOptions||(a.progressOptions={fixed:!a.hasSize}),a.pagination.scroll&&(a.rowsPerPage=null),a.rowsPerPage&&(this.pageSize=a.rowsPerPage)},_tableModelViewDestroy:function(){this.footer$.remove(),this.footer$=null,this.pageRange$=null,this.pageSelector$=null,this.status$=null,this.stateIcons$=null,this.element.removeClass(q),this._scrollHandler&&this.scrollParent$.off("scroll",this._scrollHandler)},_initModel:function(a,c){function d(a,b){var c,d,h,i,j,k,l,m,n,o;if(!g.pendingRefresh){if("refresh"===a)g.pageOffset=0,g.pageCount=0,g.refresh();else if("refreshRecords"===a||"revert"===a)for(d=g._elementsFromRecordIds(b.recordIds),c=0;c<d.length;c++)h=d[c],h&&(i=b.records[c],k=b.recordIds[c],j=b.newIds[k]||k,l=g.model.getRecordMetadata(j),g._replaceRecord(h,i,k,j,l));else if("move"===a)for(o=b.records,b.insertAfterId&&(d=g._elementsFromRecordIds([b.insertAfterId]),h=d.length>0?d[0]:null),c=o.length-1;c>=0;c--)i=o[c],j=g.model.getRecordId(i),l=g.model.getRecordMetadata(j),d=g._elementsFromRecordIds([j]),d.length>0&&d[0]&&g._removeRecord(d[0]),m=g._insertRecord(h,i,j,l,h?"after":"before");else if("insert"===a||"copy"===a)if(o="insert"===a?[b.record]:b.records,b.insertAfterId&&(d=g._elementsFromRecordIds([b.insertAfterId]),h=d.length>0?d[0]:null),g.noData)setTimeout(function(){g.refresh(),d=g._elementsFromRecordIds([g.model.getRecordId(o[0])]),d.length>0&&d[0]&&g._afterInsert(d)},1);else{for(n=[],c=o.length-1;c>=0;c--)i=o[c],j=g.model.getRecordId(i),l=g.model.getRecordMetadata(j),m=g._insertRecord(h,i,j,l,h?"after":"before"),n.push(m);g._afterInsert(n)}else if("clearChanges"===a){if(e)for(d=g._elementsFromRecordIds(b.deletedIds),c=0;c<d.length;c++)d[c]&&g._removeRecord(d[c]);for(d=g._elementsFromRecordIds(b.changedIds),c=0;c<d.length;c++)h=d[c],h&&(j=b.changedIds[c],l=g.model.getRecordMetadata(j),i=g.model.getRecord(j),g._updateRecordState(h,j,i,l))}else if(b.recordIds){for(d=g._elementsFromRecordIds(b.recordIds),c=0;c<d.length;c++)h=d[c],h&&(j=b.recordIds[c],l=g.model.getRecordMetadata(j),i=b.records[c],"delete"===a?(!f.hideDeletedRows&&e||g._removeFocus(h),e&&null!==l?g._updateRecordState(h,j,i,l):g._removeRecord(h)):g._updateRecordState(h,j,i,l));"delete"===a&&(0===g.model.getTotalRecords()?g.refresh():f.hideDeletedRows&&(g.element.find(u).removeClass(x).removeAttr(v),g._updateStatus()))}else"set"===a||"metaChange"===a?g.ignoreFieldChange||(i=b.record,j=g.model.getRecordId(i),b.oldIdentity&&g._identityChanged(b.oldIdentity,j),l=g.model.getRecordMetadata(j),d=g._elementsFromRecordIds([j]),d.length>0&&d[0]&&("set"===a&&g._updateRecordField(d[0],i,b.field,l),g._updateRecordState(d[0],j,i,l))):"instanceRename"===a&&g.modelName[1]===b.oldInstance&&(g.modelName[1]=b.newInstance);g._updateTotalRecords()}}var e,f=this.options,g=this;if(this.model&&(this.model.unSubscribe(this.modelViewId),this.modelName!==a&&b.release(this.modelName),this.model=null,this.modelName=null),a){if(this.modelName=a,this.model=b.get(a),!this.model)throw new Error("Model not found: "+a);this.modelViewId=this.model.subscribe({onChange:c||d,progressView:this.element,progressOptions:f.progressOptions}),e=this.model.getOption("onlyMarkForDelete")}},_renderButton:function(a,b,c,d){a.markup("<button class='"+b+"' type='button'").attr("aria-label",d).attr("title",d).markup("><span aria-hidden='true' class='a-Icon ").attr(c).markup("'></span></button>")},_renderAltDataMessages:function(a,b){function c(c,d,e){a.markup("<div class='"+c+" "+k+"' style='display:none;'><div class='"+o+"'>").markup("<span aria-hidden='true' class='a-Icon "+d+"'></span>").markup("</div><span class='"+m+"'").optionalAttr("id",b?b+"_msg":null).markup(">").markup(e).markup("</span></div>")}c(i,"icon-irr-no-results",this.options.noDataMessage),c(j,"icon-warning",this.options.moreDataMessage)},_renderLoadMore:function(a){var b=this.options;b.pagination.scroll&&b.pagination.loadMore&&!this.scrollPaging&&a.markup("<div class='a-GV-loadMore'><button type='button' class='js-load a-GV-loadMoreButton'>").content(g("LOAD_MORE")).markup("</button></div>")},_renderFooter:function(a,b){function c(){var c=g("PAGE_RANGE");a.markup("<span").optionalAttr("id",b?b+"_pageRange":null).attr("title",c).markup("><span class='u-vh'>").content(c).markup("</span><span class='a-GV-pageRange'></span></span>")}var d,e,f=this.options;f.footer&&(a.markup("<div class='"+p+"'><div class='a-GV-stateIcons'></div><div").optionalAttr("id",b?b+"_status":null).markup(" class='a-GV-status'></div><div class='a-GV-pagination'>"),f.pagination&&(d=!1,e=this.model.getOption("hasTotalRecords"),f.pagination.scroll||(e&&f.pagination.firstAndLastButtons&&this._renderButton(a,"a-GV-pageButton a-GV-pageButton--nav js-pg-first","icon-first",g("FIRST_PAGE")),this._renderButton(a,"a-GV-pageButton a-GV-pageButton--nav js-pg-prev","icon-prev",g("PREV_PAGE"))),e&&(f.pagination.showPageLinks||f.pagination.showPageSelector)?a.markup("<span class='a-GV-pageSelector'></span>"):f.pagination.showRange&&(c(),d=!0),f.pagination.scroll||(this._renderButton(a,"a-GV-pageButton a-GV-pageButton--nav js-pg-next","icon-next",g("NEXT_PAGE")),e&&f.pagination.firstAndLastButtons&&this._renderButton(a,"a-GV-pageButton a-GV-pageButton--nav js-pg-last","icon-last",g("LAST_PAGE"))),!d&&f.pagination.showRange&&c()),a.markup("</div></div>"))},_refreshPagination:function(a){var b=this.options;this.scrollPaging=b.pagination.scroll&&(this.model.getOption("hasTotalRecords")||!b.pagination.loadMore),this.lastScrollTop=0,this.lastScrollLeft=0,a.length&&(b.hasSize||(a=f(b.scrollParentOverride?b.scrollParentOverride:window)),this.lastScrollLeft=a.scrollLeft(),this.lastScrollTop=a.scrollTop())},_initPaginationFooter:function(a){var b=this,c=this.options,d=this.element.hasClass("u-RTL")?"right":"left";this.pageKey=null,this.footer$=this.element.find("."+p),this.status$=this.footer$.find(".a-GV-status"),this.stateIcons$=this.footer$.find(".a-GV-stateIcons"),this.pageRange$=this.footer$.find(".a-GV-pageRange"),this.pageSelector$=this.footer$.find(".a-GV-pageSelector"),this.noData$=this.element.find("."+i),this.moreData$=this.element.find("."+j),f.ui.tooltip&&this.stateIcons$.tooltip({content:function(){var a=f(this).attr("data-state");return b.stateIconMessages[a]},items:"[data-state]",show:apex.tooltipManager.defaultShowOption(),tooltipClass:"a-GV-tooltip",position:{my:d+" bottom",at:d+" top-10",collision:"flipfit"}}),c.hasSize?(this.scrollParent$=a,b.scrollPaging&&a.scroll(function(){b._scrollPage()}),this.scrollDelta=0):this._updateScrollHandler(),c.pagination.scroll&&(this.pageOffset=0,this.pageCount=0),!c.hasSize&&c.footer&&c.stickyFooter&&f.apex.stickyWidget&&this.footer$.stickyWidget({isFooter:!0,toggleWidth:!0,stickToEnd:!0,top:function(){return b.element.offset().top+b._getHeaderHeight()}}),c.pagination.showPageLinks?this.pageSelector$.click(function(a){var c=f(a.target).parent();c.length&&b.gotoPage(parseInt(c.attr("data-value"),10)),a.preventDefault()}):c.pagination.showPageSelector&&this.pageSelector$.change(function(a){b.gotoPage(parseInt(f(a.target).val(),10))}),this.footer$.find(".js-pg-first").click(function(){b.firstPage()}),this.footer$.find(".js-pg-prev").click(function(){b.previousPage()}),this.footer$.find(".js-pg-next").click(function(){b.nextPage()}),this.footer$.find(".js-pg-last").click(function(){b.lastPage()}),this.element.find(".js-load").click(function(){b.loadMore()})},_footerHeight:function(){return this.footer$?this.footer$.outerHeight()||0:0},_addPageOfRecords:function(a){function b(){var b,d,e,l,n,o=null,p=j.displayPageHeight/j.displayPageSize;if(j.pageCount=c,0===j.pageOffset&&0===c)j.noData=!0,i.hide(),j.moreData$.hide(),j.noData$.show(),k.autoAddRecord&&j.model.allowAdd()&&j._autoAddRecord();else{if(0===c)return void(k.pagination.scroll||(j.pageOffset-=j.pageSize,j.pageOffset<0&&(j.pageOffset=0),j._addPageOfRecords()));j.noData=!1,j.noData$.hide(),j.model.getDataOverflow()&&k.moreDataMessage?(j.moreData$.show(),i.hide()):(j.moreData$.hide(),i.show()),j.scrollPaging&&j.model.getOption("hasTotalRecords")?(b=h.last().find(s),e=j.model.getTotalRecords(),n=e,0===b.length?(d=j._getDataRenderContext(),j._renderFillerRecord(d,r),b=j._insertFiller(d,null),b.attr(E,0),b.attr(F,e),b=b.last()):0===b.last().next().length&&(n=parseInt(b.last().attr(F),10)),2===h.length&&(o=h.first().find(s)),e!==n&&(b.last().attr(F,e),o&&o.last().attr(F,e)),l=j._getRecordsPerRow(),b.each(function(a){var e,h,i=f(o?[o[a],this]:this),k=!1,n=parseInt(i.last().attr(E),10),q=parseInt(i.last().attr(F),10);if(j.pageOffset<=n?(k=!0,j._insertData(m,g,c,i,"before"),n=j.pageOffset+c):j.pageOffset+c<=q?(d=j._getDataRenderContext(),j._renderFillerRecord(d,r),h=j._insertFiller(d,i),e=Math.floor((j.pageOffset-n)/l)*p,h.attr(E,n),h.attr(F,j.pageOffset-1),h.css("height",e),j.scrollParent$.scrollTop(j.scrollParent$.scrollTop()-j.scrollParent$.height()),k=!0,j._insertData(m,g,c,i,"before"),n=j.pageOffset+c):j.pageOffset+c!==q+1&&a!==b.length-1||(k=!0,j._insertData(m,g,c,i,"after"),q=j.pageOffset-1),k)return n>=q?i.remove():(i.attr(E,n),i.attr(F,q),e=Math.floor((q-n)/l)*p,i.css("height",e)),!1})):j._insertData(m,g,c)}j._updateTotalRecords(),a&&a()}var c,d,e,g,h,i,j=this,k=this.options,m=this._getDataRenderContext();this.renderInProgress||(i=j.noData$.parent().children().not(l),(this.noData||this.moreData$.is(":visible"))&&(this.noData$.hide(),this.moreData$.hide(),i.show(),this.resize()),h=j._getDataContainer(),0!==this.pageOffset&&k.pagination.scroll||(this.lastControlBreak=null,this.pageFirstOffset="",this.pageLastOffset=""),this.controlBreakCollapsed=!1,k.pagination.scroll&&this.pageLastOffset>=this.pageOffset&&h.find(".a-GV-controlBreak").last().each(function(){j.controlBreakCollapsed=!f(this).hasClass(y)}),c=0,e=this.pageSize,g=this.pageOffset,this.renderInProgress=!0,this.model.forEachInPage(this.pageOffset,e,function(a,f,g){var h,i,j;return!k.pagination.scroll&&f>=0&&(f<this.pageOffset||f>=this.pageOffset+e)?(c+=1,void(c!==e&&a||(this.renderInProgress=!1))):(a&&(h=g?this.model.getRecordMetadata(g):{},j=h.serverOffset,this._hasControlBreaks()&&!h.agg&&(i=!0,d=this._controlBreakLabel(a),null===this.lastControlBreak&&(this.lastControlBreak=d,this._renderBreakRecord(m,i,d,j),this.controlBreakCollapsed=!1),h.endControlBreak&&(this.lastControlBreak=null)),this._renderRecord(m,a,f,g,h),void 0!==j&&(j+=1,""===this.pageFirstOffset&&(this.pageFirstOffset=j),this.pageLastOffset=j),c+=1),void(c!==e&&a||(this.renderInProgress=!1,b())))},this))},_initPageSize:function(){var b,c,d,e,g=this.options,h=g.hasSize?this.scrollParent$[0]:document;h||(h=document),b=this._getRecordHeight(),h===document?(c=f(window).height(),this.footer$.hasClass("js-stickyWidget-toggle")&&(c-=this._footerHeight()),e=this._getStickyTop(),e>0&&(c-=e+this._getHeaderHeight())):c=h.offsetHeight,c-=a.getScrollbarSize().height,b<=0&&(b=24),d=Math.floor(c/b),d<1&&(d=1),this.displayPageSize=d,this.displayPageHeight=d*b,d*=this._getRecordsPerRow(),this.options.rowsPerPage||(this.pageSize=g.pagination.scroll?Math.max(40,2*d):d)},_updateStatus:function(){var a,b=this._selectedCount(),c="";this.options.hideDeletedRows&&(a=this._deletedCount()),b>0&&(c+=d.format(this._selectedStatusMessage(),b)),a>0&&(c&&(c+=", "),c+=h("DELETED_COUNT",a)+" "),this.status$.text(c)},_setModelValue:function(a,b,c,d,e){var f,h,i,j,k,l;a&&a.removeClass(w),h=b.getValue(),e||(this.ignoreFieldChange=!0),l=this.model.getRecordId(c),i=this.model.getValue(c,d),null!==i&&"object"==typeof i&&i.hasOwnProperty("v")&&(h={v:h,d:b.displayValueFor(h)}),f=this.model.setValue(c,d,h),"DUP"===f?(this._setColumnItemValue(b,c,d),apex.message.alert(g("DUP_REC_ID"))):(j=b.getValidity(),k=this.model.getRecordId(c),j.valid?this.model.setValidity("valid",k,d):this.model.setValidity("error",k,d,b.getValidationMessage()),k!==l&&this._identityChanged(l,k)),e||(this.ignoreFieldChange=!1)},_initColumnItems:function(a){var b,d,g,h,i,j=!0;for(this.columnItems={},this.columnItemsContainer$=null,b=0;b<a.length;b++)d=a[b],h=d.elementId,i=null,h&&(J[h]?(i=this.columnItems[d.property]=J[h],g=i.item):(g=e(h),g.node&&(j=!1,J[h]=i=this.columnItems[d.property]={element$:f("#"+h).closest(".a-GV-columnItem"),item:g})),i&&!this.columnItemsContainer$&&(this.columnItemsContainer$=i.element$.parent()));this.columnItemsContainer$?j||this.columnItemsContainer$.find(D).addClass(B).attr("tabindex",-1):this.editable&&c.error("An editable "+this.widgetName+" must have at least one column with a column item.")},_activateColumnItem:function(a,b){var c=a.element$;c.find(C).attr("tabindex",0).removeClass(B),c.find(D).first().attr(A,b)},_deactivateColumnItem:function(a,b){var c=a.element$,d=c.find(D);d.first().removeAttr(A),this.columnItemsContainer$.append(c),d.addClass(B).attr("tabindex",-1)},_renderFieldDataValue:function(b,c,d,e,f){var g,h,i,j=null,k=this.options;(f&&f.url||c.linkTargetColumn)&&!e.agg&&(j=c.linkTargetColumn?this.model.getValue(d,c.linkTargetColumn)||null:f.url),g=this.model.getValue(d,c.property),(e.agg||e.inserted&&c.readonly)&&this.model.isIdentityField(c.property)&&(g=""),(c.linkText||c.linkAttributes||c.cellTemplate)&&(h={model:this.model,record:d}),j&&(b.markup("<a").attr("href",j),c.linkAttributes&&b.markup(a.applyTemplate(c.linkAttributes,h)),b.markup(" tabindex='-1'>")),j&&c.linkText?b.markup(a.applyTemplate(c.linkText,h)):c.cellTemplate?e.agg?b.content(""):b.markup(a.applyTemplate(c.cellTemplate,h)):null!==g&&""!==g||!(k.showNullAs||e.agg||j)?(null===g&&(g=""),"object"==typeof g&&g.hasOwnProperty("d")?g=g.d:(i=this.columnItems[c.property],i&&(g=i.item.displayValueFor(g))),b[c.escape===!1?"markup":"content"](g)):(g=e.agg||e.inserted||f&&(f.changed||f.error||f.warning)?"":j?j:k.showNullAs,b.content(g)),j&&b.markup("</a>")},_beginSetColumnItems:function(){this.reinitCallbacks=[]},_setColumnItemValue:function(a,b,c,d){var e,f=null,g=this.model.getValue(b,c);null!==g&&"object"==typeof g&&g.hasOwnProperty("d")&&(f=g.d,g=g.v),this.reinitCallbacks?(e=a.reinit(g,f),e&&this.reinitCallbacks.push(e)):a.setValue(g,f),d&&(d.fields&&d.fields[c]&&d.fields[c].disabled?a.disable():a.enable())},_endSetColumnItems:function(){var a,b=this.reinitCallbacks;if(b)for(a=0;a<b.length;a++)b[a]();this.reinitCallbacks=null},_autoAddRecord:function(a){var b=this.model.insertNewRecord(null,a);this.model.getRecordMetadata(b).autoInserted=!0},_triggerBeginEditing:function(a,b){this.element.trigger(H,[{model:this.model,record:a,recordId:b}])},_triggerEndEditing:function(a,b){this.element.trigger(I,[{model:this.model,record:a,recordId:b}])},_updateHighlights:function(){var a,b,c=this.options,d=[],e="";for(a in c.highlights)c.highlights.hasOwnProperty(a)&&(b=c.highlights[a],b.id=a,d.push(b));for(d.sort(function(a,b){return b.seq-a.seq}),a=0;a<d.length;a++)b=d[a],b.cssClass||(b.cssClass=(b.row?"hlr_":"hlc_")+b.id),(b.color||b.background)&&(e+=b.row?"."+b.cssClass+" td":"td."+b.cssClass,e+=" { ",b.color&&(e+="color: "+b.color+" !important; "),b.background&&(e+="background-color: "+b.background+" !important; "),e+="}\n");!this.gridStyles$&&e&&(this.gridStyles$=f("<style type='text/css'></style>"),f("head").append(this.gridStyles$)),this.gridStyles$&&(this.gridStyles$=this.gridStyles$.text(e))},_setOption:function(a,b){var d=this.options;this._super(a,b),"noDataMessage"===a?this.element.find(l+" > "+n).text(b):"rowsPerPage"===a?(d.pagination.scroll&&(d.rowsPerPage=null),d.rowsPerPage&&(this.pageSize=d.rowsPerPage)):"hideDeletedRows"===a?(this.element.toggleClass(q,b),b===!0&&this.element.find(u).removeClass(x).removeAttr(v),this._updateStatus()):"scrollParentOverride"===a&&(d.hasSize?c.warn("Ignoring scrollParentOverride when hasSize is true."):this._updateScrollHandler())},_updateScrollHandler:function(){var a=this,b=this.scrollParent$,c=this.options.scrollParentOverride;this.scrollParent$=f(c?c:window),this.scrollPaging&&(b&&this._scrollHandler?b.off("scroll",this._scrollHandler):this._scrollHandler=function(){a.element[0].clientWidth>0&&a._scrollPage()},this.scrollParent$.on("scroll",this._scrollHandler)),this.scrollDelta=this.element.offset().top-this._getStickyTop()},_scrollPage:function(){function a(a){return Math.floor(a/b.pageSize)*b.pageSize}var b=this,c=!this.model.getOption("hasTotalRecords"),d=this.scrollParent$.scrollTop();d!==this.lastScrollTop&&(this.lastScrollTop=d,this.scrollPageTimer||(this.scrollPageTimer=setTimeout(function(){var d,e,g,h,i,j=b.options,k=b.displayPageHeight/b.displayPageSize,l=b.scrollParent$.height(),m=0-l/2,n=m+2*l;b.scrollPageTimer=null,l=2*l,b.renderInProgress||(c?(e=b._getDataContainer().first(),h=e.height(),g=b.scrollParent$[0]===window?e.offset().top:e.position().top,j.hasSize||(g-=b.scrollParent$.scrollTop()),0-g+1.5*l>h&&(b.pageOffset+=b.pageSize,b._addPageOfRecords())):(d=b._getDataContainer().find(s),i=b.pageOffset,d.each(function(){var c,d,e=f(this),g=e.height(),h=parseInt(e.attr(E),10),o=parseInt(e.attr(F),10);if(h!==o)return d=b.scrollParent$[0]===window?e.offset().top:e.position().top,j.hasSize||(d-=b.scrollParent$.scrollTop()),c=d+g,d<=n&&c>=m?(g<3*l||d+l>n?b.pageOffset=h:c-l<=n?b.pageOffset=a(o):b.pageOffset=a(h+Math.floor((g-c)/k)),b.pageOffset!==i&&b._addPageOfRecords(),!1):void 0})))},G)))},_updateTotalRecords:function(){var a,b,c,d,e,f,g,i=null,j=null,k=this.options,l=k.pagination,m=this.model.getTotalRecords(),n=this.model.getServerTotalRecords();if(m>=0&&(i=Math.ceil(m/this.pageSize),j=Math.floor(this.pageOffset/this.pageSize)),null!==this.lastScrollLeft&&(this.scrollParent$.scrollLeft(this.lastScrollLeft),this.scrollParent$.scrollTop(this.lastScrollTop),this.lastScrollLeft=null,this.lastScrollTop=null),this.onLastPage=!1,0===this.pageCount&&0===this.pageOffset?(d="",this.onLastPage=!0,this.footer$.find(".js-pg-prev,.js-pg-next,.js-pg-first,.js-pg-last").attr("disabled",!0)):(this.footer$.find(".js-pg-prev,.js-pg-next,.js-pg-first,.js-pg-last").attr("disabled",!1),this.element.find(".js-load").attr("disabled",!1),0===this.pageOffset&&this.footer$.find(".js-pg-prev,.js-pg-first").attr("disabled",!0),m>0&&j===i-1&&(this.onLastPage=!0,this.footer$.find(".js-pg-next,.js-pg-last").attr("disabled",!0),this.element.find(".js-load").attr("disabled",!0)),g=this.model.getOption("hasTotalRecords"),d=this.scrollPaging&&g?h("TOTAL_PAGES",n):g?h("PAGE_RANGE_XYZ",this.pageFirstOffset,this.pageLastOffset,n):h("PAGE_RANGE_XY",this.pageFirstOffset,this.pageLastOffset)),this.pageRange$.text(d),i>0){if(l.showPageLinks){if(f=m+"_"+this.pageSize+"_"+j,this.pageKey!==f){for(this.pageKey=f,e="<ul class='a-GV-pageSelector-list'>",b=j-Math.floor(l.maxLinks/2),b<0&&(b=0),c=b+l.maxLinks,c>=i&&(c=i,b=c-l.maxLinks,b<0&&(b=0)),b>0&&(e+="<li class='a-GV-pageSelector-item'>&hellip;</li>"),a=b;a<c;a++)e+="<li class='a-GV-pageSelector-item' data-value='"+a+"'><button class='a-GV-pageButton' type='button'>"+(a+1)+"</button></li>";c<i&&(e+="<li class='a-GV-pageSelector-item'>&hellip;</li>"),e+="</ul>",this.pageSelector$.html(e)}this.pageSelector$.find(z).removeClass(x),this.pageSelector$.find("[data-value="+j+"]").addClass(x)}else if(l.showPageSelector){if(f=m+"_"+this.pageSize,this.pageKey!==f){for(this.pageKey=f,e="<select class='a-GV-pageSelectlist' size='1'>",a=0;a<i;a++)e+="<option value='"+a+"'>"+h("SELECT_PAGE_N",a+1)+"</option>";e+="</select>",this.pageSelector$.html(e)}this.pageSelector$.children("select").val(j)}}else this.pageSelector$.empty(),this.pageKey=null},_getHeaderHeight:function(){return 0},_getStickyTop:function(){return 0},_getRecordsPerRow:function(){return 1},_getDataRenderContext:function(){return a.htmlBuilder()},_getDataContainer:function(){return f()},_selectedCount:function(){return 0},_selectedStatusMessage:function(){return d.getMessage(this.options.selectionStatusMessageKey)},_deletedCount:function(){return 0},_hasControlBreaks:function(){return!1},_elementsFromRecordIds:function(a){return[]},_renderFillerRecord:function(a,b){},_insertFiller:function(a,b){return f()},_insertData:function(a,b,c,d,e){},_controlBreakLabel:function(a){return""},_renderBreakRecord:function(a,b,c,d){a.markup("<h3>").content(c).markup("</h3>")},_renderRecord:function(a,b,c,d,e){},_removeRecord:function(a){},_insertRecord:function(a,b,c,d,e){return f()},_afterInsert:function(a){},_identityChanged:function(a,b){},_replaceRecord:function(a,b,c,d,e){},_updateRecordField:function(a,b,c,d){},_removeFocus:function(a){},_updateRecordState:function(a,b,c,d){}});var K="a-TMV",L="a-TMV-body",M="a-TMV-w-scroll",N="."+M,O="is-disabled";f.widget("apex.tableModelView",f.apex.tableModelViewBase,{version:"18.1",widgetEventPrefix:"tableModelView",options:{beforeTemplate:"<ul>",recordTemplate:null,afterTemplate:"</ul>",collectionClasses:null,iconClassColumn:null,imageURLColumn:null,imageAttributes:null,labelColumn:null,linkTarget:!1,linkTargetColumn:null,linkAttributes:null,useIconList:!1,iconListOptions:{},selectionChange:null,pageChange:null},_create:function(){var a=this.options,b=this.element;c.info("TabelModelView '"+b[0].id+"' created. Model: "+a.modelName),b.addClass(K),this.rowHeight=null,this.recPerRow=null,this._super(),this._initModel(a.modelName),this._on(this._eventHandlers),this._initRecordTemplate(),this.refresh(),a.disabled&&this._setOption("disabled",a.disabled)},_eventHandlers:{resize:function(a){a.target===this.element[0]&&(this.resize(),a.stopPropagation())}},_destroy:function(){this._tableModelViewDestroy(),this.element.removeClass(K+" "+O).empty(),this.data$=null,this._initModel(null)},_setOption:function(a,b){this.options;if(c.info("TabelModelView '"+this.element[0].id+"' set option '"+a+"' to: ",b),"iconListOptions"===a)throw new Error("TabelModelView "+a+" cannot be set. Set options directly on the iconList widget");if(this._super(a,b),"disabled"===a){if(this.element.toggleClass(O,b),this.options.useIconList)return this.getIconList().option(a,b);b&&this.resize()}else"modelName"===a?(this._initModel(b),this.refresh(!1)):"highlights"===a?this._updateHighlights():"beforeTemplate"===a||"recordTemplate"===a||"afterTemplate"===a||"collectionClasses"===a||"iconClassColumn"===a||"imageURLColumn"===a||"imageAttributes"===a||"labelColumn"===a||"linkTarget"===a||"linkTargetColumn"===a||"linkAttributes"===a?(this._initRecordTemplate(),this.refresh()):"footer"!==a&&"useIconList"!==a&&"pagination"!==a||this.refresh()},refresh:function(a){var b,c=this.element;void 0===a&&(a=f(document.activeElement).closest(c).length>0),this.data$&&(b=this.getSelectedRecords()),this._refreshPagination(c.find(N)),this._initView(),this._updateStatus(),this.resize(),this._addPageOfRecords(function(){b&&b.length>0&&this.setSelectedRecords(b,a)})},resize:function(){var a,b,c,d,e=this.element,g=this.options,h=e.height(),i=e.children().first(),j=e.find(N);a=e.width(),j.width(a),this.rowHeight=null,this.recPerRow=null,g.hasSize&&(b=h-this._footerHeight(),i.height(b),j.height(b)),g.useIconList&&(this.data$.iconList("resize"),this.scrollPaging&&(c=this._getRecordsPerRow(),d=this._getRecordHeight(),this.data$.find(s).each(function(){var a,b=f(this),e=parseInt(b.last().attr(E),10),g=parseInt(b.last().attr(F),10);a=Math.floor((g-e)/c)*d,b.css("height",a)}))),this._initPageSize()},getSelection:function(){return this.options.useIconList?this.getIconList().getSelection():null},setSelection:function(a,b,c){if(this.options.useIconList)return this.getIconList().setSelection(a,b,c)},getRecords:function(a){var b,c,d=this,e=[];return a.each(function(){b=f(this).attr("data-id"),b&&(c=d.model.getRecord(b),c&&e.push(c))}),e},getSelectedRecords:function(){return this.options.useIconList?this.getRecords(this.getSelection()):null},setSelectedRecords:function(a,b,c){var d,e=[],g={};if(this.options.useIconList){for(d=0;d<a.length;d++)g[this.model.getRecordId(a[d])]=!0;this.data$.children().each(function(){var a=f(this).attr("data-id");g[a]&&e.push(this)}),this.setSelection(f(e),b,c)}},getIconList:function(){return this.options.useIconList?this.data$.data("apex-iconList"):null},_initRecordTemplate:function(){var a,b,c,d,e=/^\s*<[\w]+[^>]*>/,f=this.options;if(!f.recordTemplate){if(f.collectionClasses||(f.collectionClasses="a-TMV-defaultIconView"),!f.labelColumn)throw new Error("Option recordTemplate or labelColumn is required");f.beforeTemplate="<ul>",f.afterTemplate="</ul>",b="<li data-id='&APEX$ROW_ID.' class='&APEX$ROW_STATE_CLASSES.'>",f.linkTarget||f.linkTargetColumn?(d=f.linkTargetColumn?f.linkTargetColumn:"APEX$ROW_URL",b+="<a href='&"+d+".' class='a-IconList-content'"+(f.linkAttributes?" "+f.linkAttributes+" ":"")+">",c="</a>"):(b+="<span class='a-IconList-content'>",c="</span>"),(f.iconClassColumn||f.imageURLColumn)&&(b+="<span class='a-IconList-icon'>",b+=f.iconClassColumn?"<span class='&"+f.iconClassColumn+".'></span>":"<img src='&"+f.imageURLColumn+".'"+(f.imageAttributes?" "+f.imageAttributes+" ":"")+"/>",b+="</span>"),b+="<span class='a-IconList-label'>&"+f.labelColumn+".</span>",b+=c+"</li>",f.recordTemplate=b}a=e.exec(f.recordTemplate),a||(f.beforeTemplate.toLowerCase().match(/<ul|<ol/)?f.recordTemplate="<li>"+f.recordTemplate+"</li>":f.recordTemplate="<div>"+f.recordTemplate+"</div>")},_initView:function(){var a=this,b=this.options,c=this._getDataRenderContext();this.recordElement=f(b.recordTemplate)[0].nodeName.toLowerCase(),c.markup("<div").attr("class",L).markup(">"),this._renderAltDataMessages(c),c.markup("<div").attr("class",M).markup(">").markup(b.beforeTemplate).markup("<"+this.recordElement+" class='js-data-placeholder' style='display:none;'></"+this.recordElement+">").markup(b.afterTemplate),this._renderLoadMore(c),c.markup("</div></div>"),this._renderFooter(c),this.element.html(c.toString()),this.data$=this.element.find(".js-data-placeholder").parent(),this.data$.empty().addClass(b.collectionClasses||""),b.useIconList&&(this.data$.iconList(b.iconListOptions),this.data$.on("iconlistselectionchange",function(b){a._updateStatus(),a._trigger("selectionChange",b)})),this._initPaginationFooter(this.element.find(N))},_initRecordMetrics:function(){var a,b=this.options;this.recPerRow=1,a=this.data$.children().filter(":visible").first(),a.length?(b.useIconList&&(this.recPerRow=this.getIconList().getColumns()),this.rowHeight=a.outerHeight()):(a=f(apex.util.applyTemplate(b.recordTemplate,{})),a=this.data$.append(a),b.useIconList&&(this.getIconList().refresh(),this.recPerRow=this.getIconList().getColumns()),this.rowHeight=a.outerHeight(),this.data$.empty())},_getRecordHeight:function(){return this.rowHeight||this._initRecordMetrics(),this.rowHeight},_getRecordsPerRow:function(){return this.recPerRow||this._initRecordMetrics(),this.recPerRow},_getDataContainer:function(){return this.data$},_selectedCount:function(){return this.options.useIconList?this.getIconList().getSelection().length:0},_hasControlBreaks:function(){return!1},_elementsFromRecordIds:function(a){return[]},_renderFillerRecord:function(a,b){a.markup("<"+this.recordElement+" class='"+b+"'></"+this.recordElement+">")},_insertFiller:function(a,b){var c=f(a.toString());return b?b.before(c):this.data$.html(c),c},_insertData:function(a,b,c,d,e){d?d[e](a.toString()):this.data$.append(a.toString()),this.options.useIconList&&this.data$.iconList("refresh"),this._trigger("pageChange",null,{offset:b,count:c})},_controlBreakLabel:function(a){return""},_renderBreakRecord:function(a,b,c,d){a.markup("<h3>").content(c).markup("</h3>")},_renderRecord:function(a,b,c,d,e){var f,g=this.options,h="",i={};i.APEX$ROW_ID=""+d,i.APEX$ROW_INDEX=""+(c+1),e.url&&(i.APEX$ROW_URL=e.url),e.deleted?h+=" "+t:(e.inserted?h+=" is-inserted":e.updated&&(h+=" is-updated"),e.error?h+=" is-error":e.warning&&(h+=" is-warning"),e.highlight&&(f=g.highlights[e.highlight],h+=f&&f.cssClass?" "+f.cssClass:" "+e.highlight)),h&&(i.APEX$ROW_STATE_CLASSES=h),a.markup(apex.util.applyTemplate(this.options.recordTemplate,{extraSubstitutions:i,
model:this.model,record:b}))},_removeRecord:function(a){},_insertRecord:function(a,b,c,d,e){return f()},_afterInsert:function(a){},_identityChanged:function(a,b){},_replaceRecord:function(a,b,c,d,e){},_updateRecordField:function(a,b,c,d){},_removeFocus:function(a){},_updateRecordState:function(a,b,c,d){}})}(apex.util,apex.model,apex.debug,apex.lang,apex.item,apex.jQuery);