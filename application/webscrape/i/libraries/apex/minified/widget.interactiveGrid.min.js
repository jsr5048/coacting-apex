!function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a){return e.getMessage(a)}function n(a){return e.getMessage("APEX.IG."+a)}function o(){var b,c=[];for(b=0;b<He.length;b++)c.push(a.extend(!0,{},He[b]));return c.toolbarFind=He.toolbarFind,c}function p(a){return{label:a||"ENABLED",alignment:Wb,defaultValue:!0,columnCssClasses:wb,cellTemplate:Ib,width:80,noStretch:!0,seq:10}}function q(a,b){a.recordView("fieldElement",b).hide()}function r(a,b){a.recordView("fieldElement",b).show()}function s(a){return new Date(parseInt(a.substr(0,4),10),parseInt(a.substr(4,2),10)-1,parseInt(a.substr(6,2),10),parseInt(a.substr(8,2),10),parseInt(a.substr(10,2),10),parseInt(a.substr(12,2),10))}function t(a){return("000"+a.getFullYear()).substr(-4)+("0"+(a.getMonth()+1)).substr(-2)+("0"+a.getDate()).substr(-2)+("0"+a.getHours()).substr(-2)+("0"+a.getMinutes()).substr(-2)+("0"+a.getSeconds()).substr(-2)}function u(a,b,c){a.splice(c,0,a.splice(b,1)[0])}function v(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b].replace(/^\s+|\s+$/gm,""),""!==c&&d.indexOf(c)===-1&&d.push(c);return d}function w(a){var b=a;switch(a){case kc:b="group-by";break;case lc:b="saved-report";break;case mc:b="inactive-settings";break;case nc:b="invalid-settings";break;case zc:b="control-break";break;case Bc:b="save-report";break;case Ac:b="save-report"}return b}function x(a,b,c,d,e,f){var g;for(f||b.push({value:e,label:f}),g=0;g<a.length;g++)b.push({value:a[g][c],label:a[g][d]})}function y(b,c){var d;if(!a.isEmptyObject(c))for(d in c)c.hasOwnProperty(d)&&b.attr("data-"+d,c[d])}function z(b,c){var d,e=a.extend({id:"",type:Lb,value:"",maxChars:"",title:"",ariaDescribedBy:"",name:"",size:"",placeholder:"",readonly:!1,checked:!1,disabled:!1,required:!1,cssClasses:[],data:{},attributes:{}},c),f=e.cssClasses,g=e.attributes;if(b.markup("<input").attr("id",e.id).attr("type",e.type).attr("value",e.value).optionalAttr("maxlength",e.maxChars).optionalAttr("title",e.title).optionalAttr(Fb,e.ariaDescribedBy).optionalAttr("name",e.name).optionalAttr("size",e.size).optionalAttr("placeholder",e.placeholder).optionalBoolAttr("readonly",e.readonly).optionalBoolAttr(fc,e.checked).optionalBoolAttr(ec,e.disabled).optionalBoolAttr(dc,e.required),f.length>0&&b.attr($c,a.isArray(f)?f.join(" "):f),y(b,e.data),!a.isEmptyObject(g))for(d in g)g.hasOwnProperty(d)&&b.attr(d,g[d]);b.markup(" />")}function A(b,c){var d=a.extend({cssClasses:$a,maxChars:"4000"},c);z(b,d)}function B(b,c){var d,e,f=a.extend({id:"",iconOnly:!1,cssClasses:"",options:[]},c);for(b.markup("<fieldset ").attr($c,da).attr("id",f.id+"_fieldset").markup(">"),b.markup("<ul ").attr($c,da+" "+f.cssClasses).attr("id",f.id+"_list").markup(">"),d=0;d<f.options.length;d++)e=f.options[d],b.markup("<li").attr("data-value",e.value).attr($c,ea+(e.isSelected?" "+tb:"")).markup(">").markup("<span ").attr($c,fa).attr(Gb,e.label||e.value).attr("title",e.label||e.value).markup(">").markup("<span ").attr($c,ga+" "+lb+" "+e.iconCssClasses).attr(Eb,!0).markup("></span>"),f.iconOnly===!1&&b.markup("<span ").attr($c,ha).markup(">").content(e.label||e.value).markup("</span>"),b.markup("</span>").markup("</li>");b.markup("</ul>"),b.markup("<input ").attr("type","hidden").attr(Eb,!0).attr("id",f.id).markup(">"),b.markup("</fieldset>")}function C(d,e){function f(c){var d=a("#"+c+"_list");d.iconList({multiple:!1,selectionChange:function(){a("#"+c).val(a(this).iconList("getSelectionValues")).change()}}),d.iconList("setSelection",d.find('li[data-value="'+b.escapeHTMLAttr(e)+'"]'),!1),a("#"+c).change(function(){d.iconList("setSelection",d.find('li[data-value="'+b.escapeHTMLAttr(a("#"+c).val())+'"]'),!1)})}a.isFunction(apex.widget.iconList)?f(d):a.when(a.getScript(apex_img_dir+"libraries/apex/"+(0===c.getLevel()?"minified/widget.iconList.min.js":"widget.iconList.js")),a.Deferred(function(b){a(b.resolve)})).done(function(){f(d)})}function D(b,c){var d,e,f,g,h=a.extend({id:"",buttonClass:"",label:"",icon:"",iconOnly:!1,iconPosition:Kb,tabindex:"",attributes:{},data:{}},c);if(d=eb+(c.buttonClass?" "+c.buttonClass:""),e=lb+(c.icon?" "+c.icon:""),f=c.icon&&!c.iconOnly,b.markup("<button type='button'").optionalAttr("id",h.id).optionalAttr("tabindex",h.tabindex).attr($c,d),c.iconOnly&&h.label&&b.attr("title",h.label).attr(Gb,h.label),!a.isEmptyObject(h.attributes))for(g in h.attributes)h.attributes.hasOwnProperty(g)&&b.attr(g,h.attributes[g]);y(b,h.data),b.markup(">"),f&&h.iconPosition===Jb&&b.markup("<span").attr(Eb,!0).attr($c,e+" "+mb).markup("></span>"),c.iconOnly?b.markup("<span").attr(Eb,!0).attr($c,e).markup("></span>"):h.label&&b.markup("<span").attr($c,gb).markup(">").content(h.label).markup("</span>"),f&&h.iconPosition===Kb&&b.markup("<span").attr(Eb,!0).attr($c,e+" "+nb).markup("></span>"),b.markup("</button>")}function E(b,c){b.markup("<fieldset ").attr($c,"color_picker").attr("id",c.id+"_fieldset").markup(">"),b.markup("<span ").attr($c,cb).attr("style","height: 24px").markup(">"),A(b,a.extend({cssClasses:"color_picker "},c)),D(b,{id:c.id+"_PICKER",buttonClass:hb+" "+ib+" "+xb,label:e.formatMessage("APEX.IG.OPEN_COLORPICKER",c.itemLabel),icon:"icon-color-picker",iconOnly:!0,attributes:{"aria-haspopup":!0,"aria-expanded":!1}}),c.colorMenuId&&D(b,{id:c.id+"_COLORS",buttonClass:hb+" "+ib+" "+xb,label:n("COLORS"),attributes:{"data-menu":c.colorMenuId,"aria-haspopup":!0,"aria-expanded":!1}}),b.markup("</span>"),b.markup("</fieldset>")}function F(b,c){z(b,a.extend({type:Pb},c))}function G(b,c){var d=a.extend({id:"",cssClasses:ab,cols:"30",rows:"4",name:"",placeholder:"",disabled:!1,readonly:!1,required:!1,toolbar:!1,style:"resize: both;",wrap:"virtual"},c);d.toolbar&&(b.markup("<fieldset ").attr("id",c.id+"_fieldset").markup(">"),b.markup("<div").attr("id",d.id+"_toolbar").markup("></div>")),b.markup("<textarea").attr("id",d.id).attr($c,d.cssClasses).attr("cols",d.cols).attr("rows",d.rows).optionalAttr("name",d.name).optionalAttr("placeholder",d.placeholder).optionalAttr("style",d.style).optionalAttr("wrap",d.wrap).optionalBoolAttr(ec,d.disabled).optionalBoolAttr("readonly",d.readonly).optionalBoolAttr(dc,d.required).markup(">").markup("</textarea>"),d.toolbar&&b.markup("</fieldset>")}function H(b,c){var d=a.extend({cssClasses:"",text:"",data:{}},c);b.markup("<a href='#'").attr($c,d.cssClasses),y(b,d.data),b.markup(">").content(d.text).markup("</a>")}function I(b,c){var d,e=a.extend({cssClasses:Za,labelFor:"",label:"",labelHidden:!1,labelTextHidden:!1},c);d=e.cssClasses,e.labelHidden&&(d+=" "+zb),b.markup("<label").attr($c,d).attr("for",e.labelFor).markup(">"),e.labelTextHidden?b.markup("<span").attr($c,zb).markup(">").content(e.label).markup("</span>"):b.content(e.label),b.markup("</label>")}function J(b,c){z(b,a.extend({type:"radio"},c))}function K(b,c){var d,e,f,g=a.extend({id:"",label:"",name:"",radios:[]},c);for(b.markup("<div role='group'").attr("id",g.id).attr(Hb,"id1").markup(">"),d=0;d<g.radios.length;d++)e=g.radios[d],f=g.id+"_"+d,J(b,{name:g.name,id:f,value:e.value,checked:e.checked,cssClasses:ba}),I(b,{labelFor:f,cssClasses:ca,label:e.label});b.markup("</div>")}function L(b,c){var d,e,f=a.extend({id:"",cssClasses:_a,size:"1",title:"",required:!1,options:[]},c);for(b.markup("<select").optionalAttr("id",f.id).attr($c,f.cssClasses).attr("size",f.size).optionalAttr("title",f.title).optionalBoolAttr(dc,f.required).markup(">"),d=0;d<f.options.length;d++)e=f.options[d],b.markup("<option").attr("value",e.value).optionalBoolAttr("selected",e.isSelected).markup(">").content(e.label||e.value).markup("</option>");b.markup("</select>")}function M(b){var c;for(a.isArray(b)||(b=[b]),c=0;c<b.length;c++)j(b[c][0]).show()}function N(b){var c;for(a.isArray(b)||(b=[b]),c=0;c<b.length;c++)j(b[c][0]).hide()}function O(a,b){a.closest(Ya).find("."+Za).text(m(b))}function P(b,c){var d,e;for(a.isArray(b)||(b=[b]),d=0;d<b.length;d++)e=b[d],e.prop(dc,c).closest(Ya).toggleClass("is-required",c)}function Q(a,c){var d,f,g,j="apexDialogPromptInputId",k=b.htmlBuilder(),l=b.getTopApex().jQuery;k.markup("<div class='u-Form u-Form--labelsAbove u-Form--stretchInputs'>").markup("<div class='u-Form-fieldContainer'><div class='u-Form-labelContainer  u-tS'><span class='u-Form-label'>"),I(k,{labelFor:j,label:m(a.labelKey)}),k.markup("</span></div><div class='u-Form-inputContainer'>"),A(k,{id:j,value:a.value||"",required:!!a.required}),k.markup("</div></div></div>"),d=l(k.toString()),g={title:m(a.titleKey),dialogClass:"",defaultButton:!0,okLabelKey:a.okLabelKey||null,beforeClose:function(){f=l("#"+j).val()},callback:function(a){var b=!1;a&&(b=f),c(b)},focus:function(){l("#"+j).focus()}},a.helpKey&&(g.extraButtons=[{text:m("APEX.DIALOG.HELP"),CLASS:"ui-button-help",click:function(){e.loadMessagesIfNeeded([a.helpKey,a.helpTitleKey],function(){h.popupFieldHelp({title:m(a.helpTitleKey),helpText:m(a.helpKey)})})}}]),i.showDialog(d,!0,g)}function R(a){Je.push(a)}var S="a-IG",T="."+S,U=S+"-header",V="."+U,W=S+"--noToolbar",X=S+"-body",Y="."+X,Z=S+"-content",$=Z+"Container",_="."+$,aa="a-IGDialog",ba=aa+"-input-checkbox",ca=aa+"-label-checkbox",da=aa+"-iconList",ea=da+"-item",fa=da+"-link",ga=da+"-icon",ha=da+"-label",ia=S+"-controls",ja=ia+"-item",ka=ja+"--",la=ia+"-cell",ma=la+"--label",na=la+"--remove",oa=ia+"Checkbox",pa=oa+"Label",qa=ia+"Icon",ra=ia+"Label",sa=ia+"Container",ta="."+sa,ua="a-IG-reportSummary",va=ua+"Container",wa=ua+"-item",xa=ua+"-item--",ya=ua+"-label",za=ua+"-icon",Aa=ua+"-count",Ba=ua+"-value",Ca=S+"-button",Da=Ca+"--controls",Ea=Ca+"--remove",Fa="icon-ig-",Ga=S+"-gridView",Ha=S+"-iconView",Ia=S+"-detailView",Ja=S+"-chartView",Ka=S+"-recordView",La="a-IRR-sortWidget",Ma=La+"-actions",Na=Ma+"-item",Oa=La+"-button",Pa=La+"-search",Qa=La+"-searchLabel",Ra=La+"-searchField",Sa=La+"-rows",Ta=La+"-row",Ua="u-Form",Va=Ua+"--labelsAbove",Wa=Ua+"--stretchInputs",Xa=Ua+"-fieldContainer",Ya="."+Xa,Za=Ua+"-label",$a="text_field",_a="selectlist",ab="textarea",bb="a-Combobox",cb="a-Combobox-wrapper",db="hasDatepicker",eb="a-Button",fb=eb+"--noUI",gb=eb+"-label",hb=eb+"--noLabel",ib=eb+"--withIcon",jb=eb+"--calendar",kb=eb+"--iconTextButton",lb="a-Icon",mb=lb+"--left",nb=lb+"--right",ob="icon-remove",pb="a-MediaBlock",qb=pb+"-graphic",rb=pb+"-content",sb="is-active",tb="is-selected",ub="is-checked",vb="is-error",wb="js-colCheckbox",xb="js-menuButton",yb="."+wb,zb="u-VisuallyHidden",Ab="u-textLower",Bb="u-textUpper",Cb="has-button",Db="aria-expanded",Eb="aria-hidden",Fb="aria-describedby",Gb="aria-label",Hb="aria-labelledby",Ib="<span class='ro-checkbox &\"enabledClass\".'></span><span class='u-vh'>&\"enabledText\".</span>",Jb="left",Kb="right",Lb="text",Mb="select",Nb="colorpicker",Ob="textarea",Pb="checkbox",Qb="radios",Rb="iconList",Sb="row",Tb="column",Ub="complex",Vb="start",Wb="center",Xb="destroy",Yb="delete",Zb="refresh",$b="show",_b="hide",ac="expand",bc="expanded",cc="collapsed",dc="required",ec="disabled",fc="checked",gc="grid",hc="icon",ic="detail",jc="chart",kc="groupby",lc="savedReport",mc="inactiveSettings",nc="invalidSettings",oc="primary",pc="alternative",qc="private",rc="public",sc="named",tc="columns",uc="filter",vc="highlight",wc="flashback",xc="sort",yc="aggregate",zc="controlBreak",Ac="editReport",Bc="saveAsReport",Cc="download",Dc="subscription",Ec="asc",Fc="desc",Gc="first",Hc="last",Ic="none",Jc="scroll",Kc="set",Lc="progressive",Mc="i",Nc="u",Oc="d",Pc="region",Qc="page",Rc="~",Sc="Y",Tc="N",Uc="_meta",Vc="_vc",Wc="plain",Xc="label",Yc="error",Zc="valid",$c="class",_c="value",ad="action",bd="toggle",cd="radioGroup",dd={type:"separator"},ed="BUTTON",fd="MENU",gd="all",hd="past",id="future",jd="EQ",kd="NEQ",ld="LT",md="LTE",nd="GT",od="GTE",pd="LIKE",qd="NLIKE",rd="N",sd="NN",td="C",ud="NC",vd="IN",wd="NIN",xd=";",yd="BETWEEN",zd="NBETWEEN",Ad="LAST",Bd="NLAST",Cd="NEXT",Dd="NNEXT",Ed="REGEXP",Fd="S",Gd="NS",Hd="OTEXT",Id="CASE_INSENSITIVE",Jd="MI",Kd="H",Ld="D",Md="W",Nd="M",Od="Y",Pd="MIXED",Qd="VARCHAR2",Rd="NUMBER",Sd="DATE",Td="CLOB",Ud="TIMESTAMP",Vd="TIMESTAMP_TZ",Wd="TIMESTAMP_LTZ",Xd="area",Yd="bar",Zd="bubble",$d="donut",_d="funnel",ae="line",be="lineWithArea",ce="pie",de="polar",ee="radar",fe="range",ge="scatter",he="stock",ie="vertical",je="horizontal",ke="on",le="off",me="auto",ne="cartesian",oe=42,pe="VALUE_REQUIRED",qe="INVALID_VALUE",re="SELECT",se=[{value:"#FFFF99",label:"APEX.IG.COLOR_YELLOW"},{value:"#99FF99",label:"APEX.IG.COLOR_GREEN"},{value:"#99CCFF",label:"APEX.IG.COLOR_BLUE"},{value:"#FFDD44",label:"APEX.IG.COLOR_ORANGE"},{value:"#FF7755",label:"APEX.IG.COLOR_RED"}],te={EQ:"EQUALS",NEQ:"NOT_EQUALS",LT:"LESS_THAN",LTE:"LESS_THAN_OR_EQUALS",GT:"GREATER_THAN",GTE:"GREATER_THAN_OR_EQUALS",LIKE:"LIKE",NLIKE:"NOT_LIKE",N:"IS_NULL",NN:"IS_NOT_NULL",C:"CONTAINS",NC:"DOES_NOT_CONTAIN",IN:"IN",NIN:"NOT_IN",BETWEEN:"BETWEEN",NBETWEEN:"NOT_BETWEEN",LAST:"IN_THE_LAST",NLAST:"NOT_IN_THE_LAST",NEXT:"IN_THE_NEXT",NNEXT:"NOT_IN_THE_NEXT",REGEXP:"MATCHES_REGULAR_EXPRESSION",S:"STARTS_WITH",NS:"DOES_NOT_START_WITH",OTEXT:"ORACLE_TEXT"},ue={SUM:"SUM",AVG:"AVG",CNT:"COUNT",CNT_DIST:"COUNT_DISTINCT",APPR_CNT_DIST:"APPROX_COUNT_DISTINCT",MIN:"MIN",MAX:"MAX",MEDIAN:"MEDIAN",LISTAGG:"LISTAGG"},ve={filter:n("FILTER"),chart:n("CHART"),groupby:n("GROUP_BY"),controlBreak:n("CONTROL_BREAK"),highlight:n("HIGHLIGHT"),aggregate:n("AGGREGATE"),flashback:n("FLASHBACK")},we={MI:"MINUTE",H:"HOUR",D:"DAY",W:"WEEK",M:"MONTH",Y:"YEAR"},xe={LABEL:"LABEL",VALUE:"VALUE",X:"X",Y:"Y",Z:"Z",TARGET:"TARGET",HIGH:"HIGH",LOW:"LOW"},ye=([{value:"DD-MON-RR",label:"12-JAN-16"},{value:"DD-MON-YYYY",label:"12-JAN-2016"},{value:"DD-MON",label:"12-JAN"},{value:"RR-MON-DD",label:"16-JAN-12"},{value:"YYYY-MM-DD",label:"2016-01-12"},{value:"fmDay, fmDD fmMonth, YYYY",label:m("APEX.IG_FORMAT_SAMPLE_1")},{value:"DD-MON-YYYY HH24:MI",label:"12-JAN-2016 14:30"},{value:"DD-MON-YYYY HH24:MI:SS",label:"12-JAN-2016 14:30:00"},{value:"DD-MON-YYYY HH:MIPM",label:"12-JAN-2016 02:30PM"},{value:"Month",label:m("APEX.IG_FORMAT_SAMPLE_2")},{value:"DD-MON-YYYY HH24:MI",label:"12-JAN-2016 14:30"},{value:"DD-MON-YYYY HH24.MI.SSXFF",label:"12-JAN-2016 14.30.12.867530900"},{value:"DD-MON-YYYY HH:MI:SSXFF PM",label:"12-JAN-2016 02:30:12.867530900 PM"},{value:"DD-MON-YYYY HH24:MI TZR",label:"12-JAN-2016 14:30 -07:00"},{value:"DD-MON-YYYY HH24.MI.SSXFF TZR",label:"12-JAN-2016 14.30.12.867530900 -07:00"},{value:"DD-MON-YYYY HH.MI.SSXFF PM TZR",label:"12-JAN-2016 02.30.12.867530900 PM -07:00"},{value:"SINCE",label:m("APEX.IG_FORMAT_SAMPLE_3")},{value:"SINCE_SHORT",label:m("APEX.IG_FORMAT_SAMPLE_4")}],[{value:"$1,002.54",label:{style:"currency",currency:"USD",currencyDisplay:"symbol"}},{value:"1,002.54",label:{style:"decimal",maximumFractionDigits:2}},{value:"1,002.5400",label:{style:"decimal",maximumFractionDigits:4}},{value:"1,002",label:{style:"decimal",maximumFractionDigits:0}},{value:"1,002.54-",label:{style:"decimal",maximumFractionDigits:2}},{value:"-1,002.54",label:{style:"decimal",maximumFractionDigits:2}},{value:"<1,002.54>",label:{style:"decimal",maximumFractionDigits:2}}]),ze=[{value:"DD-MON-RR",label:{pattern:"dd-MMM-yy"}},{value:"DD-MON-YYYY",label:{pattern:"dd-MMM-yyyy"}},{value:"DD-MON",label:{pattern:"dd-MMM"}},{value:"RR-MON-DD",label:{pattern:"yy-MMM-dd"}},{value:"YYYY-MM-DD",label:{pattern:"yyyy-MMM-dd"}},{value:"fmDay, fmDD fmMonth, YYYY",label:{formatType:"date",dateFormat:"full"}},{value:"DD-MON-YYYY HH24:MI",label:{pattern:"dd-MMM-yyyy HH:mm"}},{value:"DD-MON-YYYY HH24:MI:SS",label:{pattern:"dd-MMM-yyyy HH:mm:ss"}},{value:"DD-MON-YYYY HH:MIPM",label:{pattern:"dd-MMM-yyyy hh:mm a"}},{value:"Month",label:{month:"long"}},{value:"DD-MON-YYYY HH24.MI.SSXFF",label:{pattern:"dd-MMM-yyyy HH:mm:ss"}},{value:"DD-MON-YYYY HH:MI:SSXFF PM",label:{pattern:"dd-MMM-yyyy hh:mm:ss a"}},{value:"DD-MON-YYYY HH24:MI TZR",label:{pattern:"dd-MMM-yyyy HH:mm"}},{value:"DD-MON-YYYY HH24.MI.SSXFF TZR",label:{pattern:"dd-MMM-yyyy HH:mm:ss"}},{value:"DD-MON-YYYY HH.MI.SSXFF PM TZR",label:{pattern:"dd-MMM-yyyy hh:mm:ss a"}}],Ae="selectionChange",Be="viewChange",Ce="reportChange",De="reportSettingsChange",Ee="viewModelCreate",Fe="save",Ge="modeChange",He=[{id:"search",groupTogether:!0,controls:[{type:fd,id:"column_filter_button",labelKey:"APEX.IG.SELECT_COLUMNS_TO_SEARCH",icon:"icon-search",iconOnly:!0,menu:{items:[{type:bd,action:"search-case-sensitive"},dd,{type:cd,action:"filter-column"}]}},{type:"TEXT",id:"search_field",enterAction:"search"},{type:ed,action:"search"}]},{id:"reports",controls:[{type:"SELECT",action:"change-report"}]},{id:"views",controls:[{type:"RADIO_GROUP",labelKey:"APEX.IG.VIEW",action:"change-view"}]},{id:"actions1",controls:[{type:fd,id:"actions_button",labelKey:"APEX.IG.ACTIONS",menu:{items:[{type:ad,action:"show-columns-dialog"},dd,{type:ad,action:"show-filter-dialog"},{type:"subMenu",id:"data_submenu",labelKey:"APEX.IG.DATA",icon:"icon-ig-data",menu:{items:[{type:ad,action:"show-sort-dialog"},{type:ad,action:"show-aggregate-dialog"},{type:ad,action:"refresh"},{type:ad,action:"show-flashback-dialog"}]}},{type:"subMenu",id:"format_submenu",labelKey:"APEX.IG.FORMAT",icon:"icon-ig-format",menu:{items:[{type:ad,action:"show-control-break-dialog"},{type:ad,action:"show-highlight-dialog"},{type:bd,action:"stretch-columns"},{type:"subMenu",labelKey:"APEX.IG.ROWS_PER_PAGE",hide:!0,id:"rows",icon:"icon-ig-rows",menu:{items:[{type:cd,action:"change-rows-per-page"}]}}]}},{type:"subMenu",id:"selection_submenu",labelKey:"APEX.IG.SELECTION",icon:"icon-ig-selection",menu:{items:[{type:bd,action:"selection-mode"},dd,{type:ad,action:"selection-copy",accelerator:"Ctrl+C"},dd]}},dd,{type:ad,action:"chart-view"},dd,{type:"subMenu",id:"save_report_submenu",labelKey:"APEX.IG.REPORT",icon:"icon-irr-saved-report",menu:{items:[{type:ad,action:"save-report"},{type:ad,action:"show-save-report-as-dialog"},{type:ad,action:"show-edit-report-dialog"},dd,{type:ad,action:"delete-report"},dd,{type:ad,action:"reset-report"}]}},dd,{type:ad,action:"show-download-dialog"},dd,{type:ad,action:"show-help-dialog"}]}}]},{id:"actions2",controls:[{type:"TOGGLE",action:"edit"},{type:ed,hot:!0,action:"save"}]},{id:"actions3",controls:[{type:ed,action:"selection-add-row"}]},{id:"actions4",align:"end",controls:[{type:ed,action:"reset-report",labelKey:"APEX.IG.RESET",iconBeforeLabel:!0}]}];He.toolbarFind=function(a){function b(c){var d,e;for(d=0;d<c.length;d++){if(e=c[d],e.id===a||e.action===a)return e;if("subMenu"===e.type&&(e=b(e.menu.items)))return e}return null}var c,d,e,f,g,h=this;for(c=0;c<h.length;c++){if(h[c].id===a)return h[c];if(e=h[c].controls)for(d=0;d<e.length;d++){if(f=e[d],f.id===a||f.action===a)return f;if(f.menu&&(g=b(f.menu.items)))return g}}return null};var Ie={_allowInteraction:function(b){return a(b.target).closest("."+La).length>0||this._super(b)}};a.ui.dialog&&(a.widget("ui.dialog",a.ui.dialog,Ie),a.widget("apex.popup",a.apex.popup,Ie)),a.widget("apex.interactiveGrid",{version:"18.1",widgetEventPrefix:"interactivegrid",options:{config:{toolbarData:null,modelInstanceId:null,initActions:null,columns:[],ajaxColumns:"",regionId:"",regionStaticId:"",columnGroups:[],ajaxIdentifier:"",itemsToSubmit:"",editable:!1,submitSelectedRows:!1,parentRegionStaticId:null,lazyLoading:!1,filter:{row:!0,complex:!0,isRequired:!1,maxRowCount:null,oracleText:!1},appearance:{showNullValue:"",useFixedRowHeight:!0},pagination:{type:Jc,showTotalRowCount:!1},text:{noDataFound:n("NO_DATA_FOUND"),moreDataFound:"",addRowButton:n("ADD_ROW"),help:""},toolbar:{reset:!0,save:!0,columnSelection:!0,searchField:!0,savedReports:!0,editing:!0,addRow:!0,actionMenu:!0},reportSettingsArea:{disabled:!1},features:{saveReport:{publicReportCs:"",isDeveloper:!1,authorizations:[]},download:!1,filter:!0,flashback:!0},initialSelection:!0,headingFixedTo:Qc,maxHeight:null,views:{icon:!1,detail:!1,grid:{disabled:!1,features:{reorderColumns:!0,resizeColumns:!0,sort:!0,stretchColumns:null,highlight:!0,controlBreak:!0,aggregate:!0,changeRowsPerPage:!0,cellRangeActions:!0,singleRowView:!0,gridView:!0,rowSelector:{multiSelect:!0,selectAll:!0,hideControl:!1}}},chart:{disabled:!1,features:{}}},defaultModelOptions:{},defaultGridViewOptions:{multiple:!1,selectAll:!0,hideDeletedRows:!1,columnSortMultiple:!0,rowHeader:Wc,stickyFooter:!0},defaultIconViewOptions:{iconListOptions:{},hideDeletedRows:!1,footer:!0},defaultDetailViewOptions:{hideDeletedRows:!1,footer:!0},defaultSingleRowOptions:{alwaysEdit:!1,skipDeletedRecords:!1,showExcludeNullValues:!0,showExcludeHiddenFields:!0}},savedReports:[],data:null,selectionChange:null,viewChange:null,reportChange:null,reportSettingsChange:null,viewModelCreate:null,save:null,modeChange:null},_create:function(){var d,e=this,h=this.element,i=this.options,k=a(T).length;if(!i.config)throw new Error("Missing required config option.");if(!i.savedReports)throw new Error("Missing required saved reports configuration.");if(this.idPrefix=h[0].id||"ig"+(k+1),this.viewsImpl={},this.columnMap={},this.baseModelColumns={},this.primaryKeyColumns=[],this.parentColumnNames=[],this.parentItemValues=[],this.parentModel="",this.parentRecordId=null,this.editMode=!1,this.currentSavedReportIdx="",this.toolbar$=null,this.currentFilterColumnId=null,this.searchCaseSensitive=!1,this.ignoreResizeHandler=!1,this.actions=f.createContext("InteractiveGrid",h[0]),h.addClass(S),this._defaultIGConfig(),d=i.config,d.maxHeight&&h.height(d.maxHeight).css("overflow","hidden"),d.toolbar&&!d.toolbarData&&(d.toolbarData=o()),this._defaultColumns(),this._createBaseColumnMap(),this._defaultSavedReports(),this._registerIGViews(),this._renderIG(),this._addActions(this.actions),d.initActions&&d.initActions(this.actions),d.toolbar?(this._initToolbar(),this._updateToolbarElements()):h.addClass(W),this._forEachView(function(a,b){b.init(e)}),this._updateActions(),this.editableView=null,d.editable&&(this._forEachView(function(a,b){b.supports.edit&&(null===e.editableView?e.editableView=a:c.warn("Extra editable view ignored: "+a))}),null===this.editableView))throw new Error("No editable view for editable Interactive Grid");this.resize(),g.create(d.regionStaticId,{type:"InteractiveGrid",parentRegionId:d.parentRegionStaticId,widgetName:"interactiveGrid",refresh:function(){e.refresh()},focus:function(){e.focus()},widget:function(){return e.element},gotoError:function(a){e.gotoCell(null,a.record,a.column)},getSessionState:function(a){var b,c,d,f={beforeAsync:function(){var a=e._currentViewImpl();a.supports.edit&&a.lockActive&&a.lockActive()},afterAsync:function(){var a=e._currentViewImpl();a.supports.edit&&a.unlockActive&&a.unlockActive()}},g=[],h=[],i=e._currentViewImpl().getActiveRecordId();if(a)for(b=0;b<a.length;b++)c=e._getColumnByStaticId(a[b]),c?i&&h.push({n:c.name,v:j(a[b]).getValue()}):g.push(a[b]);return f.pageItems=g,h.length>0&&(d=e._currentViewImpl().model.getRecordMetadata(i),f.region=e._defaultAjaxRegionData({setSessionState:{values:h,"protected":d["protected"],salt:d.salt}})),f},alternateLoadingIndicator:function(a){var c,d=e._currentViewImpl();return d.internalIdentifier===gc&&!d.singleRowMode&&(c=d.view$.grid("getActiveCellFromColumnItem",a))?b.showSpinner(c,{spinnerClass:"u-Processing--cellRefresh"}):null}}),this._view(this._view(),{initialData:i.data,fetchData:d.lazyLoading}),d.headingFixedTo===Qc&&a(V,h).stickyWidget({stickToEnd:!0,bottom:function(){return h.offset().top+a(Y,h).outerHeight()-e._currentViewImpl().footerHeight()},toggleWidth:!0}),a("#"+d.regionStaticId).hasClass("resize")?h.addClass("resize").on("resize",function(){e.resize()}):l.onElementResize(h[0],function(){e.ignoreResizeHandler||e.resize()}),l.onVisibilityChange(h[0],function(a){a&&(l.updateResizeSensors(h[0]),e.actions.update("search"),e.resize())}),d.parentRegionStaticId&&(this._forEachView(function(a,b){b.view$&&b.setNoDataMessage(n("SELECT_1_ROW_IN_MASTER"))}),a("#"+d.parentRegionStaticId+"_ig").on("interactivegridselectionchange.ig",b.debounce(function(a,b){var c=b.selectedRecords[0];e.parentModel=b.model.modelId(),1===b.selectedRecords.length?e._setModelInstance(b.model.getRecordId(c),c):e._setModelInstance(null)},300)))},_setOption:function(b,c){var d=!1,e=this.options;"config"===b&&(c.modelInstanceId!==e.config.modelInstanceId&&(d=!0),c=a.extend(!0,e.config,c)),this._super(b,c),d&&this._setModelInstance(e.config.modelInstanceId)},_destroy:function(){var a=this.options.config;l.offElementResize(this.element[0]),this.element.removeClass(S+" "+W).empty(),f.removeContext("InteractiveGrid",this.element[0]),this._destroyAllModels(),this._forEachView(function(a,b){b.destroy()}),g.destroy(a.regionStaticId)},_isCurrentlyEditable:function(){var a=this.options.config,b=this._currentReportSettings().flashback,c=b&&b.isEnabled;return a.editable&&!c},_setModelInstance:function(a,b,c){var d,e=this,f=!0,g=this.options.config,h=g.text.noDataFound;if(this.parentRecordId=null,g.modelInstanceId=a,null===a&&(h=n("SELECT_1_ROW_IN_MASTER"),f=!1),g.parentRegionStaticId&&(this.parentRecordId=g.modelInstanceId,this.parentItemValues=[],b&&c))for(d=0;d<this.parentColumnNames.length;d++)this.parentItemValues.push({n:this.parentColumnNames[d],v:b.getValue(c,this.parentColumnNames[d])});this._forEachView(function(a,b){b.view$&&(b.setNoDataMessage(h),e._setModel({viewImpl:b,updateComponent:!0,fetchData:f}))})},_setInitialSelection:function(a){var b,c,d,e=this.options.config;b=this._currentViewImpl(),e.initialSelection&&b.supports.selection&&(d=b.getSelectedRecords(),d&&0!==d.length||(c=b.model.recordAt(a),c&&b.setSelectedRecords([c])))},_selectionChange:function(a){var b=this._currentViewImpl(),c=b.getSelectedRecords()||[];this._updateSelectionActions(),this._trigger(Ae,a,{selectedRecords:c,model:b.model})},_pageChange:function(a){var b=this;setTimeout(function(){b._setInitialSelection(a.offset)},1)},_registerIGViews:function(){var a,b,c,d=this.options.config;for(a=0;a<Je.length;a++)b=Je[a],c=d.views[b.internalIdentifier],c&&!c.disabled&&this._registerView(b)},_registerView:function(b){var c=this,d=a.extend(!0,{title:"",internalIdentifier:"",cssClass:"",icon:"",supports:{edit:!1,selection:!0,cellSelection:!1,highlight:!1,controlBreak:!1,aggregation:!1,singleRowView:!1,configurableColumns:!1,filter:!0,sort:!0,changeRowsPerPage:!0,download:!1},isConfigured:function(){return!!c._currentReportSettings().views[this.internalIdentifier]},initDialog:null,openDialog:function(){!this.dialog$&&this.initDialog&&this.initDialog(c),this.dialog$.dialog("open")},setColumnConfig:function(){},init:function(){},updateActions:function(){},initView:function(){},viewChanged:function(){},setReportOptions:function(){},destroyView:function(){},destroy:function(){},getSelectedRecords:function(){return[]},setSelectedRecords:function(){},getActiveRecordId:function(){return null},getContextRecord:function(){return[]},gotoCell:null,selectCells:null,canCopy2Clipboard:function(){return!1},setModelName:function(){},setOption:function(){},setEditMode:function(a){},setNoDataMessage:function(a){},focus:function(){},refreshColumns:function(){},footerHeight:function(){return 0},refresh:function(){},resize:function(){},show:function(){this.view$.show()},hide:function(){this.view$.hide()}},b);d.model=null,d.modelName=null,d.modelColumns=null,d.view$=null,d.elementId=d.internalIdentifier+Vc,this.viewsImpl[d.internalIdentifier]=d},_forEachView:function(a){var b,c;for(b in this.viewsImpl)this.viewsImpl.hasOwnProperty(b)&&(c=this.viewsImpl[b],a(b,c))},_getPaginationConfig:function(b,c){var d={},e=b.pagination;return c&&b[c].pagination&&(d=a.extend({},b[c].pagination)),d.scroll=e.type===Ic||e.type===Jc,d.hasOwnProperty("showPageLinks")||(d.showPageLinks=e.type===Kc&&e.showTotalRowCount),d.hasOwnProperty("firstAndLastButtons")||(d.firstAndLastButtons=e.type===Kc&&e.showTotalRowCount),d.hasOwnProperty("showRange")||(d.showRange=!0),d},_renderDialogContent:function(a){var c,d=this,e=b.htmlBuilder();c=function(a,b){d._renderColumnItem(e,a,b)},e.markup("<div").attr($c,"a-GV-columnItemContainer u-vh").attr(Eb,!0).markup(">"),a(c,e),e.markup("</div>"),this.element.append(e.toString())},_createDialog:function(b,c,d){var e,f,g,h,i,j,k,l,m=a.extend(!0,{width:600,height:380,labelAlignment:Vb,formCssClasses:Va+" "+Wa,useSplitter:!0,splitterPosition:280,persistSplitter:b,noDataMessage:n("NO_DATA_FOUND"),modelOptions:{shape:"record",editable:!0,onlyMarkForDelete:!1,identityField:"id"}},d);b+="Dialog",i=b+"$",j=this._getId(b.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})),h=m.dialogHelp,h||(m.dialogHelp=h={}),h.helpTextKey="APEX.IG.HELP."+(h.helpTextKey||m.titleKey),h.titleKey=h.titleKey?"APEX.IG.HELP."+h.titleKey:h.helpTextKey+"_TITLE",m.titleKey="APEX.IG."+m.titleKey,m.modelName=this._getId(m.modelName||j),f=m.modelOptions.fields;for(e in f)f.hasOwnProperty(e)&&(g=f[e],g.label&&(g.label=n(g.label),g.heading||"table"!==m.modelOptions.shape||(g.heading=g.label)),g.elementId&&(g.elementId=this._getId(g.elementId)));return d.checkboxColumn&&(l=m.init,m.init=function(b,c,d){var e="isEnabled";c.on("click",yb,function(){var d=a(this),f=c.grid("getRecords",[d.parent()])[0],g=!b.getValue(f,e);b.setValue(f,"enabledClass",g?ub:""),b.setValue(f,"enabledText",n(g?"ENABLED":"DISABLED")),b.setValue(f,e,g)}).on("keydown",yb,function(b){b.which===a.ui.keyCode.SPACE&&a(this).trigger("click")}),q(d,e),l.call(this,b,c,d)},f.enabledClass={"volatile":!0,canHide:!1,hidden:!0,seq:0,defaultValue:ub},f.enabledText={"volatile":!0,canHide:!1,hidden:!0,seq:0,defaultValue:n("ENABLED")}),this._renderDialogContent(c),k=a.apex.recordView.createModelEditDialog(j,m),d.viewDialog||(this[i]=k),k},_renderColumnItem:function(a,b,c){switch(a.markup("<div").attr($c,"a-GV-columnItem").markup(">"),c.id&&(c.id=this._getId(c.id)),b){case Pb:F(a,c);break;case Mb:L(a,c);break;case Lb:A(a,c);break;case Ob:G(a,c);break;case Qb:K(a,c);break;case Nb:c.colorMenu&&(c.colorMenuId=this._getId("color_menu")),E(a,c);break;case Rb:B(a,c)}a.markup("</div>")},_renderSaveReportSettingsDialog:function(){var b,c=[],d=[],e=this.options.config,f=e.features.saveReport.isDeveloper,g=this;f&&(c.push({value:oc,label:n("PRIMARY")}),c.push({value:pc,label:n("ALTERNATIVE")})),c.push({value:qc,label:n("SAVED_REPORT_PRIVATE")}),e.features.saveReport.publicReportCs&&c.push({value:rc,label:n("SAVED_REPORT_PUBLIC")}),x(e.features.saveReport.authorizations,d,"r","d","",n(re)),this._createDialog("reportSettings",function(a){a(Mb,{id:"SRD_TYPE",options:c}),a(Lb,{id:"SRD_NAME"}),a(Mb,{id:"SRD_AUTHORIZATION",options:d})},{height:350,titleKey:"REPORT",modelName:"savedReport",defaultButton:!0,modelOptions:{fields:{id:{canHide:!1,hidden:!0,seq:0},type:{label:"TYPE",elementId:"SRD_TYPE",seq:10,defaultValue:sc},name:{label:"NAME",elementId:"SRD_NAME",seq:20},authorizationId:{label:"AUTHORIZATION",elementId:"SRD_AUTHORIZATION",seq:30}}},load:function(c){var d=g.reportSettingsDialog$.dialog("option","saveAs"),e=a.extend({id:"",type:"",name:"",authorizationId:""},g._currentReportSettings());return d?g.reportSettingsDialog$.dialog("option","title",n("REPORT_SAVE_AS")):g.reportSettingsDialog$.dialog("option","title",n("REPORT_EDIT")),b=e.type,d&&(e.name="",f?e.type=qc:a.inArray(e.type,[oc,pc])>-1&&(e.type=qc)),c.setData(e),g._report()},init:function(a,c,d){function e(){var a,c=g.reportSettingsDialog$.dialog("option","saveAs");switch(c&&b===oc?f.find("option[value="+oc+"]").prop(ec,!0):f.find("option[value="+oc+"]").prop(ec,!1),a=f.val(),f.prop(ec,!1),P(h,!0),N(i),a){case oc:b===oc&&f.prop(ec,!0),P(h,!1);break;case pc:M(i);break;case qc:break;case rc:}}var f=g._getElement("SRD_TYPE"),h=g._getElement("SRD_NAME"),i=g._getElement("SRD_AUTHORIZATION");f.change(e),d.on("apexbeginrecordedit",e)},store:function(a){var b=g.reportSettingsDialog$.dialog("option","saveAs"),c=a.getRecord();b?(c.baseReportId=c.id,g.addReport(c)):g.updateReport(c.id,c),g._updateReportSettingsActions()}})},_renderDownloadDialog:function(){var b=this,c=n("MAILADDRESSES_COMMASEP"),d=this.options.config.features.download,e=[];d&&d.formats.indexOf("CSV")!==-1&&e.push({value:"CSV",label:n("FORMAT_CSV"),iconCssClasses:"icon-ig-dl-xls"}),d&&d.formats.indexOf("HTML")!==-1&&e.push({value:"HTML",
label:n("FORMAT_HTML"),iconCssClasses:"icon-ig-dl-html"}),this._createDialog("download",function(a){a(Rb,{id:"DL_DOWNLOAD_FORMAT",options:e}),a(Pb,{id:"DL_SEND_AS_EMAIL",options:[{value:Sc}]}),a(Lb,{id:"DL_EMAIL_TO",placeholder:c}),a(Lb,{id:"DL_EMAIL_CC",placeholder:c}),a(Lb,{id:"DL_EMAIL_BCC",placeholder:c}),a(Lb,{id:"DL_EMAIL_SUBJECT"}),a(Ob,{id:"DL_EMAIL_BODY"})},{height:400,titleKey:"DOWNLOAD",modelOptions:{fields:{id:{canHide:!1,hidden:!0,seq:0},format:{label:"DOWNLOAD_FORMAT",elementId:"DL_DOWNLOAD_FORMAT",seq:10},sendOrDownload:{label:"SEND_AS_EMAIL",elementId:"DL_SEND_AS_EMAIL",seq:15},emailTo:{label:"EMAIL_TO",elementId:"DL_EMAIL_TO",seq:20},emailCc:{label:"EMAIL_CC",elementId:"DL_EMAIL_CC",seq:30},emailBcc:{label:"EMAIL_BCC",elementId:"DL_EMAIL_BCC",seq:40},emailSubject:{label:"EMAIL_SUBJECT",elementId:"DL_EMAIL_SUBJECT",seq:50},emailBody:{label:"EMAIL_BODY",elementId:"DL_EMAIL_BODY",seq:60},sendEmail:{canHide:!1,hidden:!0,seq:0}}},load:function(a){a.setData({id:0,format:"CSV",sendEmail:"N"})},init:function(c,e,f){function g(){j.prop(fc)===!0?(M([k,l,o,p,q]),P([k,p],!0),s[h].text=n("SEND_AS_EMAIL"),r.dialog("option","buttons",s),null!==f.recordView("getRecord")&&c.setValue(f.recordView("getRecord"),"sendEmail","Y")):(N([k,l,o,p,q]),P([k,p],!1),s[h].text=n("DOWNLOAD"),r.dialog("option","buttons",s),null!==f.recordView("getRecord")&&c.setValue(f.recordView("getRecord"),"sendEmail","N"))}var h,i,j=b._getElement("DL_SEND_AS_EMAIL"),k=b._getElement("DL_EMAIL_TO"),l=b._getElement("DL_EMAIL_CC"),o=b._getElement("DL_EMAIL_BCC"),p=b._getElement("DL_EMAIL_SUBJECT"),q=b._getElement("DL_EMAIL_BODY"),r=a(this),s=r.dialog("option","buttons");for(i=0;i<s.length;i++)if(s[i].text===m("APEX.DIALOG.SAVE")){h=i;break}f.on("apexbeginrecordedit",function(){C(b._getId("DL_DOWNLOAD_FORMAT"),d.formats[0]),g(),b.options.config.features.download.email===!0?j.change(g):N(j)})},store:function(a){var c,d=a.getRecord();c={format:d.format},"Y"===d.sendEmail&&(c.email={to:d.emailTo,subject:d.emailSubject},d.emailCc&&""!==d.emailCc&&(c.email.cc=d.emailCc),d.emailBcc&&""!==d.emailBcc&&(c.email.bcc=d.emailBcc),d.emailBody&&""!==d.emailBody&&(c.email.body=d.emailBody)),b._downloadReport(c)}})},_columnFilterModelFields:function(a){var b=a+"_";return{type:{label:b+"TYPE",elementId:b+"TYPE",seq:100,canHide:!0,hidden:!0,defaultValue:Tb},columnId:{label:"COLUMN",elementId:b+"COLUMN",seq:120,fieldColSpan:6,canHide:!0,hidden:!0},operator:{label:"OPERATOR",elementId:b+"OPERATOR",seq:130,fieldColSpan:6,canHide:!0,hidden:!0,defaultValue:jd},value:{label:"VALUE",elementId:b+"VALUE",seq:140,canHide:!0,hidden:!0},dateRangeValue:{label:"VALUE",elementId:b+"DATE_RANGE_VALUE",seq:141,fieldColSpan:6,canHide:!0,hidden:!0},dateRangeUnit:{label:"UNIT",elementId:b+"DATE_RANGE_UNIT",seq:142,fieldColSpan:6,canHide:!0,hidden:!0},isCaseSensitive:{label:"CASE_SENSITIVE",elementId:b+"CASE_SENSITIVE",seq:150,canHide:!0,hidden:!0,defaultValue:"N"},between:{label:"VALUE",elementId:b+"BETWEEN",seq:160,fieldColSpan:6,canHide:!0,hidden:!0},and:{label:"AND",elementId:b+"AND",seq:170,fieldColSpan:6,canHide:!0,hidden:!0},expression:{label:"EXPRESSION",elementId:b+"EXPRESSION",seq:180,canHide:!0,hidden:!0},hiddenValue:{seq:999,canHide:!0,hidden:!0},hiddenBetween:{seq:999,canHide:!0,hidden:!0},hiddenAnd:{seq:999,canHide:!0,hidden:!0}}},_renderSortControls:function(a,b){a(Mb,{id:b+"DIRECTION",required:!0,options:[{value:Ec,label:n("ASCENDING")},{value:Fc,label:n("DESCENDING")}]}),a(Mb,{id:b+"NULLS",required:!0,options:[{value:Gc,label:n("FIRST")},{value:Hc,label:n("LAST")}]})},_columnFilterDialogControls:function(a,b){var c,d,e=[],f=this.options.config.columns,g=b+"_";for(c=0;c<f.length;c++)d=f[c],("FD"===b&&this._isColumnFilterable(d.id)||"HD"===b&&!this._getColumn(d.id).specialType&&!this._getColumn(d.id).isHidden)&&e.push({value:d.id,label:this._getColumnLabel(d.id)});a(Mb,{id:g+"TYPE",options:[{value:Sb,label:n("ROW")},{value:Tb,label:n("COLUMN")}]}),a(Mb,{id:g+"COLUMN",options:e}),a(Mb,{id:g+"OPERATOR",options:[]}),a(Lb,{maxChars:100,id:g+"VALUE"}),a(Lb,{maxChars:20,id:g+"DATE_RANGE_VALUE"}),a(Mb,{id:g+"DATE_RANGE_UNIT",options:[{value:Jd,label:n("MINUTES")},{value:Kd,label:n("HOURS")},{value:Ld,label:n("DAYS")},{value:Md,label:n("WEEKS")},{value:Nd,label:n("MONTHS")},{value:Od,label:n("YEARS")}]}),a(Pb,{id:g+"CASE_SENSITIVE",value:Sc}),a(Lb,{maxChars:100,id:g+"BETWEEN"}),a(Lb,{maxChars:100,id:g+"AND"}),a(Lb,{maxChars:40,id:g+"NAME"}),a(Ob,{id:g+"EXPRESSION",toolbar:!0})},_columnFilterInitActions:function(b,c,d,f,g){function h(){var a;x&&null!==d.recordView("getRecord")&&(a=v._getSettingLabel(uc,d.recordView("getRecord")),F.val(a).change())}function i(a){a.hasClass(bb)&&a.combobox(Xb),a.hasClass(db)&&(a.parent().hasClass(cb)&&a.unwrap(),a.datepicker(Xb)),a.attr("placeholder","")}function j(){function c(b,c,d){var f,g,h,i,j,k=v._getColumnFormatMask(r.id);f=k.toLowerCase().indexOf("hh")!==-1,f&&(h=(new Date).getHours(),g=k.indexOf("HH")!==-1,i="",g||(i=h>11?"PM":"AM",0===h&&(h=12),h>12&&(h-=12))),a(b).hasClass(cb)||a(b).wrap(a("<span class='"+cb+"'></span>")),f?(apex.widget.datepicker(b,{buttonText:"<span class='"+lb+" icon-calendar'></span><span class='"+zb+"'>"+e.formatMessage("APEX.DATEPICKER.ICON_TEXT","")+"</span>",showTime:!0,showOn:"button",defaultDate:s(d),time24h:g,defHour:("00"+h).substr(-2),defMinute:"00",defAmpm:i},k,apex.locale.getLanguage()),j=!1,d&&null!==d.match(/^\d{14}/)&&(j=s(d),j&&!isNaN(j.getTime())&&apex.jQuery.timepicker.setCanonicalDate(a(b).get(0),j))):(apex.widget.datepicker(b,{buttonText:"<span class='"+lb+" icon-calendar'></span><span class='"+zb+"'>"+e.formatMessage("APEX.DATEPICKER.ICON_TEXT","")+"</span>",defaultDate:s(d),showTime:!1,showOn:"button"},k,apex.locale.getLanguage()),d&&null!==d.match(/^\d{14}/)&&a(b).datepicker("setDate",s(d))),a(b).next("button").addClass(eb+" "+ib+" "+hb+" "+xb+" "+jb),a(b).attr("placeholder",n("EXAMPLE")+": "+r.appearance.formatExample)}var f,g,h,j;j=d.recordView("getRecord"),f=b.getValue(j,"hiddenValue"),g=b.getValue(j,"hiddenBetween"),h=b.getValue(j,"hiddenAnd"),i(C),i(D),i(E),a("#"+v._getId(w+"VALUE")+"_LABEL ").text(n("VALUE")),r.filter.dataType===Sd||r.filter.dataType===Ud||r.filter.dataType===Vd||r.filter.dataType===Wd?(r.filter.dataType===Vd&&a("#"+v._getId(w+"VALUE")+"_LABEL ").text(n("VALUE_TIMESTAMP_TZ")),c("#"+v._getId(w+"VALUE"),"hiddenValue",f),c("#"+v._getId(w+"BETWEEN"),"hiddenBetween",g),c("#"+v._getId(w+"AND"),"hiddenAnd",h)):(C.combobox({label:n("VALUE")}),D.combobox({label:n("VALUE")}),E.combobox({label:n("AND")}),C.val(f),D.val(g),E.val(h))}function k(a,c){null!==d.recordView("getRecord")&&b.setValue(d.recordView("getRecord"),a,c)}function l(b){var c=z.val(),d=B.val();switch(N([A,B,C,D,E,G,H,I,J]),x&&N(F),k("type",c),c){case Sb:M(C),v.options.config.filter.oracleText?(H.prop(ec,!0),N(H)):(H.prop(ec,!1),M(H)),O(C,"APEX.IG.SEARCH"),i(C),h();break;case Tb:M([A,B]),O(C,"APEX.IG.VALUE"),M(a.inArray(d,[yd,zd])>-1?[D,E]:a.inArray(d,[Ad,Cd,Bd,Dd])>-1?[I,J]:C),m(b)}}function m(c){var e,g,h,l,m={},p=A.val(),q=z.val();if(q===Tb&&p){if(r=v._getColumn(p),r.filter.textCase)switch(r.filter.textCase.toLowerCase()){case"upper":C.css({"text-transform":"uppercase"}),D.css({"text-transform":"uppercase"}),E.css({"text-transform":"uppercase"});break;case"lower":C.css({"text-transform":"lowercase"}),D.css({"text-transform":"lowercase"}),E.css({"text-transform":"lowercase"});break;default:C.css({"text-transform":"none"}),D.css({"text-transform":"none"}),E.css({"text-transform":"none"})}if("HD"===f)switch(r.dataType){case Qd:m[jd]=n(te[jd]),m[kd]=n(te[kd]),m[rd]=n(te[rd]),m[sd]=n(te[sd]),m[vd]=n(te[vd]),m[wd]=n(te[wd]),m[td]=n(te[td]),m[ud]=n(te[ud]),m[Fd]=n(te[Fd]),m[Gd]=n(te[Gd]),m[Ed]=n(te[Ed]);break;case Rd:m[jd]=n(te[jd]),m[kd]=n(te[kd]),m[nd]=n(te[nd]),m[od]=n(te[od]),m[ld]=n(te[ld]),m[md]=n(te[md]),m[rd]=n(te[rd]),m[sd]=n(te[sd]),m[vd]=n(te[vd]),m[wd]=n(te[wd]),m[yd]=n(te[yd]),m[zd]=n(te[zd]);break;case Sd:case Ud:case Vd:case Wd:m[jd]=n(te[jd]),m[kd]=n(te[kd]),m[nd]=n(te[nd]),m[od]=n(te[od]),m[ld]=n(te[ld]),m[md]=n(te[md]),m[rd]=n(te[rd]),m[sd]=n(te[sd]),a.inArray(r.filter.dateRanges,[gd,hd])>-1&&(m[Ad]=n(te[Ad]),m[Bd]=n(te[Bd])),a.inArray(r.filter.dateRanges,[gd,id])>-1&&(m[Cd]=n(te[Cd]),m[Dd]=n(te[Dd])),m[yd]=n(te[yd]),m[zd]=n(te[zd]);break;case Td:m[rd]=n(te[rd]),m[sd]=n(te[sd])}else for(H.prop(ec,!0),g=0;g<r.filter.operators.length;g++)if(h=r.filter.operators[g],"$std$"===h.name)switch(r.filter.dataType){case Qd:m[jd]=n(te[jd]),m[kd]=n(te[kd]),m[rd]=n(te[rd]),m[sd]=n(te[sd]),m[vd]=n(te[vd]),m[wd]=n(te[wd]);break;case Rd:m[jd]=n(te[jd]),m[kd]=n(te[kd]),m[nd]=n(te[nd]),m[od]=n(te[od]),m[ld]=n(te[ld]),m[md]=n(te[md]),m[rd]=n(te[rd]),m[sd]=n(te[sd]),m[vd]=n(te[vd]),m[wd]=n(te[wd]),m[yd]=n(te[yd]),m[zd]=n(te[zd]);break;case Sd:case Ud:case Vd:case Wd:m[jd]=n(te[jd]),m[kd]=n(te[kd]),m[nd]=n(te[nd]),m[od]=n(te[od]),m[ld]=n(te[ld]),m[md]=n(te[md]),m[rd]=n(te[rd]),m[sd]=n(te[sd]),a.inArray(r.filter.dateRanges,[gd,hd])>-1&&(m[Ad]=n(te[Ad]),m[Bd]=n(te[Bd])),a.inArray(r.filter.dateRanges,[gd,id])>-1&&(m[Cd]=n(te[Cd]),m[Dd]=n(te[Dd])),m[yd]=n(te[yd]),m[zd]=n(te[zd]);break;case Td:m[rd]=n(te[rd]),m[sd]=n(te[sd])}else"$perform$"===h.name?a.inArray(r.filter.dataType,[Qd,Td])>-1&&(m[td]=n(te[td]),m[ud]=n(te[ud]),m[Fd]=n(te[Fd]),m[Gd]=n(te[Gd]),m[Ed]=n(te[Ed]),r.filter.textCase&&"MIXED"===r.filter.textCase.toUpperCase()&&H.prop(ec,!1)):h.name===Id?r.filter.textCase&&"MIXED"===r.filter.textCase.toUpperCase()&&H.prop(ec,!1):m[h.name]=n(te[h.name]);l=b.getValue(d.recordView("getRecord"),"operator"),B.empty(),a.each(m,function(b,c){B.append(a("<option></option>").attr("value",b).text(c))}),l&&null!==l&&a.inArray(l,m)&&B.val(l),null===B.val()&&B.val(jd),k("operator",B.val()),j(),v._hasColumnFilterLov(p)?v._getFilterValues(p,!1,function(a){if(y=[],a.regions[0].filterValues)for(e=a.regions[0].filterValues,g=0;g<e.length;g++)y.push({label:e[g],value:e[g]});D.hasClass(bb)&&D.combobox("option","source",y),E.hasClass(bb)&&E.combobox("option","source",y),C.hasClass(bb)&&C.combobox("option","source",y)}):(i(C),i(D),i(E)),c&&(C.val("").change(),D.val("").change(),E.val("").change()),k("columnId",p),o()}}function o(){var b=B.val(),c=z.val();k("operator",b),c===Tb&&(N([C,D,E,I,J,H]),null!==b&&(a.inArray(r.filter.dataType,[Sd,Ud,Vd,Wd])===-1&&C.hasClass(bb)&&(a.inArray(b,[vd,wd])>-1?(C.combobox("option","multipleValues",!0),C.combobox("option","multipleValueDelimiter",xd+" "),C.prop("placeholder",e.formatMessage("APEX.IG.PLACEHOLDER_INVALUES",xd))):(C.combobox("option","multipleValues",!1),C.prop("placeholder",""))),a.inArray(b,[td,ud,Ed,Fd,Gd])>-1&&H.prop(ec)===!1&&M(H),a.inArray(u,[yd,zd])>-1&&a.inArray(b,[yd,zd])===-1&&C.val("").change(),a.inArray(u,[yd,zd])===-1&&a.inArray(b,[yd,zd])>-1&&(D.val("").change(),E.val("").change()),a.inArray(u,[Ad,Cd,Bd,Dd])>-1&&a.inArray(b,[Ad,Cd,Bd,Dd])===-1&&C.val("").change(),a.inArray(b,[yd,zd])>-1?M([D,E]):a.inArray(b,[Ad,Cd,Bd,Dd])>-1?(M([I,J]),q()):a.inArray(b,[rd,sd])===-1&&M(C))),u=b,h()}function p(a){var c,e,f,g,i=v._getElement(w+a);if("VALUE"===a&&(c="hiddenValue"),"BETWEEN"===a&&(c="hiddenBetween"),"AND"===a&&(c="hiddenAnd"),b.setValidity(Zc,d.recordView("getRecord").id,a.toLowerCase()),i.hasClass(db))if(""===i.val())g="",f="";else{e=!1;try{e=i.datepicker("option","showTime")?apex.jQuery.timepicker.getCanonicalDate(i.get(0)):i.datepicker("getDate")}catch(j){}e&&!isNaN(e.getTime())?(g=i.val(),f=t(e)):(""!==i.val()&&b.setValidity(Yc,d.recordView("getRecord").id,a.toLowerCase(),n("DATE_INVALID_VALUE")),g=i.val(),f=i.val())}else"uppercase"===i.css("text-transform")?(f=i.val().toUpperCase(),g=i.val().toUpperCase()):"lowercase"===i.css("text-transform")?(f=i.val().toLowerCase(),g=i.val().toLowerCase()):(f=i.val(),g=i.val());k(c,f),k(a.toLowerCase(),g),h()}function q(){C.val(I.val()+Rc+J.val()),k("value",C.val()),k("dateRangeValue",I.val()),k("dateRangeUnit",J.val()),h()}var r,u,v=this,w=f+"_",x="FD"===f,y=[],z=v._getElement(w+"TYPE"),A=v._getElement(w+"COLUMN"),B=v._getElement(w+"OPERATOR"),C=v._getElement(w+"VALUE"),D=v._getElement(w+"BETWEEN"),E=v._getElement(w+"AND"),F=v._getElement(w+"NAME"),G=v._getElement(w+"EXPRESSION"),H=v._getElement(w+"CASE_SENSITIVE"),I=v._getElement(w+"DATE_RANGE_VALUE"),J=v._getElement(w+"DATE_RANGE_UNIT");I.change(q),J.change(q),H.change(function(){var a=H.prop(fc);k("isCaseSensitive",a),H.prop(fc,a)}),z.change(function(){l(!0)}),A.change(function(){m(!0)}),B.change(o),C.change(function(){p("VALUE")}),D.change(function(){p("BETWEEN")}),E.change(function(){p("AND")}),d.on("apexbeginrecordedit",function(){l(),a.isFunction(g)&&g()})},_renderFilterDialog:function(){var b=this;this._createDialog("filter",function(a){b._columnFilterDialogControls(a,"FD")},{titleKey:"FILTERS",dialogHelp:{helpTextKey:"FILTER"},checkboxColumn:!0,modelOptions:{shape:"table",fields:a.extend({id:{canHide:!1,hidden:!0,seq:0},isEnabled:p(),name:{headingAlignment:Vb,label:"NAME",elementId:"FD_NAME",width:100,seq:105}},this._columnFilterModelFields("FD"))},load:function(c){var d,e,f,g,h,i=[],j=b.getFilters(),k=a(this).dialog("option","id");if(j.length>0){for(d=0;d<j.length;d++){switch(f=a.extend({id:"",type:"",columnId:"",operator:"",value:"",hiddenValue:"",dateRangeValue:"",dateRangeUnit:"",isCaseSensitive:!1,between:"",and:"",hiddenBetween:"",hiddenAnd:"",isEnabled:"",enabledClass:"",enabledText:"",name:"",expression:""},j[d]),e=f.isEnabled,f.enabledClass=e?ub:"",f.enabledText=n(e?"ENABLED":"DISABLED"),f.name=b._getSettingLabel(uc,f),f.type){case Sb:f.hiddenValue=f.value;break;case Tb:f.hiddenValue=f.value,a.inArray(f.operator,[yd,zd])>-1?(g=f.value.split(Rc),f.hiddenBetween=g[0],f.hiddenAnd=g[1],f.hiddenValue="",f.value=""):a.inArray(f.operator,[Ad,Cd,Bd,Dd])>-1&&(h=f.value.split(Rc),f.dateRangeValue=h[0],f.dateRangeUnit=h[1],f.hiddenValue="",f.value=""),a.inArray(f.operator,[vd,wd])>-1&&(f.value=f.value.split("").join(xd+" "),f.hiddenValue=f.value)}f.isCaseSensitive=f.isCaseSensitive?Sc:Tc,i.push(f)}c.setData(i)}else k=c.insertNewRecord();return k},init:function(a,c,d){q(d,"hiddenValue"),q(d,"hiddenBetween"),q(d,"hiddenAnd"),b._columnFilterInitActions(a,c,d,"FD")},validate:function(c){var d=!0;return c.forEach(function(e,f,g){switch(c.setValidity(Zc,g,"between"),c.setValidity(Zc,g,"and"),c.setValidity(Zc,g,"value"),c.setValidity(Zc,g,"expression"),e.type){case Tb:switch(e.operator){case yd:case zd:e.hiddenBetween&&""!==e.hiddenBetween||(d=!1,c.setValidity(Yc,g,"between",n(pe))),e.hiddenAnd&&""!==e.hiddenAnd||(d=!1,c.setValidity(Yc,g,"and",n(pe))),d&&a.inArray(b._getColumn(e.columnId).filter.dataType,[Sd,Ud,Vd,Wd])>-1&&(e.hiddenBetween!==t(s(e.hiddenBetween))&&(d=!1,c.setValidity(Yc,g,"between",n(qe))),e.hiddenAnd!==t(s(e.hiddenAnd))&&(d=!1,c.setValidity(Yc,g,"and",n(qe))));break;case Ad:case Cd:case Bd:case Dd:e.dateRangeValue&&""!==e.dateRangeValue||(d=!1,c.setValidity(Yc,g,"dateRangeValue",n(pe))),e.dateRangeUnit&&""!==e.dateRangeUnit||(d=!1,c.setValidity(Yc,g,"dateRangeUnit",n(pe)));break;case jd:case kd:case nd:case od:case ld:case md:case vd:case wd:e.hiddenValue&&""!==e.hiddenValue?a.inArray(b._getColumn(e.columnId).filter.dataType,[Sd,Ud,Vd,Wd])>-1&&e.hiddenValue!==t(s(e.hiddenValue))&&(d=!1,c.setValidity(Yc,g,"value",n("DATE_INVALID_VALUE"))):(d=!1,c.setValidity(Yc,g,"value",n(pe)))}break;case Sb:e.hiddenValue&&""!==e.hiddenValue||(d=!1,c.setValidity(Yc,g,"value",n(pe)))}}),d},store:function(c){var d,e,f,g=c.getChanges();b._ifNoChangesDo(function(){for(d=0;d<g.length;d++){switch(e=g[d],f=e.record,delete f.enabledClass,delete f.enabledText,f.type){case Sb:delete f.expression,delete f.columnId,delete f.and,delete f.between,delete f.hiddenAnd,delete f.hiddenBetween,delete f.dateRangeValue,delete f.dateRangeUnit,delete f.operator,f.isCaseSensitive=f.isCaseSensitive===Sc;break;case Tb:f.value=f.hiddenValue,a.inArray(f.operator,[yd,zd])>-1?f.value=f.hiddenBetween+Rc+f.hiddenAnd:a.inArray(f.operator,[Ad,Cd,Bd,Dd])>-1&&(f.value=f.dateRangeValue+Rc+f.dateRangeUnit),a.inArray(f.operator,[vd,wd])>-1&&(f.value=v(f.value.split(xd)).join("")),delete f.dateRangeValue,delete f.dateRangeUnit,delete f.between,delete f.and,delete f.hiddenValue,delete f.hiddenBetween,delete f.hiddenAnd,delete f.expression,f.isCaseSensitive=f.isCaseSensitive===Sc}e.inserted?(delete f.id,f.columnType=Tb,b.addFilter(f,{save:!1,refreshData:!1,skipNoChangesCheck:!0})):e.updated?(f.columnType=Tb,b.updateFilter(f.id,f,{save:!1,refreshData:!1,skipNoChangesCheck:!0})):e.deleted&&b.deleteFilter(f.id,{save:!1,refreshData:!1,skipNoChangesCheck:!0})}b._setReportSettings({refreshModel:!0})})}})},_renderColumnsDialog:function(){function b(b){function d(a){return!(a.id!==g.columnId||a.specialType&&"actions"!==a.specialType||a.isHidden)}var e,f,g,h,i=[],j=c._getCurrentView().columns;for(e=0;e<j.length;e++)g=j[e],f=a.grep(c.options.config.columns,d),f=f.length>0&&f[0],f&&(h={id:g.columnId,columnId:g.columnId,columnWidth:g.width,seq:e+1,heading:"actions"===f.specialType?n("ROW_ACTIONS"):f.heading.label,groupId:f.layout.groupId,canHide:f.features.canHide,isVisible:g.isVisible,enabledClass:g.isVisible?ub:""},"ALL"===b?i.push(h):"VISIBLE"===b&&g.isVisible?i.push(h):"INVISIBLE"!==b||h.isVisible||i.push(h));return i}var c=this,d=[],e=this.options.config.views[this._view()].features;x(this.options.config.columnGroups,d,"id","label","",""),this._createDialog("columns",function(a){a(Lb,{id:"CD_COLUMN_WIDTH"}),a(Mb,{id:"CD_COLUMN_GROUP",options:d})},{titleKey:"COLUMNS",modelOptions:{shape:"table",canDelete:!1,canAdd:!1,sequenceField:e.reorderColumns?"seq":null,fields:{id:{canHide:!1,hidden:!0,seq:0},isVisible:p("VISIBLE"),heading:{label:"COLUMN",headingAlignment:Vb,elementId:"CD_COLUMN_HEADING",canHide:!0,hidden:!1,width:100,seq:20},groupId:{label:"GROUP",elementId:"CD_COLUMN_GROUP",canHide:!0,escape:!1,"volatile":!0,hidden:!0,seq:30},columnWidth:{label:"WIDTH",elementId:"CD_COLUMN_WIDTH",canHide:!0,hidden:!0,seq:40},columnId:{label:"COLUMN",elementId:"CD_COLUMN",seq:0,canHide:!0,hidden:!0},seq:{canHide:!1,hidden:!0,seq:0},canHide:{canHide:!1,hidden:!0,seq:0},enabledClass:{"volatile":!0,canHide:!1,hidden:!0,defaultValue:ub,seq:0}}},load:function(a){a.setData(b(this.showColumns))},init:function(c,d,e,g){var h,i=this;this.showColumns||(this.showColumns="ALL"),h=[{type:ed,iconOnly:!0,icon:"icon-up-chevron",action:"move-up"},{type:ed,iconOnly:!0,icon:"icon-down-chevron",action:"move-down"},{type:fd,labelKey:"APEX.IG.SHOW",icon:"icon-ig-select-cols",iconOnly:!0,menu:{items:[{type:cd,action:"show-columns"}]}}],f.findContext("ModelEditDialog",this).add([{name:"show-columns",choices:[{label:n("ALL"),value:"ALL"},{label:n("VISIBLE"),value:"VISIBLE"},{label:n("INVISIBLE"),value:"INVISIBLE"}],get:function(){return i.showColumns},set:function(a){i.showColumns=a;var d=b(a);c.setData(d)}}]),g.toolbar({data:[{align:"start",controls:h}]}),d.on("click",yb,function(){var b,e,f=a(this);e=d.grid("getRecords",[f.parent()])[0],c.getValue(e,"canHide")&&(b=!c.getValue(e,"isVisible"),c.setValue(e,"enabledClass",b?ub:""),c.setValue(e,"isVisible",b))}).on("keydown",yb,function(b){b.which===a.ui.keyCode.SPACE&&a(this).trigger("click")}),e.on("apexbeginrecordedit",function(){""===c.getValue(e.recordView("getRecord"),"groupId")?q(e,"groupId"):r(e,"groupId")}),q(e,"columnId"),q(e,"isVisible")},validate:function(a){var b,c=!0;return a.forEach(function(d,e,f){b=d.columnWidth,null!==b&&""!==b&&isNaN(parseInt(b,10))?(a.setValidity(Yc,f,"columnWidth",n(qe)),a.setValidity(Yc,f,"columnId",n(qe)),c=!1):(a.setValidity(Zc,f,"columnWidth"),a.setValidity(Zc,f,"columnId"))}),c},store:function(a){var b,d,e,f=!1,g=(a.getChanges(),c._getCurrentView().columns),h=c._currentViewImpl().view$.grid("getColumns");c._ifNoChangesDo(function(){for(g.sort(function(a,b){return a.seq-b.seq}),b=0;b<g.length;b++)g[b].isFrozen===!0&&(f=b+1);for(a.forEach(function(a,b,d){e=a.columnWidth,e&&null!==e||(e=""),e=e.toString(),c._currentViewColumn(a.columnId,{isVisible:a.isVisible,width:parseInt(e,10),seq:parseFloat(a.seq)})}),g.sort(function(a,b){return a.seq-b.seq}),b=0;b<g.length;b++)for(d=0;d<h.length;d++)if(g[b].columnId===h[d].id){h[d].seq=g[b].seq,h[d].canHide&&(h[d].hidden=!g[b].isVisible),h[d].width=g[b].width,g[b].seq=b,f!==!1&&b>=f&&(g[b].isFrozen=!1,h[d].frozen=!1),f!==!1&&b<f&&(g[b].isFrozen=!0,h[d].frozen=!0);break}c._setReportSettings({refreshView:!0,refreshColumns:!0})})}})},_renderHighlightDialog:function(){var b,c,d=this,e=this.options.config.columns,f=!1,g=[];for(c=0;c<e.length;c++)b=e[c],this._getColumn(b.id).specialType||this._getColumn(b.id).isHidden||g.push({value:b.id,label:this._getColumnLabel(b.id)});this._createDialog("highlight",function(a){d._columnFilterDialogControls(a,"HD"),a(Nb,{id:"HD_BACKGROUND_COLOR",colorMenu:!0,itemLabel:n("BACKGROUND_COLOR")}),a(Nb,{id:"HD_TEXT_COLOR",colorMenu:!0,itemLabel:n("TEXT_COLOR")}),a(Mb,{id:"HD_HIGHLIGHT_TYPE",options:[{value:Sb,label:n("ROW")},{value:Tb,label:n("COLUMN")}]}),a(Mb,{id:"HD_HIGHLIGHT_COLUMN",options:g})},{width:800,height:580,titleKey:"HIGHLIGHT",checkboxColumn:!0,modelOptions:{shape:"table",sequenceField:"seq",fields:a.extend({id:{canHide:!1,hidden:!0,seq:0},seq:{canHide:!1,hidden:!0,seq:0},isEnabled:p(),name:{label:"NAME",headingAlignment:Vb,elementId:"HD_NAME",isRequired:!0,width:100,seq:15},highlightType:{label:"HIGHLIGHT",elementId:"HD_HIGHLIGHT_TYPE",seq:20,canHide:!0,hidden:!0},highlightColumnId:{label:"COLUMN",elementId:"HD_HIGHLIGHT_COLUMN",seq:30,canHide:!0,hidden:!0},backgroundColor:{label:"BACKGROUND_COLOR",elementId:"HD_BACKGROUND_COLOR",seq:40,fieldColSpan:6,canHide:!0,hidden:!0},textColor:{label:"TEXT_COLOR",elementId:"HD_TEXT_COLOR",seq:50,fieldColSpan:6,canHide:!0,hidden:!0}},this._columnFilterModelFields("HD"))},load:function(b){var c,e,f,g,h,i=[],j=d.getHighlights(),k=a(this).dialog("option","id");if(j.length>0){for(c=0;c<j.length;c++){switch(h=j[c],g={id:h.id,seq:h.seq,name:h.name,highlightType:h.type,highlightColumnType:h.columnType,highlightColumnId:h.columnId,backgroundColor:h.backgroundColor,textColor:h.textColor,type:h.condition.type,columnType:h.condition.columnType,columnId:h.condition.columnId,operator:h.condition.operator,isCaseSensitive:h.condition.isCaseSensitive?Sc:Tc,value:h.condition.value,expression:h.condition.expression,isEnabled:h.isEnabled,hiddenValue:"",dateRangeValue:"",dateRangeUnit:"",between:"",and:"",hiddenBetween:"",hiddenAnd:"",enabledClass:"",enabledText:""},g.enabledClass=g.isEnabled?ub:"",g.enabledText=n(g.isEnabled?"ENABLED":"DISABLED"),g.hiddenValue=g.value,g.type){case Tb:a.inArray(g.operator,[yd,zd])>-1?(e=g.value.split(Rc),g.hiddenBetween=e[0],g.hiddenAnd=e[1],g.hiddenValue="",g.value=""):a.inArray(g.operator,[Ad,Cd,Bd,Dd])>-1&&(f=g.value.split(Rc),g.dateRangeValue=f[0],g.dateRangeUnit=f[1],g.hiddenValue="",g.value=""),a.inArray(g.operator,[vd,wd])>-1&&(g.value=g.value.split("").join(xd+" "),g.hiddenValue=g.value)}i.push(g)}b.setData(i)}else k=b.insertNewRecord();return k},init:function(b,c,e){function g(b,c){a(c).prevAll("input").first().val(this.value).change()}function h(){function b(){"9999"!==a("div.colorpicker").css("z-index")&&a(document.createElement("style")).html(" div.colorpicker, div.colorpicker * { z-index: 9999; } ").appendTo("head"),apex.widget.colorpicker(p,{preview:{type:"modern"}}),apex.widget.colorpicker(r,{preview:{type:"modern"}}),f=!0}a.isFunction(apex.widget.colorpicker)?b():a.when(a.getScript(apex_img_dir+"libraries/jquery-colorpicker/1.4/js/"+(0===apex.debug.getLevel()?"apex.colorpicker.min.js":"apex.colorpicker.js")),a.getScript(apex_img_dir+"libraries/apex/"+(0===apex.debug.getLevel()?"minified/widget.colorpicker.min.js":"widget.colorpicker.js")),a.Deferred(function(b){a(b.resolve)})).done(function(){a(document.createElement("link")).attr({rel:"stylesheet",type:"text/css",href:apex_img_dir+"libraries/jquery-colorpicker/1.4/css/colorpicker.css"}).appendTo("head"),b()})}function i(){var a=n.val();a===Sb?N(o):M(o)}function j(){i(),f===!1&&h(),p.change(),r.change()}var k,l,n=d._getElement("HD_HIGHLIGHT_TYPE"),o=d._getElement("HD_HIGHLIGHT_COLUMN"),p=d._getElement("HD_TEXT_COLOR"),r=d._getElement("HD_BACKGROUND_COLOR"),s=d._getElement("HD_NAME"),t=[];for(l=0;l<se.length;l++)t.push({type:ad,action:g,label:m(se[l].label),icon:"a-Icon icon-circle",iconStyle:"color: "+se[l].value+";",value:se[l].value});k=a("<div/>",{id:d._getId("color_menu")}).appendTo(this),k.menu({actionsContext:d.actions,items:t}),P(s,!0),q(e,"hiddenValue"),q(e,"hiddenBetween"),q(e,"hiddenAnd"),d._columnFilterInitActions(b,c,e,"HD",j),n.change(i)},validate:function(b){var c=!0;return b.forEach(function(e,f,g){switch(b.setValidity(Zc,g,"between"),b.setValidity(Zc,g,"and"),b.setValidity(Zc,g,"value"),b.setValidity(Zc,g,"expression"),b.setValidity(Zc,g,"name"),b.setValidity(Zc,g,"textColor"),b.setValidity(Zc,g,"backgroundColor"),""===e.textColor&&""===e.backgroundColor&&(b.setValidity(Yc,g,"textColor",n(pe)),b.setValidity(Yc,g,"backgroundColor",n(pe))),""===e.name&&b.setValidity(Yc,g,"name",n(pe)),e.type){case Tb:switch(e.operator){case yd:case zd:e.hiddenBetween&&""!==e.hiddenBetween||(c=!1,b.setValidity(Yc,g,"between",n(pe))),e.hiddenAnd&&""!==e.hiddenAnd||(c=!1,b.setValidity(Yc,g,"and",n(pe))),c&&a.inArray(d._getColumn(e.columnId).filter.dataType,[Sd,Ud,Vd,Wd])>-1&&(e.hiddenBetween!==t(s(e.hiddenBetween))&&(c=!1,b.setValidity(Yc,g,"between",n(qe))),e.hiddenAnd!==t(s(e.hiddenAnd))&&(c=!1,b.setValidity(Yc,g,"and",n(qe))));break;case Ad:case Cd:case Bd:case Dd:e.dateRangeValue&&""!==e.dateRangeValue||(c=!1,b.setValidity(Yc,g,"dateRangeValue",n(pe))),e.dateRangeUnit&&""!==e.dateRangeUnit||(c=!1,b.setValidity(Yc,g,"dateRangeUnit",n(pe)));break;case jd:case kd:case nd:case od:case ld:case md:case vd:case wd:e.hiddenValue&&""!==e.hiddenValue?a.inArray(d._getColumn(e.columnId).filter.dataType,[Sd,Ud,Vd,Wd])>-1&&e.hiddenValue!==t(s(e.hiddenValue))&&(c=!1,b.setValidity(Yc,g,"value",n("DATE_INVALID_VALUE"))):(c=!1,b.setValidity(Yc,g,"value",n(pe)))}break;case Sb:e.hiddenValue&&""!==e.hiddenValue||(c=!1,b.setValidity(Yc,g,"value",n(pe)))}}),c},store:function(b){var c,e,f,g,h,i=b.getChanges();for(c=0;c<i.length;c++){switch(e=i[c],g=e.record,g.type){case Sb:h={type:Sb,value:g.value,isCaseSensitive:g.isCaseSensitive===Sc};break;case Tb:h={type:Tb,value:g.hiddenValue,columnId:g.columnId,operator:g.operator,columnType:Tb,isCaseSensitive:g.isCaseSensitive===Sc},a.inArray(g.operator,[vd,wd])>-1&&(h.value=v(g.hiddenValue.split(xd)).join("")),a.inArray(g.operator,[yd,zd])>-1?h.value=g.hiddenBetween+Rc+g.hiddenAnd:a.inArray(g.operator,[Ad,Cd,Bd,Dd])>-1&&(h.value=g.dateRangeValue+Rc+g.dateRangeUnit)}f={id:g.id,seq:parseFloat(g.seq),name:g.name,type:g.highlightType,textColor:g.textColor,backgroundColor:g.backgroundColor,condition:h,isEnabled:g.isEnabled},g.highlightType===Tb?(f.type=Tb,f.columnType=Tb,f.columnId=g.highlightColumnId):g.highlightType===Sb&&(f.type=Sb,delete f.columnType,delete f.columnId),e.inserted?(delete f.id,d.addHighlight(f,{save:!1,refreshData:!0,skipNoChangesCheck:!0})):e.updated?d.updateHighlight(f.id,f,{save:!1,refreshData:!1,skipNoChangesCheck:!0}):e.deleted&&d.deleteHighlight(f.id,{save:!1,refreshData:!1,skipNoChangesCheck:!0})}d._setReportSettings({refreshModel:!0,changeIdentifier:"views.grid.highlights"})}})},_loadColumnOptions:function(a,b){var c,d,e,f=this.options.config.columns;for(a.push({value:"",label:n(re)}),c=0;c<f.length;c++)e=f[c],e.specialType||!e.features[b]||e.isHidden||(d||(d=e),a.push({value:e.id,label:this._getColumnLabel(e.id)}));return d},_renderSortDialog:function(){var a,b=[],c=this;a=this._loadColumnOptions(b,"sort"),this._createDialog("sort",function(a){a(Mb,{id:"SD_COLUMN",required:!0,options:b}),c._renderSortControls(a,"SD_")},{titleKey:"SORT",modelOptions:{shape:"table",identityField:"order",sequenceField:"seq",fields:{order:{canHide:!1,hidden:!0,seq:10},seq:{seq:20,canHide:!1,hidden:!0},columnId:{label:"COLUMN",headingAlignment:Vb,elementId:"SD_COLUMN",isRequired:!0,width:100,seq:30,canHide:!0,hidden:!1},direction:{label:"DIRECTION",headingAlignment:Vb,elementId:"SD_DIRECTION",width:60,seq:40,defaultValue:Ec,canHide:!0,hidden:!1},nulls:{label:"NULLS",elementId:"SD_NULLS",seq:50,defaultValue:Hc,canHide:!0,hidden:!0}}},load:function(a){var b,d,e=c.getSorts();for(b=0;b<e.length;b++)e[b].seq=b+1,e[b].order=b+1;return e.length>0?a.setData(e):d=a.insertNewRecord(),d},init:function(a,b,d){function e(){a.setValue(d.recordView("getRecord"),"columnId",g.val())}function f(){a.setValue(d.recordView("getRecord"),"direction",h.val())}var g=c._getElement("SD_COLUMN"),h=c._getElement("SD_DIRECTION");c._getElement("SD_NULLS");g.change(e),h.change(f)},validate:function(a){var b={},c=!0;return a.forEach(function(a,d,e){b[a.columnId]?c=!1:b[a.columnId]=!0}),c!==!1||n("SORT_ONLY_ONE_PER_COLUMN")},store:function(a){var b,d,e,f,g,h=a.getChanges(),i=c.getSorts();for(b=0;b<i.length;b++)i[b].seq=b+1;for(b=0;b<h.length;b++)if(e=h[b],f=e.record,g=e.original,f.seq=parseFloat(f.seq),e.inserted)i.push(f);else if(e.updated)if(g.columnId===f.columnId){for(d=0;d<i.length;d++)if(f.columnId===i[d].columnId){i[d]=f;break}}else{for(d=0;d<i.length;d++)if(g.columnId===i[d].columnId){i.splice(d,1);break}i.push(f)}else if(e.deleted)for(d=0;d<i.length;d++)if(f.columnId===i[d].columnId){i.splice(d,1);break}i.length>0&&(i=i.sort(function(a,b){return a.seq-b.seq})),h.length>0&&c.setSorts(i)}})},_renderAggregateDialog:function(){var b,c,d=[],e=this;b=this._loadColumnOptions(d,"aggregate"),c=[{value:ue.CNT,label:n(ue.CNT)},{value:ue.CNT_DIST,label:n(ue.CNT_DIST)},{value:ue.MIN,label:n(ue.MIN)},{value:ue.MAX,label:n(ue.MAX)},{value:ue.MEDIAN,label:n(ue.MEDIAN)},{value:ue.SUM,label:n(ue.SUM)},{value:ue.AVG,label:n(ue.AVG)}],this._createDialog("aggregate",function(a){a(Mb,{id:"AD_COLUMN",required:!0,options:d}),a(Mb,{id:"AD_AGGREGATION",required:!0,options:c}),a(Lb,{maxlength:"30",id:"AD_TOOLTIP"}),a(Pb,{id:"AD_SHOW_GRAND_TOTAL",value:Sc})},{titleKey:"AGGREGATION",dialogHelp:{helpTextKey:"AGGREGATE"},checkboxColumn:!0,modelOptions:{shape:"table",fields:{id:{canHide:!1,hidden:!0,seq:0},isEnabled:p(),columnId:{label:"COLUMN",headingAlignment:Vb,elementId:"AD_COLUMN",isRequired:!0,defaultValue:"",seq:30,width:80,canHide:!0,hidden:!1},"function":{label:"AGGREGATION",headingAlignment:Vb,elementId:"AD_AGGREGATION",isRequired:!0,seq:40,width:80,defaultValue:"",canHide:!0,hidden:!1},tooltip:{label:"TOOLTIP",elementId:"AD_TOOLTIP",seq:50,defaultValue:"",canHide:!0,hidden:!0},showGrandTotal:{label:"SHOW_OVERALL_VALUE",elementId:"AD_SHOW_GRAND_TOTAL",seq:60,defaultValue:Sc,canHide:!0,hidden:!0}}},load:function(c){function d(a){var b,d=e._getColumn(a);return h=d.filter.dataType===Rd?ue.SUM:ue.CNT,b=c.insertNewRecord(null,null,{columnId:a,isEnabled:!0,enabledClass:ub,"function":h})}var f,g,h,i=[],j=a(this),k=j.dialog("option","id"),l=j.dialog("option","columnId"),m=e.getAggregates();if(m.length>0){for(f=0;f<m.length;f++)g=a.extend({id:"",columnId:"","function":"",tooltip:"",showGrandTotal:"",isEnabled:"",enabledClass:"",enabledText:""},m[f]),g.enabledClass=g.isEnabled?ub:"",g.enabledText=n(g.isEnabled?"ENABLED":"DISABLED"),g.showGrandTotal=g.showGrandTotal?Sc:Tc,i.push(g);c.setData(i),l&&(k=d(l))}else k=d(l?l:b.id);return k},init:function(b,c,d){function f(){var c,f,h={},k=i.val();c=e._getColumn(k),k&&""!==k?(r(d,"function"),r(d,"tooltip"),r(d,"showGrandTotal"),h[ue.CNT]=n(ue.CNT),c.filter.dataType!==Qd&&c.filter.dataType!==Rd&&c.filter.dataType!==Sd||(h[ue.CNT_DIST]=n(ue.CNT_DIST),h[ue.MIN]=n(ue.MIN),h[ue.MAX]=n(ue.MAX)),c.filter.dataType!==Rd&&c.filter.dataType!==Sd||(h[ue.MEDIAN]=n(ue.MEDIAN)),c.filter.dataType===Rd&&(h[ue.SUM]=n(ue.SUM),h[ue.AVG]=n(ue.AVG)),f=j.val(),j.empty(),j.append(a("<option></option>").attr("value","").text(n(re))),a.each(h,function(b,c){j.append(a("<option></option>").attr("value",b).text(c))}),""!==f&&j.val(f),""!==j.val()&&null!==j.val()||(c.filter.dataType===Rd?j.val(ue.SUM):j.val(ue.CNT)),b.setValue(d.recordView("getRecord"),"columnId",k),g()):(q(d,"function"),q(d,"tooltip"),
q(d,"showGrandTotal"),b.setValue(d.recordView("getRecord"),"columnId",""),j.val("").change())}function g(){b.setValue(d.recordView("getRecord"),"function",j.val())}function h(){b.setValue(d.recordView("getRecord"),"showGrandTotal",k.prop(fc)?"Y":"N")}var i=e._getElement("AD_COLUMN"),j=e._getElement("AD_AGGREGATION"),k=e._getElement("AD_SHOW_GRAND_TOTAL");M(i),i.change(f),j.change(g),k.change(h),d.on("apexbeginrecordedit",function(){f()})},validate:function(a){var b,c={},d=!0;return a.forEach(function(e,f,g){b=e.columnId.toString()+e["function"],c[b]?(d=!1,a.setValidity(Yc,g,"columnId",n("DUPLICATE_AGGREGATION")),a.setValidity(Yc,g,"function",n("DUPLICATE_AGGREGATION"))):(c[b]=!0,a.setValidity(Zc,g,"columnId"),a.setValidity(Zc,g,"function")),""===e.columnId&&(a.setValidity(Yc,g,"columnId",n("DUPLICATE_AGGREGATION")),d=!1)}),d},store:function(a){var b,c,d,f=a.getChanges();e._ifNoChangesDo(function(){for(b=0;b<f.length;b++)c=f[b],c.record.columnId&&""!==c.record.columnId&&(d=c.record,delete d.enabledClass,delete d.enabledText,d.showGrandTotal=d.showGrandTotal===Sc,c.inserted?(delete d.id,d.columnType=Tb,e.addAggregate(d,{save:!1,refreshData:!1,skipNoChangesCheck:!0})):c.updated?e.updateAggregate(d.id,d,{save:!1,refreshData:!1,skipNoChangesCheck:!0}):c.deleted&&e.deleteAggregate(d.id,{save:!1,refreshData:!1,skipNoChangesCheck:!0}));e._setReportSettings({refreshModel:!0,changeIdentifier:"views.grid.aggregations"})})}})},_renderControlBreakDialog:function(){var b,c=[],d=this;b=this._loadColumnOptions(c,"sort"),this._createDialog("controlBreak",function(a){a(Mb,{id:"CBD_COLUMN",required:!0,options:c}),d._renderSortControls(a,"CBD_")},{titleKey:"CONTROL_BREAK",checkboxColumn:!0,modelOptions:{shape:"table",sequenceField:"sequenceField",fields:{id:{canHide:!1,hidden:!0,seq:0},sequenceField:{canHide:!1,hidden:!0,seq:0},oldColumnId:{canHide:!1,hidden:!0,seq:0},isEnabled:p(),columnId:{label:"COLUMN",headingAlignment:Vb,elementId:"CBD_COLUMN",isRequired:!0,seq:20,width:100,canHide:!0,hidden:!1},direction:{label:"DIRECTION",elementId:"CBD_DIRECTION",defaultValue:Ec,seq:30,canHide:!0,hidden:!0},nulls:{label:"NULLS",elementId:"CBD_NULLS",defaultValue:Hc,seq:40,canHide:!0,hidden:!0}}},load:function(c){var e,f,g,h,i=[],j=a(this).dialog("option","id"),k=d._getCurrentView().columns;for(e=0;e<k.length;e++)f=k[e],h=f["break"],h&&(g=a.extend({},{id:f.columnId,columnId:f.columnId,oldColumnId:f.columnId,direction:f.direction,nulls:f.nulls,sequenceField:parseFloat(h.order),isEnabled:h.isEnabled,enabledClass:h.isEnabled?ub:""}),i.push(g));return i.length>0?(i.sort(function(a,b){return a.sequenceField<b.sequenceField?-1:a.sequenceField>b.sequenceField?1:0}),c.setData(i)):j=c.insertNewRecord({isEnabled:!0,id:b.columnId,columnId:b.columnId,oldColumnId:b.columnId,direction:b.sort?b.sort.direction:Ec,nulls:b.sort?b.sort.nulls:Hc}),j},init:function(a,b,c){function e(){a.setValue(c.recordView("getRecord"),"columnId",f.val()),""===f.val()?N([g,h]):M([g,h])}var f=d._getElement("CBD_COLUMN"),g=d._getElement("CBD_DIRECTION"),h=d._getElement("CBD_NULLS");f.change(e),g.change(function(){a.setValue(c.recordView("getRecord"),"direction",g.val())}),h.change(function(){a.setValue(c.recordView("getRecord"),"nulls",h.val())}),c.on("apexbeginrecordedit",e)},validate:function(a){var b={},c=!0;return a.forEach(function(d,e,f){b[d.columnId]?(c=!1,a.setValidity(Yc,f,"columnId",n("DUPLICATE_CONTROLBREAK"))):b[d.columnId]=!0,""===d.columnId&&(c=!1)}),c},store:function(a){var b,c,e,f=a.getChanges();d._ifNoChangesDo(function(){function a(){d.addControlBreak(d._currentViewImpl().modelColumns[d._getColumn(e.columnId).name],{isEnabled:e.isEnabled,order:parseFloat(e.sequenceField),direction:e.direction,nulls:e.nulls},{save:!1,refreshData:!1,skipNoChangesCheck:!0})}for(b=0;b<f.length;b++)c=f[b],e=c.record,c.inserted?a():c.updated?e.columnId!==e.oldColumnId?(d.deleteControlBreak(e.oldColumnId,{save:!1,refreshData:!1,skipNoChangesCheck:!0}),a()):d.updateControlBreak(e.columnId,{isEnabled:e.isEnabled,order:parseFloat(e.sequenceField),direction:e.direction,nulls:e.nulls},{save:!1,refreshData:!1,skipNoChangesCheck:!0}):c.deleted&&d.deleteControlBreak(e.columnId,{save:!1,refreshData:!1,skipNoChangesCheck:!0});d._setReportSettings({refreshModel:!0,refreshColumns:!0})})}})},_addActions:function(c){var d=this,f=this.options.config;c.add([{name:"search-case-sensitive",labelKey:"APEX.IG.CASE_SENSITIVE",value:!1,get:function(){return d.searchCaseSensitive},set:function(a){d.searchCaseSensitive=a}},{name:"filter-column",labelKey:"APEX.IG.SELECT_COLUMNS_TO_SEARCH",get:function(){return d.currentFilterColumnId},set:function(a){d._setFilterColumn(a)}},{name:"search",labelKey:"APEX.IG.GO",getSearchValue:function(a){var b="";f.toolbar&&f.toolbar.searchField&&f.toolbarData&&(b=d.toolbar$.toolbar("findElement","search_field").val()),a(b)},action:function(){this.getSearchValue(function(a){var b;a?(b=d.currentFilterColumnId?{type:Tb,columnType:Tb,columnId:d.currentFilterColumnId,operator:td,value:a,isCaseSensitive:d.searchCaseSensitive}:{type:Sb,value:a,isCaseSensitive:d.searchCaseSensitive},d.addFilter(b)):d.refresh()})}},{name:"change-report",labelKey:"APEX.IG.SAVED_REPORTS",hide:!0,choices:[],get:function(){return d._report()},set:function(a){d._report(a)}},{name:"change-view",labelKey:"APEX.IG.CHANGE_VIEW",choices:[],get:function(){return d._view()},set:function(a){d._view(a,{fetchData:!0})}},{name:"show-columns-dialog",labelKey:"APEX.IG.COLUMNS",icon:"icon-ig-select-cols",action:function(){d._openDialog(tc)}},{name:"show-filter-dialog",labelKey:"APEX.IG.FILTER",icon:"icon-ig-filter",hide:!0,action:function(){d._openDialog(uc)}},{name:"chart-view",labelKey:"APEX.IG.CHART",icon:"icon-ig-chart",action:function(){d._currentReportSettings();d.viewsImpl[jc].isConfigured()&&d._view(jc,{fetchData:!0}),d.viewsImpl[jc].openDialog()}},{name:"show-sort-dialog",labelKey:"APEX.IG.SORT",icon:"icon-ig-sort",action:function(){d._openDialog(xc)}},{name:"show-aggregate-dialog",labelKey:"APEX.IG.AGGREGATE",icon:"icon-ig-aggregate",action:function(){d._openDialog(yc)}},{name:"show-flashback-dialog",labelKey:"APEX.IG.FLASHBACK",icon:"icon-ig-flashback",hide:!0,action:function(){d._openDialog(wc)}},{name:"show-highlight-dialog",labelKey:"APEX.IG.HIGHLIGHT",icon:"icon-ig-highlight",hide:!0,action:function(){d._openDialog(vc)}},{name:"show-control-break-dialog",labelKey:"APEX.IG.CONTROL_BREAK",icon:"icon-ig-control-break",action:function(){d._openDialog(zc)}},{name:"stretch-columns",labelKey:"APEX.IG.STRETCH_COLUMNS",hide:!0,get:function(){var a=d._view(),b=d._currentReportSettings().views[a];return b&&b.stretchColumns},set:function(a){var b=d._currentReportSettings(),c=d._view(),e=b.views[c];e&&(e.stretchColumns=a),d._setOperationUpdate(b),d._setReportSettings({changeIdentifier:"views.grid.columns"})}},{name:"change-rows-per-page",labelKey:"APEX.IG.ROWS_PER_PAGE",choices:[{labelKey:"APEX.IG.AUTO",value:"null"},{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100},{label:"1000",value:1e3}],get:function(){var a=d._currentReportSettings().rowsPerPage;return null===a?"null":a},set:function(a){var b=d._currentReportSettings();a="null"===a?null:parseInt(a,10),d._currentViewImpl().setOption("rowsPerPage",a),b.rowsPerPage=a,d._setOperationUpdate(b),d._setReportSettings({refreshView:!0})}},{name:"save-report",labelKey:"APEX.IG.SAVE",icon:"icon-ig-save",action:function(){var a=d._currentReportSettings();d.updateReport(a.id,a)}},{name:"show-save-report-as-dialog",labelKey:"APEX.IG.SAVE_AS",icon:"icon-ig-save-as",action:function(){d._openDialog(Bc)}},{name:"show-edit-report-dialog",labelKey:"APEX.IG.EDIT",icon:"icon-ig-edit",action:function(){d._openDialog(Ac)}},{name:"delete-report",labelKey:"APEX.IG.DELETE",icon:"icon-ig-delete",action:function(){i.confirm(n("DELETE_REPORT_CONFIRM"),function(a){a&&d.deleteReport(d._report())})}},{name:"show-download-dialog",labelKey:"APEX.IG.DOWNLOAD",icon:"icon-ig-download",hide:!0,action:function(){d._openDialog(Cc)}},{name:"show-help-dialog",labelKey:"APEX.IG.HELP",icon:"icon-ig-help",action:function(){var c=d.options.config;e.loadMessagesIfNeeded(["APEX.IG.HELP.ACTIONS.INTRO_HEADING","APEX.IG.HELP.ACTIONS.INTRO","APEX.IG.HELP.ACTIONS.REPORTING_HEADING","APEX.IG.HELP.ACTIONS.REPORTING","APEX.IG.HELP.ACTIONS.EDITING_HEADING","APEX.IG.HELP.ACTIONS.EDITING"],function(){function d(b,c){var d=a.extend({headingKey:"",helpText:"",helpTextKey:""},c);d.headingKey&&b.markup("<h2>").content(m(d.headingKey)).markup("</h2>"),d.helpText&&b.markup("<div").attr($c,"apex-help-custom").markup(">").markup(d.helpText).markup("</div>"),d.helpTextKey&&b.markup("<p>").markup(m(d.helpTextKey)).markup("</p>")}var e=b.htmlBuilder();c.text.help&&d(e,{helpText:c.text.help}),d(e,{headingKey:"APEX.IG.HELP.ACTIONS.INTRO_HEADING",helpTextKey:"APEX.IG.HELP.ACTIONS.INTRO"}),d(e,{headingKey:"APEX.IG.HELP.ACTIONS.REPORTING_HEADING",helpTextKey:"APEX.IG.HELP.ACTIONS.REPORTING"}),c.editable&&d(e,{headingKey:"APEX.IG.HELP.ACTIONS.EDITING_HEADING",helpTextKey:"APEX.IG.HELP.ACTIONS.EDITING"}),h.popupFieldHelp({title:n("HELP.ACTIONS_TITLE"),helpText:e.toString()})})}},{name:"selection-mode",onLabelKey:"APEX.IG.SEL_MODE_CELL",offLabelKey:"APEX.IG.SEL_MODE_ROW",shortcut:"F8",hide:!0,get:function(){var a=d._currentViewImpl();return!a.view$||!a.supports.cellSelection||!a.selectCells()},set:function(a){var b=d._currentViewImpl();b.view$&&b.supports.cellSelection&&b.selectCells(!a)}},{name:"selection-duplicate",type:ad,labelKey:"APEX.IG.DUPLICATE_ROWS",icon:"icon-ig-duplicate",hide:!0,action:function(){var a,b=d._currentViewImpl();if(b.supports.edit&&(a=b.getSelectedRecords(),a.length>0))return b.model.copyRecords(a,null,a[a.length-1]),!0}},{name:"selection-delete",labelKey:"APEX.IG.DELETE_ROWS",icon:"icon-ig-delete",hide:!0,action:function(){var a,b,c=d._currentViewImpl();if(c.supports.edit){for(b=c.getSelectedRecords(),a=0;a<b.length;a++)c.model.allowDelete(b[a])||(b.splice(a,1),a-=1);b.length>0&&c.model.deleteRecords(b)}}},{name:"selection-refresh",labelKey:"APEX.IG.REFRESH_ROWS",icon:"icon-ig-refresh",hide:!0,action:function(){var a,b=d._currentViewImpl();b.supports.edit&&(a=b.getSelectedRecords(),a.length>0&&b.model.fetchRecords(a))}},{name:"selection-revert",labelKey:"APEX.IG.REVERT_CHANGES",icon:"icon-ig-revert",hide:!0,action:function(){var a,b,c=d._currentViewImpl();if(c.supports.edit){for(b=c.getSelectedRecords(),a=0;a<b.length;a++)c.model.canRevertRecord(b[a])||(b.splice(a,1),a-=1);b.length>0&&c.model.revertRecords(b)}}},{name:"selection-copy",labelKey:"APEX.IG.COPY_CB",icon:"icon-ig-copy",action:function(){var a=d._currentViewImpl();a.canCopy2Clipboard()&&(a.focus(),apex.clipboard.copy())}},{name:"refresh",labelKey:"APEX.IG.REFRESH",icon:"icon-ig-refresh",action:function(){d.refresh()}},{name:"reset-report",labelKey:"APEX.IG.RESET",disabled:!0,icon:"icon-ig-reset",action:function(){d._resetReportSettings()}},{name:"edit",labelKey:"APEX.IG.EDIT",hide:!0,get:function(){return d.editMode},set:function(a){d._setEditMode(a)}},{name:"save",labelKey:"APEX.IG.SAVE",hide:!0,shortcut:"Ctrl+Alt+S",action:function(){var a,b=d.editableViewImpl.model.name;k.anyErrors(!1,b,!0)?i.alert(m("APEX.CORRECT_ERRORS"),function(){}):(a=k.save(null,null,b,!0),a&&(a.done(function(a){var b,c,e="",f="";if(a.errors)i.clearErrors(),i.showErrors(a.errors),e=Yc;else if(a.regions){for(b=0;b<a.regions.length;b++)c=a.regions[b],c.fetchedData&&c.fetchedData.successMessage&&(f&&(f+="<br>"),f+=c.fetchedData.successMessage);f||(f=n("CHANGES_SAVED")),i.showPageSuccess(f),e="success"}d._trigger(Fe,null,{status:e})}).fail(function(a,b,c){d._trigger(Fe,null,{status:"fail"})}).always(function(){d.actions.enable("save")}),d.actions.disable("save")))}},{name:"selection-add-row",label:f.text.addRowButton,hide:!0,action:function(){var a=d._currentViewImpl(),b=a.getSelectedRecords();return a.supports.singleRowView&&a.singleRowMode?void d.getActions().invoke("insert-record"):(a.focus(),a.model.insertNewRecord(null,b[b.length-1]),!0)}},{name:"single-row-view",label:n("SINGLE_ROW_VIEW"),icon:"icon-ig-single-row-view",hide:!0,action:function(a,b){var c,e=null,f=d.editMode,g=d._currentViewImpl();g.supports.singleRowView&&g.singleRowView$.length&&!g.singleRowMode&&(b&&(e=g.getContextRecord(b)[0]),e||(e=g.getSelectedRecords()[0]),f&&g.view$.grid("setEditMode",!1),g.singleRowMode=!0,g.view$.hide(),d._updateSummary(),c=d._toolbarFind("selection_submenu"),c&&(c.disabled=!0),g.singleRowView$.show().recordView("resize"),e&&g.setSelectedRecords([e]),f&&g.singleRowView$.recordView("setEditMode",!0))}},{name:"row-add-row",label:n("ADD_ROW"),icon:"icon-ig-add-row",hide:!0,action:function(a,b){var c=d._currentViewImpl(),e=c.getContextRecord(b);return c.focus(),c.model.insertNewRecord(null,e[0]),!0}},{name:"row-duplicate",label:n("DUPLICATE_ROW"),icon:"icon-ig-duplicate",hide:!0,action:function(a,b){var c=d._currentViewImpl(),e=c.getContextRecord(b);return c.model.copyRecords(e,null,e[0]),!0}},{name:"row-delete",label:n("DELETE_ROW"),icon:"icon-ig-delete",hide:!0,action:function(a,b){var c=d._currentViewImpl(),e=c.getContextRecord(b);c.model.deleteRecords(e)}},{name:"row-refresh",label:n("REFRESH_ROW"),icon:"icon-ig-refresh",hide:!0,action:function(a,b){var c=d._currentViewImpl(),e=c.getContextRecord(b);c.model.fetchRecords(e)}},{name:"row-revert",label:n("REVERT_CHANGES"),icon:"icon-ig-revert",hide:!0,action:function(a,b){var c=d._currentViewImpl(),e=c.getContextRecord(b);c.model.revertRecords(e)}}])},_initToolbar:function(){var a,b=this;delete this.options.config.toolbarData.toolbarFind,this.toolbar$=this._getElement("toolbar").toolbar({actionsContext:this.actions,data:this.options.config.toolbarData}),a=this.toolbar$.toolbar("findElement","actions_button_menu"),this.toolbar$.toolbar("findElement","column_filter_button").hide(),this.toolbar$.toolbar("findElement","search_field").hide(),this.toolbar$.toolbar("findElement","actions_button").hide(),this._currentReportSettings().defaultFilterColumn?this._setFilterColumn(this._currentReportSettings().defaultFilterColumn.columnId):this._setFilterColumn(null),a.on("menubeforeopen",function(){a.menu("find","rows").hide=b.options.config.pagination.type!==Kc})},_getId:function(a){return a?this.idPrefix+"_"+a:""},_getIdSelector:function(a){return"#"+this._getId(a)},_getElement:function(b){return a(this._getIdSelector(b))},_setEditMode:function(a){function b(){f.setEditMode(h.editMode),a&&setTimeout(function(){f.focus()},100)}var c,d,e={},f=this._currentViewImpl(),g=!1,h=this,i=this.options.config.columns;if(this.editMode=a,a){for(c=0;c<i.length;c++)i[c].validation&&i[c].validation.isRequired&&(e[i[c].id]=i[c]);if(Object.keys(e).length>0){for(d=this._getCurrentView().columns,c=0;c<d.length;c++)e[d[c].columnId]&&!d[c].isVisible&&(d[c].isVisible=!0,this._setOperationUpdate(d[c]),g=!0);g&&this._setReportSettings({changeIdentifier:"views.grid.columns"},b)}}g||b()},_configureView:function(a){this._currentReportSettings();this.viewsImpl[a].isConfigured()&&this._view(a,{fetchData:!0}),this.viewsImpl[a].openDialog()},_getColumn:function(a){return this.columnMap[a]},_getColumnByName:function(a){var b,d=this.options.config.columns;for(b=0;b<d.length;b++)if(d[b].name===a)return d[b];c.warn("No column exists with name: ",a)},_getColumnByStaticId:function(a){var b,d=this.options.config.columns;for(b=0;b<d.length;b++)if(d[b].staticId===a)return d[b];c.warn("No column exists with static ID: ",a)},_getTextTransformClass:function(a){var b,c=a.filter.textCase,d={lower:Ab,upper:Bb};return c&&(b=d[c.toLowerCase()]),b},_convertNamesToLabels:function(a){var b,c=this.options.config.columns,d={};for(b=0;b<c.length;b++)d[c[b].name]=c[b].heading.label;return a&&""!==a?a.replace(/(")(.*?)(")/g,function(a,b,c){return'"'+d[c]+'"'}):a},_convertLabelsToNames:function(a){var b,c=this.options.config.columns,d={};for(b=0;b<c.length;b++)d[c[b].heading.label]=c[b].name;return a&&""!==a?a.replace(/(")(.*?)(")/g,function(a,b,c){return'"'+d[c]+'"'}):a},_getColumnFormatMask:function(a){var b,d,e=this._getColumn(a).appearance.dateFormatMask;if(e&&""!==e){b=apex.jQuery.datepicker.parseDate("yymmdd","20160302");try{d=apex.jQuery.datepicker.parseDate(e,apex.jQuery.datepicker.formatDate(e,b)),apex.jQuery.datepicker.formatDate("yymmdd",b)!==apex.jQuery.datepicker.formatDate("yymmdd",d)&&(c.warn("Date format mask is unusable for a date picker - using default: ",e),e="yy-mm-dd")}catch(f){c.warn("Date format mask is unusable for a date picker - using default: ",e),e="yy-mm-dd"}}else c.warn("No date format mask exists for column - using default: ",a),e="yy-mm-dd";return e},_getColumnLabel:function(a){var b,d=this._getColumn(a);return d.isHidden?c.info("_getColumnLabel called on hidden column, check calling logic",a):b=d.heading.label,b},_isColumnFilterable:function(a){var b=this._getColumn(a);return!b.specialType&&b.filter&&!b.isHidden},_hasColumnFilterLov:function(a){var b=this._getColumn(a);return b.filter&&b.filter.hasLov},_getColumnType:function(a){this._getColumn(a);return Tb},_unfreezeLastColumnWhenFrozen:function(){var a,b,c,d=this._currentReportSettings().views.grid.columns,e=this._currentViewImpl().view$.grid("getColumns"),f=0,g=!1,h=!1;for(c=0;c<d.length;c++)d[c]&&d[c].isVisible&&!this._getColumn(d[c].columnId).isHidden&&d[c].seq>f&&(f=d[c].seq,g=c);if(g!==!1){for(a=d[g],c=0;c<e.length;c++)a.columnId!==e[c].id||e[c].hidden||(b=e[c]);a.isFrozen&&(a.isFrozen=!1,b.frozen=!1,h=!0,this._setOperationUpdate(a))}return h},_getCurrentView:function(){return this.options.savedReports[this.currentSavedReportIdx].views[this._view()]},_currentViewImpl:function(){return this.viewsImpl[this._view()]},_view:function(b,c){var d,e=this,f=this.options.config,g=this.actions,h=!1,i=!1,j=this._currentReportSettings();return b?void this._ifNoChangesDo(function(){var k,l,m,n,o,p,q,r=!1,s=[],t=a.extend({initialData:null,fetchData:!1},c);if(m=e._currentViewImpl(),e.viewsImpl[b].isConfigured()){j.currentView=b,l=e._currentViewImpl(),o=f.views[b].features,p=l.supports,m&&m.view$&&m.hide(),l.view$?(l.show(),n=l.model.getOption("regionData"),n.view=b,e._setReportSettings({changeIdentifier:"view.change"})):(e._getElement(l.elementId).show(),l.view$=e._getElement(l.elementId),l.setColumnConfig({baseModelColumns:e.baseModelColumns,igConfig:e.options.config,ig:e,currentReportSettings:j}),t.viewImpl=l,e._setModel(t),e.options.config&&t.viewImpl.supports.edit&&(e.editableViewImpl=t.viewImpl),l.initView({ig$:e.element,ig:e,igConfig:e.options.config,currentReportSettings:j}),e._setInitialSelection(0),r=!0),e._refreshReportSettings(),e._updateSummary(),s.push({labelKey:"APEX.IG.ALL_TEXT_COLUMNS",value:null});for(k in l.modelColumns)if(l.modelColumns.hasOwnProperty(k)&&l.modelColumns[k].id&&e._isColumnFilterable(l.modelColumns[k].id)&&(h=!0,a.inArray(e._getColumn(l.modelColumns[k].id).filter.dataType,[Qd,Td])!==-1))for(d=0;d<e._getColumn(l.modelColumns[k].id).filter.operators.length;d++)a.inArray(e._getColumn(l.modelColumns[k].id).filter.operators[d].name,["$perform$","C"])!==-1&&(i=!0,s.push({label:l.modelColumns[k].label,value:l.modelColumns[k].id}));f.filter.oracleText&&(i=!0),g.lookup("filter-column").choices=s,g.updateChoices("filter-column"),e._updateChangeViewActions(),e._toggleEnableAction(i,"search"),f.toolbar&&f.toolbar.searchField&&f.toolbar.columnSelection&&e.getToolbar().toolbar("findElement","column_filter_button").prop(ec,!i),r||l.resize(),e._toggleEnableAction(f.editable&&p.edit,["edit","save","selection-add-row","selection-add-row","row-add-row","selection-duplicate","row-duplicate","selection-delete","row-delete","selection-revert","row-revert","selection-refresh","row-refresh"]),e._toggleEnableAction(f.editable&&p.edit&&p.singleRowView,["insert-record","delete-record","refresh-record","revert-record","duplicate-record"]),e._toggleEnableAction(p.controlBreak&&o.controlBreak,"show-control-break-dialog"),e._toggleEnableAction(p.aggregation&&o.aggregate,"show-aggregate-dialog"),e._toggleEnableAction(p.highlight&&o.highlight,"show-highlight-dialog"),e._toggleEnableAction(p.changeRowsPerPage&&o.changeRowsPerPage,"change-rows-per-page"),e._toggleEnableAction(p.singleRowView&&o.singleRowView,"single-row-view"),e._toggleShowAction(l.canCopy2Clipboard(),"selection-copy"),e._toggleShowAction(p.cellSelection,"selection-mode"),q=e._toolbarFind("selection_submenu"),q&&(q.disabled=!p.selection),e._toggleEnableAction(p.configurableColumns,["show-columns-dialog","stretch-columns"]),e._toggleEnableAction(p.filter&&f.features.filter,"show-filter-dialog"),h||e._toggleEnableAction(!1,"show-filter-dialog"),e._toggleEnableAction(p.sort,"show-sort-dialog"),e._toggleEnableAction(p.download&&f.features.download,"show-download-dialog"),e._trigger(Be,null,{view:b,created:r}),e._selectionChange(null),e._forEachView(function(a,c){c.viewChanged(a===b,e,f)})}else e.viewsImpl[b].openDialog()}):j.currentView},_destroyAllModels:function(){var a=this;this._forEachView(function(b,c){a._setModel({viewImpl:c,remove:!0}),c.view$&&(c.destroyView(a),c.view$=null)})},_report:function(a){var b,c,d;if(!a)return this._currentReportSettings().id;for(this._destroyAllModels(),i.hidePageSuccess(),b=0;b<this.options.savedReports.length;b++)if(this.options.savedReports[b].id===a){this.currentSavedReportIdx=b;break}c=this._currentViewImpl(),this._forEachView(function(a,b){b.view$&&b.hide()}),c.view$||(c.view$=this._getElement(c.elementId)),this._updateSummary(),c.view$.show(),c.setColumnConfig({baseModelColumns:this.baseModelColumns,igConfig:this.options.config,currentReportSettings:this._currentReportSettings(),ig:this}),this._setModel({viewImpl:c}),c.initView({ig$:this.element,ig:this,igConfig:this.options.config,currentReportSettings:this._currentReportSettings()}),this._updateActions(),this._updateChangeViewActions(),this._clearToolbarSearch(),this._trigger(Be,null,{view:c.internalIdentifier,created:!0}),this._refreshReportSettings(),d=c.model.getOption("regionData"),d.reportId=this._report(),d.view=this._view(),this.refresh(),this._trigger(Ce,null,{report:this._report()})},_currentReportSettings:function(){return this.options.savedReports[this.currentSavedReportIdx]},_updateSummary:function(){var a=this.getCurrentView(),b=a.title,c=this._currentReportSettings(),d=c.name;d||c.type!==oc||(d=n("PRIMARY_REPORT")),a.supports.singleRowView&&a.singleRowMode&&(b+=" ("+m("SINGLE_ROW_VIEW")+")"),this._getElement("summary").text(e.formatMessage("APEX.IG.SUMMARY",d,b))},_shortenString:function(a,b){var c=b?b:20;return a.length>c?a.substr(0,c)+"...":a},_adjustControlBreakSort:function(){var b,c,d=[],e=this,f=e._getCurrentView().columns;for(b=0;b<f.length;b++)!f[b].sort||null===f[b].sort.order||f[b]["break"]&&f[b]["break"].isEnabled||d.push({columnId:f[b].columnId,order:f[b].sort.order});for(d.sort(function(a,b){return a.order-b.order}),b=0;b<d.length;b++)for(c=0;c<f.length;c++)d[b].columnId===f[c].columnId&&a.extend(e._currentViewImpl().modelColumns[e._getColumn(f[c].columnId).name],{sortIndex:b+1})},_getSettingLabel:function(b,c){function d(a,b){return a&&null!==a.match(/^\d{14}/)?apex.jQuery.timepicker.formatCanonicalDate(s(a),b):""}var f,g,h="APEX.IG.",i=[jd,kd,nd,od,ld,md,pd,qd,td,ud,Ed,Fd,Gd,Hd],j=[rd,sd],k=[yd,zd],l=[Ad,Bd,Cd,Dd];switch(b){case uc:switch(c.type){case Tb:h+="X.",a.inArray(c.operator,i)>-1&&(h+=te[c.operator]+".Y",f=a.inArray(this._getColumn(c.columnId).filter.dataType,[Sd,Ud,Vd,Wd])>-1?e.formatMessage(h,this._getColumnLabel(c.columnId),d(c.hiddenValue?c.hiddenValue:c.value,this._getColumnFormatMask(c.columnId))):e.formatMessage(h,this._getColumnLabel(c.columnId),c.value)),a.inArray(c.operator,[vd,wd])>-1&&(h+=te[c.operator]+".Y",f=e.formatMessage(h,this._getColumnLabel(c.columnId),c.value.split("").join(xd+" "))),a.inArray(c.operator,j)>-1&&(h+=te[c.operator],f=e.formatMessage(h,this._getColumnLabel(c.columnId))),a.inArray(c.operator,k)>-1&&(h+=te[c.operator]+".Y.AND.Z",g=c.hiddenBetween||c.hiddenAnd?[c.hiddenBetween,c.hiddenAnd]:c.value.split(Rc),f=a.inArray(this._getColumn(c.columnId).filter.dataType,[Sd,Ud,Vd,Wd])>-1?e.formatMessage(h,this._getColumnLabel(c.columnId),d(g[0],this._getColumnFormatMask(c.columnId)),d(g[1],this._getColumnFormatMask(c.columnId))):e.formatMessage(h,this._getColumnLabel(c.columnId),g[0],g[1])),a.inArray(c.operator,l)>-1&&(g=c.value.split(Rc),2!==g.length&&(g=["","MI"]),"1"===g[0]?(h+=te[c.operator]+"_"+we[g[1]],f=e.formatMessage(h,this._getColumnLabel(c.columnId))):(h+=te[c.operator]+".Y."+we[g[1]]+"S",f=e.formatMessage(h,this._getColumnLabel(c.columnId),g[0])));break;case Ub:f=c.name;break;case Sb:h+="SEARCH_FOR.X",f=e.formatMessage(h,c.value)}break;case zc:f=this._getColumnLabel(c.columnId);break;case yc:f=n(c["function"])+" ("+this._getColumnLabel(c.columnId)+")";break;case vc:f=this._shortenString(c.name?c.name:this._getColumnLabel(c.condition.columnId));break;case wc:1===c.minsAgo?(h+="REPORT_DATA_AS_OF_ONE_MINUTE_AGO",f=m(h)):(h+="REPORT_DATA_AS_OF.X.MINUTES_AGO",f=e.formatMessage(h,c.minsAgo))}return f},_getSettingSummaryLabel:function(a,b){var c,d="APEX.IG.";switch(a){case uc:switch(b.type){case Tb:c=this._getColumnLabel(b.columnId);break;case Ub:c=this._shortenString(b.name);break;case Sb:c="'"+this._shortenString(b.value,18)+"'"}break;case zc:c=this._getColumnLabel(b.columnId);break;case vc:c=this._shortenString(b.name?b.name:this._getColumnLabel(b.condition.columnId));break;case wc:1===b.minsAgo?(d+="ONE_MINUTE_AGO",c=m(d)):(d+="X.MINUTES_AGO",c=e.formatMessage(d,b.minsAgo));break;case yc:c=this._shortenString(this._getColumnLabel(b.columnId))}return c},_getTotalReportSettings:function(){var a,b=0,c=this._getCurrentView(),d=this._currentReportSettings();switch(d.filters&&(b+=d.filters.length),d.flashback&&(b+=1),this._view()){case gc:for(a=0;a<c.columns.length;a++)c.columns[a]["break"]&&(b+=1);c.highlights&&(b+=c.highlights.length),c.aggregations&&(b+=c.aggregations.length);break;case jc:c&&(b+=1)}return b},_renderReportSettings:function(b){function c(b){function c(b,c){var d={},f=a.extend({type:"",id:"",active:!1,label:"",excludeToggle:!1,isInvalid:!1},c),g=ja+" "+ka+f.type;d.setting=f.type,d["setting-id"]=f.id,f.isInvalid&&(g+=" "+vb),b.markup("<li").attr($c,g).attr("role","group").attr(Hb,"control_text"+f.id).markup(">"),b.markup("<span").attr($c,la).markup(">"),f.excludeToggle||(F(b,{id:h._getId("control_"+f.id),cssClasses:oa,checked:f.active,data:d,disabled:f.isInvalid}),I(b,{labelFor:h._getId("control_"+f.id),cssClasses:pa,label:n("TOGGLE"),labelTextHidden:!0})),b.markup("</span>"),b.markup("<span").attr($c,la).markup(">").markup("<span").attr($c,lb+" "+qa+" "+Fa+w(f.type)).markup(">").markup("</span>").markup("</span>"),b.markup("<span").attr($c,la+" "+ma).markup(">"),f.isInvalid?b.markup("<span").attr("id","control_text"+f.id).attr($c,ra).markup(">").markup(f.label).markup("</span>"):(b.markup("<a href='#'").attr($c,ra).attr("data-setting",f.type).attr("data-setting-id",f.id).markup(">"),b.markup("<span").attr($c,zb).markup(">").content(n("EDIT")).markup("</span>"),b.markup("<span").attr("id","control_text"+f.id).markup(">").markup(f.label).markup("</span>"),b.markup("</a>")),b.markup("</span>"),b.markup("<span").attr($c,la+" "+na).markup(">"),D(b,{buttonClass:eb+" "+fb+" "+Ca+" "+Ea,iconOnly:!0,icon:ob,label:e.formatMessage("APEX.IG.REMOVE_CONTROL",ve[f.type]),data:d}),b.markup("</span>"),b.markup("</li>")}if(b.markup("<div").attr($c,rb).markup(">"),b.markup("<ul").attr($c,ia).markup(">"),j.views.chart&&h._view()===jc&&c(b,{type:jc,excludeToggle:!0,label:n("EDIT_CHART")}),j.filters)for(f=0;f<j.filters.length;f++)j.filters[f].operation!==Oc&&c(b,{type:uc,id:j.filters[f].id,active:j.filters[f].isEnabled,label:h._getSettingLabel(uc,j.filters[f]),isInvalid:j.filters[f].isInvalid});if(h._currentViewImpl().supports.controlBreak&&i){for(f=0;f<i.columns.length;f++)i.columns[f]["break"]&&i.columns[f]["break"].operation!==Oc&&g.push(i.columns[f]);if(g.length>0)for(g.sort(function(a,b){var c=a["break"].order,d=b["break"].order;return c<d?-1:c>d?1:0}),f=0;f<g.length;f++)c(b,{type:zc,id:g[f].columnId,active:g[f]["break"].isEnabled,label:h._getSettingLabel(zc,g[f])})}if(h._currentViewImpl().supports.highlight&&i.highlights)for(f=0;f<i.highlights.length;f++)i.highlights[f].operation!==Oc&&c(b,{type:vc,id:i.highlights[f].id,active:i.highlights[f].isEnabled,label:h._getSettingLabel(vc,i.highlights[f]),isInvalid:i.highlights[f].isInvalid});if(h._currentViewImpl().supports.aggregation&&i.aggregations)for(f=0;f<i.aggregations.length;f++)i.aggregations[f].operation!==Oc&&c(b,{type:yc,id:i.aggregations[f].id,active:i.aggregations[f].isEnabled,label:h._getSettingLabel(yc,i.aggregations[f])});j.flashback&&j.flashback.operation!==Oc&&c(b,{type:wc,active:j.flashback.isEnabled,label:h._getSettingLabel(wc,j.flashback)}),b.markup("</ul></div>")}function d(b){function c(a,b,c){var g,i,j,k="",l=[],m=!0;for(g=0;g<c.length;g++)c[g].operation!==Oc&&(b===zc?i=c[g]["break"].isEnabled:(i=c[g].isEnabled,j=c[g].isInvalid),j?f++:i?(l.push(g),m||(k+=", "),k+=h._getSettingSummaryLabel(b,c[g]),m=!1):e++);l.length>0&&d(a,{type:b,id:c[l[0]],count:l.length,label:k})}function d(b,c){var d=a.extend({type:"",id:"",count:0,label:""},c);b.markup("<li").attr($c,wa+" "+xa+d.type).markup(">"),b.markup("<a href='#'").attr($c,ya).attr("data-setting",d.type).optionalAttr("data-setting-id",d.id).markup(">"),b.markup("<span").attr($c,za).markup(">"),b.markup("<span").attr($c,lb+" "+Fa+w(d.type)).markup("></span>"),(d.count>1||d.type===mc||d.type===nc)&&b.markup("<span").attr($c,Aa).markup(">").content(d.count).markup("</span>"),b.markup("</span>"),b.markup("<span").attr($c,Ba).markup(">").content(d.label).markup("</span>"),b.markup("</a>")}var e=0,f=0;b.markup("<div").attr($c,va),j.reportSettingsArea===bc&&b.attr("style","display:none;"),b.attr("id",h._getId("report_settings_summary")),k||b.attr("style","display:none;"),b.markup(">"),b.markup("<ul").attr($c,ua).markup(">"),j.views.chart&&h._view()===jc&&d(b,{type:jc,label:n("EDIT_CHART")}),j.filters&&c(b,uc,j.filters),g.length>0&&c(b,zc,g),i.highlights&&c(b,vc,i.highlights),i.aggregations&&c(b,yc,i.aggregations),j.flashback&&(j.flashback.isEnabled?d(b,{type:wc,label:h._getSettingSummaryLabel(wc,j.flashback)}):e++),e>0&&d(b,{type:mc,count:e,label:n(1===e?"INACTIVE_SETTING":"INACTIVE_SETTINGS")}),f>0&&d(b,{type:nc,count:f,label:n(1===e?"INVALID_SETTING":"INVALID_SETTINGS")}),b.markup("</ul></div>")}var f,g=[],h=this,i=this._getCurrentView(),j=this._currentReportSettings(),k=this._getTotalReportSettings()>0;b.markup("<div").attr($c,pb+" "+sa).attr("id",this._getId("report_settings")),k||b.attr("style","display:none;"),b.markup(">"),b.markup("<div").attr($c,qb).markup(">"),b.markup("<h3").attr($c,zb).markup(">").content(n("REPORT_SETTINGS")).markup("</h3>"),D(b,{buttonClass:eb+" "+Ca+" "+Da}),b.markup("</div>"),c(b),d(b),b.markup("</div>")},_initReportSettings:function(){function b(a,b,d){f.reportSettingsArea===a&&(f.reportSettingsArea=b,c._setOperationUpdate(f),c._setReportSettings(),c._getElement("report_settings_summary")[d](),c.resize())}var c=this,d=this.options.config.maxHeight,e=this._getElement("report_settings"),f=c._currentReportSettings();this._getTotalReportSettings()>0&&(this._on(e,{"click a.a-IG-controlsLabel":function(b){var c=a(b.currentTarget);this._openDialog(c.data("setting"),{id:c.data("setting-id")+""}),b.preventDefault()},"click a.a-IG-reportSummary-label":function(b){var c=a(b.currentTarget),d=c.data("setting");d===mc||d===nc?e.collapsible(ac):this._openDialog(d,{id:c.data("setting-id")+""}),b.preventDefault()},"click input.a-IG-controlsCheckbox":function(b){var c,d,e=a(b.target),f=e.prop(fc),g=e.data("setting"),h=e.data("setting-id")+"";switch(g){case uc:this.updateFilter(h,{isEnabled:f});break;case yc:this.updateAggregate(h,{isEnabled:f});break;case vc:for(c=0;c<this._getCurrentView().highlights.length;c++)if(d=this._getCurrentView().highlights[c],d.id===h){
d.isEnabled=f,d.operation=Nc;break}this._setReportSettings({refreshModel:!0});break;case zc:this.updateControlBreak(h,{isEnabled:f});break;case wc:this.updateFlashback({isEnabled:f})}},"click button.a-IG-button--remove":function(b){var c=a(b.currentTarget);b.preventDefault();var d,e=c.data("setting"),f=c.data("setting-id")+"",g=!0;switch(e){case uc:this.deleteFilter(f);break;case yc:this.deleteAggregate(f);break;case vc:for(d=0;d<this._getCurrentView().highlights.length;d++)if(this._getCurrentView().highlights[d].id===f){this._getCurrentView().highlights[d].operation=Oc,this._getCurrentView().highlights[d].isEnabled||(g=!1);break}this._setReportSettings({refreshModel:g});break;case zc:this.deleteControlBreak(f);break;case wc:this.deleteFlashback();break;case jc:this.deleteChart()}}}),e.collapsible({content:"div."+rb,collapsed:f.reportSettingsArea===cc,collapse:function(){b(bc,cc,$b)},expand:function(){b(cc,bc,_b)}}),d&&e.find(".a-Collapsible-content").css({"max-height":(d-a(V,this.element).outerHeight())/3+"px",overflow:"auto"}))},_currentViewColumn:function(b,c){var d,e,f=this._getCurrentView().columns;for(d=0;d<f.length;d++)if(f[d].columnId===b){e=f[d];break}return a.isPlainObject(c)&&(e=a.extend(!0,e,c),this._setOperationUpdate(e)),e},_refreshReportSettings:function(){var a,c=this._getElement("report_settings"),d=b.htmlBuilder();c[0]&&(a=c[0].clientHeight,this._renderReportSettings(d),c.replaceWith(d.toString()),this._initReportSettings(),a!==this._getElement("report_settings")[0].clientHeight&&this.resize())},_defaultAjaxRegionData:function(b){var c=this.options.config,d=a.extend(!0,{id:c.regionId,ajaxIdentifier:c.ajaxIdentifier,ajaxColumns:c.ajaxColumns,reportId:this._report(),view:this._view()},b);return this._isCurrentlyEditable()&&(d.allowedOperations=c.editable.allowedOperations["protected"]),d},_call:function(a,b){var c=this.options.config,e=this._defaultAjaxRegionData(a),f={regions:[e]};return c.parentRegionStaticId&&this.parentItemValues.length>0&&(f.regions[0].parentItems={values:this.parentItemValues}),d.plugin(f,b)},_setReportSettings:function(b,c){function d(a){var b;for(b=0;b<a.length;b++)a[b].operation||(a.splice(b,1),b-=1)}var e,f,g=this.options.config,h=this,j=a.extend({refreshView:!1,refreshModel:!1,affectsOtherViewsModels:!1,refreshColumns:!1,changeIdentifier:""},b);return e=a.extend(!0,{},this._currentReportSettings()),e.filters&&e.filters.length>0&&d(e.filters),g.views.grid&&d(e.views.grid.columns),g.views.icon&&g.views.icon.columns&&d(e.views.icon.columns),g.views.detail&&g.views.detail.columns&&d(e.views.detail.columns),f={success:function(a){var b,d=h._defaultSavedReport(a.regions[0].setReportSettings[0]);i.hidePageSuccess(),h._view()!==d.currentView&&h._view(d.currentView,{fetchData:!0}),h.options.savedReports[h.currentSavedReportIdx]=d,h._updateChangeReportAction(),h._updateChangeViewActions(),h._updateReportSettingsActions(),h._refreshReportSettings(),b=h._currentViewImpl().model.getOption("regionData"),b.reportId=h._report(),b.view=h._view(),h._forEachView(function(a,b){b.setReportOptions(h,h._currentReportSettings(),j.changeIdentifier)}),j.refreshColumns&&h._currentViewImpl().refreshColumns(),j.refreshView?h._currentViewImpl().refresh():j.refreshModel&&(j.affectsOtherViewsModels?h._forEachView(function(a,b){b.model&&b.model.clearData()}):h._currentViewImpl().model.clearData()),c&&c(),h._trigger(De,null,{report:d.id})}},"view.change"===j.changeIdentifier&&(f.queue={name:"set.report.settings.replace",action:"replace"}),this._call({setReportSettings:[e]},f)},_downloadReport:function(a){var b,e,f=this.options.config,h=this;b={pageItems:f.itemsToSubmit,regions:[{id:f.regionId,ajaxIdentifier:f.ajaxIdentifier,ajaxColumns:f.ajaxColumns,reportId:this._report(),view:this._view(),download:a}],salt:$v("pSalt")},e=g(f.regionStaticId).getParentItems(),e&&(b.regions[0].parentItems=e),a.email?d.plugin(b,{dataType:Lb,success:function(a){i.showPageSuccess(n("EMAIL_SENT"))}}):d.plugin(b,{success:function(a){var b;apex.message.showPageSuccess(n("FILE_PREPARED")),b=d.ajaxUrl({regions:[{id:f.regionId,reportId:h._report(),ajaxIdentifier:f.ajaxIdentifier,downloadFileId:a.regions[0].download.id}],salt:$v("pSalt")}),c.info("Calling URL to get file:",b),c.info("URL length:",b.length),window.open(b)}})},_saveReport:function(a,b){var d,e={},f=this,g=this.options.config;return g.features.saveReport?(e.saveReport=a,g.features.saveReport.publicReportCs&&(e.publicReportCs=g.features.saveReport.publicReportCs),this._call(e,{success:function(a){var c;switch(f.options.savedReports=f._defaultSavedReports({reports:a.regions[0].savedReports}),f._updateChangeReportAction(),f._updateReportSettingsActions(),f._refreshReportSettings(),c=f._currentViewImpl().model.getOption("regionData"),c.reportId=f._report(),c.view=f._view(),b){case Mc:case Nc:switch(f._currentReportSettings().type){case oc:d=n("REPORT.SAVED.DEFAULT");break;case pc:d=n("REPORT.SAVED.ALTERNATIVE");break;case qc:d=n("REPORT.SAVED.PRIVATE");break;case rc:d=n("REPORT.SAVED.PUBLIC")}break;case Oc:d=n("REPORT.DELETED")}i.showPageSuccess(d),b===Oc&&f.refresh()}})):void c.warn("Unable to save report settings because the configuration disallows it.")},_getFilterValues:function(b,c,d){var e=this;return this._call({getFilterValues:{columnId:b,columnType:Tb,respectFilters:c}},{success:function(b){a.isFunction(d)&&d.call(e,b)}})},_updateChangeReportAction:function(){var a,b,c,d,e=[],f=this.options.config,g=this.options.savedReports,h=this.actions;if(g.length>1){for(a=0;a<g.length;a++){switch(b=g[a],d=b.name,b.type){case oc:c="APEX.IG.SAVED_REPORT_DEFAULT",b.name||(d=n("PRIMARY_REPORT"));break;case pc:c="APEX.IG.SAVED_REPORT_DEFAULT";break;case qc:c="APEX.IG.SAVED_REPORT_PRIVATE";break;case rc:c="APEX.IG.SAVED_REPORT_PUBLIC"}e.push({group:m(c),label:d,value:b.id})}this.actions.lookup("change-report").hide=!(!f.toolbar||f.toolbar&&f.toolbar.savedReports)}else this.actions.lookup("change-report").hide=!0;this.actions.update("change-report"),h.lookup("change-report").choices=e,h.updateChoices("change-report")},_updateAction:function(a,b){this.actions.lookup(b)&&this.actions[a](b)},_toggleEnableAction:function(a,b){this._toggleAction("enable",a,b)},_toggleShowAction:function(a,b){this._toggleAction($b,a,b)},_toggleAction:function(b,c,d){var e,f=this;switch(b){case $b:e=c?$b:_b;break;case"enable":e=c?"enable":"disable"}a.isArray(d)?a.each(d,function(){f._updateAction(e,this)}):this._updateAction(e,d)},_updateToolbarElements:function(){var a=this.options.config,b=a.toolbar;b&&(b.searchField&&(b.columnSelection&&this.toolbar$.toolbar("findElement","column_filter_button").show(),this.toolbar$.toolbar("findElement","search_field").show()),b.actionMenu&&this.toolbar$.toolbar("findElement","actions_button").show())},_updateActions:function(){var a=this,b=this.options.config,c=b.features,d=!1,e=!1,f=!1,g=this._isCurrentlyEditable(),h=b.editable.allowedOperations,i=g&&h.create,j=g&&h[Yb],k=g&&(h.update||h[Yb]),l=b.toolbar,m=g&&(h.update||h.create)&&(!l||l&&l.editing),n=g&&(h.create||h.update||h[Yb])&&(!l||l&&l.save),o=!l||l&&l.searchField,p=!l||l&&l.reset,q=b.pagination.type===Kc;c.saveReport&&this._updateChangeReportAction(),this._toggleShowAction(c.filter,"show-filter-dialog"),this._toggleShowAction(c.download,"show-download-dialog"),this._toggleShowAction(c.flashback,"show-flashback-dialog"),this._updateReportSettingsActions(),this._toggleShowAction(i,["selection-add-row","row-add-row","selection-duplicate","row-duplicate"]),this._toggleShowAction(j,["selection-delete","row-delete"]),this._toggleShowAction(k,["selection-revert","row-revert"]),this._toggleShowAction(g,["selection-refresh","row-refresh"]),this._toggleShowAction(m,"edit"),this._toggleShowAction(n,"save"),this._toggleShowAction(o,"search"),this._toggleShowAction(p,"reset-report"),this._forEachView(function(c,h){h.supports.singleRowView&&b.views[c].features.singleRowView&&(d=!0),h.supports.highlight&&b.views[c].features.highlight&&(e=!0),h.supports.configurableColumns&&null===b.views[c].features.stretchColumns&&(f=!0),h.updateActions({ig:a,editable:g,canDelete:j,canCreate:i,canEdit:m})}),this._toggleShowAction(d,"single-row-view"),this._toggleShowAction(i&&d,["insert-record","duplicate-record"]),this._toggleShowAction(j&&d,["delete-record"]),this._toggleShowAction(k&&d,["revert-record"]),this._toggleShowAction(g&&d,["refresh-record"]),this._toggleShowAction(e,"show-highlight-dialog"),this._toggleShowAction(q,"change-rows-per-page"),this._toggleShowAction(f,"stretch-columns")},_updateReportSettingsActions:function(){var a=this._currentReportSettings(),b=this.options.config.features.saveReport,c=!a.isReadOnly;this._toggleEnableAction(b&&c&&a.baseReportId,"save-report"),this._toggleEnableAction(b,"show-save-report-as-dialog"),this._toggleEnableAction(b&&c,"show-edit-report-dialog"),this._toggleEnableAction(b&&c&&a.type!==oc,"delete-report"),this._toggleEnableAction(a.baseReportId,"reset-report")},_updateChangeViewActions:function(){var a=[],b=this.actions;this._forEachView(function(b,c){c.isConfigured()&&a.push({label:c.title,value:b,icon:c.icon})}),this._toggleShowAction(a.length>1,"change-view"),b.lookup("change-view").choices=a,b.updateChoices("change-view")},_updateSelectionActions:function(){var a,b=this.options.config,c=this._currentViewImpl();b.editable&&c.supports.edit&&(a=this._isCurrentlyEditable()&&0!==c.getSelectedRecords().length,this._toggleEnableAction(a,["selection-duplicate","selection-refresh","selection-delete","selection-revert"]))},_setFilterColumn:function(a){var b;this.currentFilterColumnId=a,b=a?e.formatMessage("APEX.IG.SEARCH.COLUMN",this._getColumn(a).heading.label):n(this.options.config.filter.oracleText?"SEARCH.ORACLE_TEXT":"SEARCH.ALL_COLUMNS"),this.toolbar$.toolbar("findElement","search_field").attr({placeholder:b,title:b})},_defaultIGConfig:function(){var b,c,d=this.options.config;if(d.filter.maxRowCount&&(d.text.moreDataFound=e.formatMessage("APEX.IG.MORE_DATA_FOUND",d.filter.maxRowCount)),d.columnGroups.length>0)for(b=0;b<d.columnGroups.length;b++)c=a.extend({id:"",heading:"",label:""},d.columnGroups[b]),c.label||(c.label=c.heading),d.columnGroups[b]=c;d.editable&&(d.editable=a.extend(!0,{allowedOperations:{create:!0,update:!0,"delete":!0,"protected":""},autoAddRow:!0},d.editable),d.editable.allowedOperations.create||(d.editable.autoAddRow=!1)),d.features.download&&(d.features.download=a.extend({formats:[],email:!0},d.features.download)),d.views.icon&&(d.views.icon=a.extend(!0,{disabled:!1,labelColumn:"",features:{sort:!0,highlight:!0}},d.views.icon)),d.views.detail&&(d.views.detail=a.extend(!0,{disabled:!1,beforeRows:"",row:"",afterRows:"",features:{sort:!0,controlBreak:!0}},d.views.detail))},_defaultColumns:function(){var b,c,d=this.options.config.columns;for(b=0;b<d.length;b++)c=a.extend(!0,{id:"",name:"",staticId:"",dataType:Qd,specialType:"",isHidden:!1,isReadOnly:!0,heading:{heading:"",label:"",alignment:Wb},layout:{columnAlignment:Vb,groupId:"",useGroupFor:"both"},appearance:{columnCssClasses:"",formatExample:""},validation:{isRequired:!1,restrictedCharacters:""},link:{text:"",attributes:""},filter:{operators:[{name:"$std$"},{name:"$perform$"}],dateRanges:gd,isRequired:!1,hasLov:!0,dataType:Qd},accessibility:{usedAsRowHeader:!1},features:{canHide:!0,highlight:!0,compute:!0,sort:!0,controlBreak:!0,aggregate:!0,groupBy:!0},isPrimaryKey:!1,parentColumnName:"","default":{value:"",duplicate:!0},escape:!0,helpid:""},d[b]),c.heading.label||(c.heading.label=c.heading.heading),c.filter.dataType!==Qd||c.filter.textCase||(c.filter.textCase=Pd),d[b]=c},_createBaseColumnMap:function(){var a,b,c,d=this.options.config.columns,e=0;for(a=0;a<d.length;a++)b=d[a],c=this.baseModelColumns[b.id]={index:a-e,hidden:b.isHidden,readonly:b.isReadOnly,escape:b.escape,id:b.id},b.isHidden?c.canHide=!1:(c.heading=b.heading.heading,c.headingAlignment=b.heading.alignment,c.label=b.heading.label,c.alignment=b.layout.columnAlignment),b.parentColumnName&&(c.parentField=b.parentColumnName,this.parentColumnNames.push(b.parentColumnName)),this.columnMap[b.id]=b,b.isPrimaryKey&&this.primaryKeyColumns.push(b.name),"actions"===b.specialType&&(e+=1);this.baseModelColumns[Uc]={index:a-e,seq:a,hidden:!0,canHide:!1}},_defaultSavedReport:function(b){var c,d,e,f,g,h,i,j,k,l,m={},n=this.options.config,o=n.views;if(d=a.extend(!0,{id:"",baseReportId:"",name:"",isCurrent:!1,type:oc,isReadOnly:!0,authorizationId:"",rowsPerPage:null,showRowNumbers:!1,reportSettingsArea:cc,defaultFilterColumn:!1,flashback:!1,versionNumber:"",filters:[],currentView:gc,views:{grid:!1,chart:!1,icon:!1,detail:!1}},b),!o[d.currentView])for(c in o)if(o.hasOwnProperty(c)&&o[c]){d.currentView=c;break}if(d.flashback&&(d.flashback=a.extend({minsAgo:null,isEnabled:!0},d.flashback)),d.filters.length>0)for(c=0;c<d.filters.length;c++)e=a.extend(!0,{id:"",type:Sb,isCaseSensitive:!1,value:"",isEnabled:!0},d.filters[c]),e.columnId&&!e.columnType&&(e.columnType=Tb),e.type!==Tb||this._getColumn(e.columnId)?d.filters[c]=e:(d.filters.splice(c,1),c-=1);if(d.views.grid){for(d.views.grid=a.extend(!0,{editMode:!1,singleRowView:{excludeNullValues:!1,onlyDisplayColumns:!0},columns:[],aggregations:[],highlights:[],initialBreakState:cc,stretchColumns:!0},d.views.grid),i=d.views.grid.columns,c=0;c<i.length;c++)m[i[c].columnId]=1;for(c=0;c<n.columns.length;c++)l=n.columns[c],m[l.id]||i.push({columnId:l.id,operation:Mc,isVisible:!1});if(i.length>0)for(c=0;c<i.length;c++)h=a.extend({seq:null,columnType:Tb,columnId:"",isVisible:!0,isFrozen:!1,width:null,priority:null,"break":!1,sort:!1},i[c]),h.seq=c+1,h["break"]&&(h["break"]=a.extend({order:null,isEnabled:!0,direction:Ec,nulls:Hc},h["break"])),h.sort&&(h.sort=a.extend({order:null,direction:Ec,nulls:Hc},h.sort)),this._getColumn(h.columnId)?i[c]=h:(i.splice(c,1),c-=1);if(d.views.grid.aggregations.length>0)for(c=0;c<d.views.grid.aggregations.length;c++)f=a.extend({id:"","function":"",columnType:Tb,columnId:"",tooltip:"",showGrandTotal:!0,isEnabled:!0},d.views.grid.aggregations[c]),f.label||(f.label=f["function"]),this._getColumn(f.columnId)?d.views.grid.aggregations[c]=f:(d.views.grid.aggregations.splice(c,1),c-=1);if(d.views.grid.highlights.length>0)for(c=0;c<d.views.grid.highlights.length;c++)g=a.extend(!0,{id:"",name:"",type:Sb,columnType:Tb,columnId:"",backgroundColor:"",textColor:"",condition:{type:Tb,columnType:Tb,columnId:"",operator:"",isCaseSensitive:!1,value:"",expression:""},isEnabled:!0},d.views.grid.highlights[c]),g.type===Tb&&!this._getColumn(g.columnId)||g.condition.type===Tb&&!this._getColumn(g.condition.columnId)?(d.views.grid.highlights.splice(c,1),c-=1):d.views.grid.highlights[c]=g}if(d.views.icon&&(d.views.icon=a.extend(!0,{columns:[],initialBreakState:cc},d.views.icon),d.views.icon.columns.length>0))for(c=0;c<d.views.icon.columns.length;c++)h=a.extend({seq:null,columnType:Tb,columnId:"",isVisible:!0,"break":!1,sort:!1},d.views.icon.columns[c]),h["break"]&&(h["break"]=a.extend({order:null,isEnabled:!0,direction:Ec,nulls:Hc},h["break"])),h.sort&&(h.sort=a.extend({order:null,direction:Ec,nulls:Hc},h.sort)),d.views.icon.columns[c]=h;if(d.views.detail&&(d.views.detail=a.extend(!0,{columns:[],initialBreakState:cc},d.views.detail),d.views.detail.columns.length>0))for(c=0;c<d.views.detail.columns.length;c++)h=a.extend({seq:null,columnType:Tb,columnId:"",isVisible:!0,"break":!1,sort:!1},d.views.detail.columns[c]),h["break"]&&(h["break"]=a.extend({order:null,isEnabled:!0,direction:Ec,nulls:Hc},h["break"])),h.sort&&(h.sort=a.extend({order:null,direction:Ec,nulls:Hc},h.sort)),d.views.detail.columns[c]=h;if(d.views.chart){d.views.chart=a.extend(!0,{type:Yd,orientation:ie,stack:le},d.views.chart),d.views.chart.axis&&(d.views.chart.axis=a.extend({label:"",value:"",valueDecimalPlaces:""},d.views.chart.axis));for(j in d.views.chart.chartColumns)d.views.chart.chartColumns.hasOwnProperty(j)&&(k=d.views.chart.chartColumns[j],k=a.extend({columnType:Tb},k),k.sort&&(k.sort=a.extend({order:null,direction:Ec,nulls:Hc},k.sort)),d.views.chart.chartColumns[j]=k)}return d},_defaultSavedReports:function(b){var c,d=!1,e=a.extend({reports:this.options.savedReports},b);for(c=0;c<e.reports.length;c++)e.reports[c]=this._defaultSavedReport(e.reports[c]),e.reports[c].isCurrent&&(d=!0,this.currentSavedReportIdx=c);return d||(this.currentSavedReportIdx=0),e.reports},_renderColumnHeaderMenu:function(b,c,d,e){function f(b,c){var d=a.extend(!0,{buttonClass:"a-IRR-button "+Oa,label:"",iconOnly:!0,icon:"",isToggle:!1,toggleState:null,attributes:{},data:{}},c);b.markup("<li").attr($c,Na).markup(">"),d.isToggle&&(d.attributes["aria-pressed"]=d.toggleState,d.toggleState&&(d.buttonClass+=" "+sb),delete d.isToggle,delete d.toggleState),D(b,d),b.markup("</li>")}var g,h,i,j=!1,k=this._getId("column_header_search"),l=this._getColumn(e),m=this._currentReportSettings().views.grid.columns,o=0;for(b.markup("<ul").attr($c,Ma).markup(">"),l.features.controlBreak&&f(b,{label:n("CONTROL_BREAK"),icon:"icon-ig-control-break",data:{option:"break"}}),l.features.aggregate&&f(b,{label:n("AGGREGATE"),icon:"icon-ig-aggregate",data:{option:"aggregate"}}),g=0;g<m.length;g++)if(m[g].columnId===e){j=m[g].isFrozen;break}for(g=0;g<m.length;g++)m[g].isVisible&&!this._getColumn(m[g].columnId).isHidden&&m[g].seq>o&&(o=m[g].seq),m[g].columnId===e&&(i=m[g].seq);i<o&&f(b,{label:n(j?"UNFREEZE":"FREEZE"),icon:"icon-ig-frozen-column",isToggle:!0,toggleState:j,data:{option:"freeze"}}),l.features.canHide&&f(b,{label:n("HIDE"),icon:"icon-ig-remove-col",data:{option:_b}}),l.helpid&&f(b,{label:n("HELP"),icon:"icon-ig-help",data:{option:"help"}}),b.markup("</ul>"),c&&(b.markup("<div").attr($c,Pa).markup(">"),I(b,{labelFor:k,cssClasses:Qa,label:n("SEARCH"),labelTextHidden:!0}),l.filter.textCase&&(h=this._getTextTransformClass(l)),z(b,{id:k,cssClasses:Ra+(h?" "+h:""),placeholder:n("FILTER_WITH_DOTS")}),d&&(b.markup("<div").attr($c,Sa).attr("id",this._getId("column_header_menu_rows")).markup(">"),b.markup("</div>")),b.markup("</div>"))},_setOperationUpdate:function(a){a.operation&&a.operation===Mc||(a.operation=Nc)},_renderIG:function(){var a=this,c=this.options,d=this.element,e=b.htmlBuilder(),f=this.options.config,g=this._getId("summary");e.markup("<div").attr($c,U).markup(">"),f.toolbar&&f.toolbarData&&e.markup("<div").attr("id",this._getId("toolbar")).markup(">").markup("</div>"),e.markup("</div>"),e.markup("<div").attr($c,X).markup(">"),c.config.reportSettingsArea&&this._renderReportSettings(e),e.markup("<div class='u-vh'").attr("id",g).markup("></div><div").attr($c,$).attr("id",this._getId("content_container")).markup(">"),this._forEachView(function(b,c){e.markup("<div").attr("id",a._getId(c.elementId)).attr($c,c.cssClass).attr(Hb,g).markup(" style='display:none'></div>")}),e.markup("</div></div>"),d.append(e.toString()),c.config.reportSettingsArea&&this._initReportSettings()},_resetReportSettings:function(){var a=this;this._ifNoChangesDo(function(){if(a._currentReportSettings().baseReportId)return a._call({resetReportSettings:[a._report()]},{success:function(b){var c=a._defaultSavedReport(b.regions[0].resetReportSettings[0]);a.options.savedReports[a.currentSavedReportIdx]=c,a._report(c.id),a._updateChangeReportAction()}})})},_openDialog:function(a,b){var c,d=this;switch(b=b||{},a){case tc:this.columnsDialog$||this._renderColumnsDialog(),this.columnsDialog$.dialog("option","id",b.id).dialog("open");break;case uc:this.filterDialog$||this._renderFilterDialog(),this.filterDialog$.dialog("option","id",b.id).dialog("open");break;case xc:this.sortDialog$||this._renderSortDialog(),this.sortDialog$.dialog("option","id",b.id).dialog("open");break;case yc:this.aggregateDialog$||this._renderAggregateDialog(),this.aggregateDialog$.dialog("option",{id:b.id,columnId:b.columnId}).dialog("open");break;case wc:c=d._currentReportSettings().flashback,c=c?c.minsAgo:5,Q({labelKey:"APEX.IG.MINUTES_AGO",titleKey:"APEX.IG.FLASHBACK",okLabelKey:"APEX.DIALOG.SAVE",helpKey:"APEX.IG.HELP.FLASHBACK",helpTitleKey:"APEX.IG.HELP.FLASHBACK_TITLE",value:c},function(a){a!==!1&&d.updateFlashback({isEnabled:!0,minsAgo:parseInt(a,10)})});break;case vc:this.highlightDialog$||this._renderHighlightDialog(),this.highlightDialog$.dialog("option","id",b.id).dialog("open");break;case jc:this.viewsImpl[jc].openDialog();break;case zc:this.controlBreakDialog$||this._renderControlBreakDialog(),this.controlBreakDialog$.dialog("option","id",b.id).dialog("open");break;case Ac:this.reportSettingsDialog$||this._renderSaveReportSettingsDialog(),this.reportSettingsDialog$.dialog("option","saveAs",!1).dialog("open");break;case Bc:this.reportSettingsDialog$||this._renderSaveReportSettingsDialog(),this.reportSettingsDialog$.dialog("option","saveAs",!0).dialog("open");break;case Cc:this.downloadDialog$||this._renderDownloadDialog(),this.downloadDialog$.dialog("open");break;case Dc:}},_setModel:function(b){var c,d,e,f,g,h,i,j=!1,l=!1,m=!1,n=this.options.config,o=b.viewImpl,p=o.internalIdentifier,q=this._isCurrentlyEditable()&&o.supports.edit;o.model&&(k.release(o.modelName),o.modelName=null,o.model=null),b.remove||(q&&(j=n.editable.allowedOperations.create,l=n.editable.allowedOperations.update,m=n.editable.allowedOperations[Yb]),n.parentRegionStaticId&&null===n.modelInstanceId&&(q=!1),i=n.modelInstanceId?[n.regionStaticId+"_"+p,n.modelInstanceId]:n.regionStaticId+"_"+p,o.modelName=i,c=a.extend({},n.defaultModelOptions,{recordIsArray:!0,hasTotalRecords:n.pagination.showTotalRowCount,regionId:n.regionId,regionStaticId:n.regionStaticId,ajaxIdentifier:n.ajaxIdentifier,pageItemsToSubmit:n.itemsToSubmit,parentRecordId:this.parentRecordId,fields:o.modelColumns,editable:q,saveSelection:q&&n.submitSelectedRows,paginationType:Lc,regionData:{reportId:this._report(),view:p,ajaxColumns:n.ajaxColumns}}),c.types||(c.types={"default":{operations:{canAdd:j,canEdit:l,canDelete:m}}}),a.each(["identityField","metaField","typeField","sequenceField"],function(a,b){o.specialColumns[b]&&(c[b]=o.specialColumns[b])}),n.parentRegionStaticId&&(this.parentModel?c.parentModel=this.parentModel:(d=a("#"+n.parentRegionStaticId+"_ig"),c.parentModel=n.parentRegionStaticId+"_"+d.interactiveGrid("getCurrentViewId"))),q&&(c.regionData.allowedOperations=n.editable.allowedOperations["protected"]),o.model=k.get(i),o.model||(b.initialData?(e=b.initialData.values,f=n.pagination.showTotalRowCount?b.initialData.totalRows:null,g=b.initialData.moreData,h=b.initialData.dataOverflow,o.model=k.create(i,c,e,f,g,h)):b.fetchData?o.model=k.create(i,c):o.model=k.create(i,c,[],0)),this._trigger(Ee,null,{viewId:p,model:o.model}),b.updateComponent&&o.setModelName(o.modelName,o.modelColumns))},_anyChanges:function(){var a=this._currentViewImpl();return!!(this._isCurrentlyEditable()&&a.supports.edit&&a.model&&k.anyChanges(!1,a.model.name,!0))},_ifNoChangesDo:function(a,b){var c=this,d=this._anyChanges();b||(b=a,a=!1),d?a||i.confirm(n("UNSAVED_CHANGES_CONTINUE_CONFIRM"),function(a){a?(c._setEditMode(!1),b()):c._refreshReportSettings()}):b()},_clearToolbarSearch:function(){var a=this.options.config;a.toolbar&&a.toolbar.searchField&&a.toolbarData&&this.toolbar$.toolbar("findElement","search_field").val("")},_toolbarFind:function(a){var b=null,c=this.getToolbar();return c&&(b=c.toolbar("find",a)),b},resize:function(){var b,c,d,e,f=this.options.config,g=0,h=0,i=this.element,j=i.width(),k=this._currentViewImpl(),l=a(_,i).children().addBack();this.ignoreResizeHandler=!0,l.width(j),f.maxHeight&&(b=i.height(),d=a(V,i),e=a(ta,i),d.filter(":visible").length>0&&(g=d.outerHeight()),e.filter(":visible").length>0&&(h=e.outerHeight()),c=b-(g+h),l.height(c)),a.apex.stickyWidget&&i.find(".a-IG-header.js-stickyWidget-toggle").stickyWidget(Zb),k&&k.view$&&k.resize(),this.ignoreResizeHandler=!1},refresh:function(b){var c=this,d=a.extend({preservePagination:!1},b);this._ifNoChangesDo(function(){c._forEachView(function(a,b){b.model&&(d.preservePagination||b.model.clearData())})})},gotoCell:function(a,b,c){var d;this._view()!==this.editableView&&this._view(this.editableView),d=this._currentViewImpl(),a&&this._setModelInstance(a),d.gotoCell&&d.gotoCell(b,c)},getActions:function(){return this.actions},getToolbar:function(){return this.toolbar$},getSelectedRecords:function(){var a=this._currentViewImpl();return a.supports.selection?a.getSelectedRecords():null},setSelectedRecords:function(a,b,c){var d,e,f,g,h=this._currentViewImpl();if(h.supports.selection){if(a.length&&"string"==typeof a[0])for(g=h.model,e=a,a=[],d=0;d<e.length;d++)f=g.getRecord(e[d]),f&&a.push(f);h.setSelectedRecords(a,b,c)}},getReports:function(a){var b,d=this.options.savedReports;if(!a)return d;for(b=0;b<d.length;b++)if(d[b].id===a)return d[b];c.warn("No report exists with ID: ",a)},addReport:function(b,d){var e=a.extend(b,{operation:Mc,isEnabled:!0}),f=a.extend({save:!0},d);this.options.config.features.saveReport?(this.getReports().push(e),f.save&&this._saveReport(e,Mc)):c.warn("Unable to add report settings because the configuration disallows it.")},updateReport:function(b,d,e){var f,g,h=this.getReports(),i=a.extend({save:!0},e);if(this.options.config.features.saveReport){for(f=0;f<h.length;f++)if(g=h[f],g.id===b){this._setOperationUpdate(d),g=a.extend(!0,g,d);break}i.save&&this._saveReport(g,Nc)}else c.warn("Unable to update report settings because the configuration disallows it.")},deleteReport:function(b,d){var e={},f=a.extend({save:!0},d);this.options.config.features.saveReport?(e.id=b,e.operation=Oc,f.save&&this._saveReport(e,Oc)):c.warn("Unable to delete report settings because the configuration disallows it.")},getFilters:function(a){var b,d=this._currentReportSettings().filters;if(!a)return d;for(b=0;b<d.length;b++)if(d[b].id===a)return d[b];c.warn("No filter exists with ID: ",a)},addFilter:function(b,c){function d(){f.columnName&&(f.columnId=e._getColumnByName(f.columnName).id,delete f.columnName),e.getFilters().push(f),g.save&&e._setReportSettings({refreshModel:g.refreshData,affectsOtherViewsModels:!0})}var e=this,f=a.extend(b,{operation:Mc,isEnabled:!0}),g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);g.skipNoChangesCheck?d():this._ifNoChangesDo(d)},updateFilter:function(b,c,d){function e(){var d;for(d=0;d<g.length;d++)if(g[d].id===b){f._setOperationUpdate(c),g[d]=a.extend(!0,g[d],c);break}h.save&&f._setReportSettings({refreshModel:h.refreshData,affectsOtherViewsModels:!0})}var f=this,g=this.getFilters(),h=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},d);h.skipNoChangesCheck?e():this._ifNoChangesDo(e)},deleteFilter:function(b,c){function d(){var c;for(c=0;c<f.length;c++)if(f[c].id===b){f[c]=a.extend(!0,f[c],{operation:Oc});break}g.save&&e._setReportSettings({refreshModel:g.refreshData,affectsOtherViewsModels:!0})}var e=this,f=this.getFilters(),g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);g.skipNoChangesCheck?d():this._ifNoChangesDo(d)},getHighlights:function(a){var b,d=this._getCurrentView().highlights;if(!a)return d;for(b=0;b<d.length;b++)if(d[b].id===a)return d[b];c.warn("No highlight exists with ID: ",a)},addHighlight:function(b,c){function d(){f.columnName&&(f.columnId=e._getColumnByName(f.columnName).id,delete f.columnName),e.getHighlights().push(f),g.save&&e._setReportSettings({refreshModel:g.refreshData,affectsOtherViewsModels:!0})}var e=this,f=a.extend(b,{operation:Mc,isEnabled:!0}),g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);g.skipNoChangesCheck?d():this._ifNoChangesDo(d)},updateHighlight:function(b,c,d){function e(){var d;for(d=0;d<g.length;d++)if(g[d].id===b){f._setOperationUpdate(c),g[d]=a.extend(!0,g[d],c),c.type===Sb&&(delete g[d].columnId,delete g[d].columnType);break}h.save&&f._setReportSettings({refreshModel:h.refreshData,affectsOtherViewsModels:!0})}var f=this,g=this.getHighlights(),h=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},d);h.skipNoChangesCheck?e():this._ifNoChangesDo(e)},deleteHighlight:function(b,c){function d(){var c;for(c=0;c<f.length;c++)if(f[c].id===b){f[c]=a.extend(!0,f[c],{operation:Oc});break}g.save&&e._setReportSettings({refreshModel:g.refreshData,affectsOtherViewsModels:!0})}var e=this,f=this.getHighlights(),g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);g.skipNoChangesCheck?d():this._ifNoChangesDo(d)},getAggregates:function(){var a=[],b=this._currentViewImpl();return b.supports.aggregation&&(a=this._getCurrentView().aggregations),a},addAggregate:function(b,c){function d(){e.getAggregates().push(f),g.save&&e._setReportSettings({refreshModel:g.refreshData})}var e=this,f=a.extend(b,{operation:Mc}),g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);g.skipNoChangesCheck?d():this._ifNoChangesDo(d)},updateAggregate:function(b,c,d){function e(){var d;for(d=0;d<g.length;d++)if(g[d].id===b){f._setOperationUpdate(c),g[d]=a.extend(!0,g[d],c);break}h.save&&f._setReportSettings({refreshModel:h.refreshData})}var f=this,g=this.getAggregates(),h=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},d);h.skipNoChangesCheck?e():this._ifNoChangesDo(e)},deleteAggregate:function(b,c){function d(){var c;for(c=0;c<f.length;c++)if(f[c].id===b){f[c]=a.extend(!0,f[c],{operation:Oc});break}g.save&&e._setReportSettings({refreshModel:g.refreshData})}var e=this,f=this.getAggregates(),g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);g.skipNoChangesCheck?d():this._ifNoChangesDo(d)},getFlashback:function(){return this._currentReportSettings().flashback},addFlashback:function(b,c){function d(){e._currentReportSettings().flashback=a.extend(b,{isEnabled:!0}),e._setOperationUpdate(e._currentReportSettings()),f.save&&e._setReportSettings({refreshModel:f.refreshData,affectsOtherViewsModels:!0,changeIdentifier:"editable"})}var e=this,f=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);f.skipNoChangesCheck?d():this._ifNoChangesDo(d)},updateFlashback:function(b,c){function d(){e._setOperationUpdate(e._currentReportSettings()),e._currentReportSettings().flashback=a.extend(e._currentReportSettings().flashback,b),f.save&&e._setReportSettings({refreshModel:f.refreshData,affectsOtherViewsModels:!0,changeIdentifier:"editable"})}var e=this,f=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);f.skipNoChangesCheck?d():this._ifNoChangesDo(d)},deleteFlashback:function(b){function c(){d._setOperationUpdate(d._currentReportSettings()),d._currentReportSettings().flashback=!1,e.save&&d._setReportSettings({refreshModel:e.refreshData,affectsOtherViewsModels:!0,changeIdentifier:"editable"})}var d=this,e=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},b);e.skipNoChangesCheck?c():this._ifNoChangesDo(c)},addControlBreak:function(b,c,d){function e(){var d,e,h=0,i=f._getCurrentView().columns;for(d=0;d<i.length;d++)if(i[d].columnId===b.id){e=i[d];break}if(!c.order){for(d=0;d<i.length;d++)i[d]["break"]&&h++;c.order=h+1}e=a.extend(!0,e,{isVisible:!c.isEnabled,"break":{order:c.order,isEnabled:c.isEnabled,direction:c.direction,nulls:c.nulls}}),f._setOperationUpdate(e),c.isEnabled&&f._adjustControlBreakSort(),c.isEnabled?a.extend(b,{controlBreakIndex:c.order,controlBreakDirection:c.direction,hidden:!0}):a.extend(b,{controlBreakIndex:0,controlBreakDirection:null,hidden:!1}),g.save&&f._setReportSettings({refreshModel:g.refreshData,refreshColumns:g.refreshData})}var f=this,g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},d?d:{});g.skipNoChangesCheck?e():this._ifNoChangesDo(e)},updateControlBreak:function(b,c,d){function e(){var d,e,h=f._getCurrentView().columns;for(d=0;d<h.length;d++)if(h[d].columnId===b){e=h[d];break}e=a.extend(!0,e,{isVisible:!c.isEnabled,"break":{order:c.order,isEnabled:c.isEnabled,direction:c.direction,nulls:c.nulls}}),f._setOperationUpdate(e),c.isEnabled?a.extend(f._currentViewImpl().modelColumns[f._getColumn(b).name],{controlBreakIndex:e["break"].order,controlBreakDirection:e["break"].direction,hidden:!0}):a.extend(f._currentViewImpl().modelColumns[f._getColumn(b).name],{controlBreakIndex:0,controlBreakDirection:null,hidden:!1}),f._adjustControlBreakSort(),g.save&&f._setReportSettings({refreshModel:g.refreshData,
refreshColumns:g.refreshData})}var f=this,g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},d?d:{});g.skipNoChangesCheck?e():this._ifNoChangesDo(e)},deleteControlBreak:function(b,c){function d(){var c,d,g=e._getCurrentView().columns;for(c=0;c<g.length;c++)if(g[c].columnId===b){d=g[c];break}d=a.extend(!0,d,{isVisible:!0,"break":!1}),e._setOperationUpdate(d),a.extend(e._currentViewImpl().modelColumns[e._getColumn(b).name],{controlBreakIndex:0,controlBreakDirection:null,hidden:!1}),e._adjustControlBreakSort(),f.save&&e._setReportSettings({refreshModel:f.refreshData,refreshColumns:f.refreshData})}var e=this,f=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c?c:{});f.skipNoChangesCheck?d():this._ifNoChangesDo(d)},getSorts:function(){var b,c,d,e=[],f=this._getCurrentView().columns;for(b=0;b<f.length;b++)c=f[b],c.sort&&(d=a.extend({},{columnId:c.columnId,order:c.sort.order,direction:c.sort.direction,nulls:c.sort.nulls}),e.push(d));for(e.length>0&&(e=e.sort(function(a,b){return a.order-b.order})),b=0;b<e.length;b++)delete e[b].order;return e},setSorts:function(a){var b,c,d,e,f,g,h,i=this,j=this._getCurrentView().columns,k=this._currentViewImpl().view$.grid("getColumns");this._ifNoChangesDo(function(){for(b=0;b<j.length;b++){for(g=j[b],e=!1,d=0;d<k.length;d++)if(g.columnId===k[d].id){h=d;break}for(c=0;c<a.length;c++)if(f=a[c],f.columnId===g.columnId){e=!0,f.order=c+1;break}e?(delete f.columnId,g.sort?f.order===g.sort.order&&f.direction===g.sort.direction&&f.nulls===g.sort.nulls||(g.sort=f,i._setOperationUpdate(g),k[h].sortIndex=g.sort.order,k[h].sortDirection=g.sort.direction):(g.sort=f,i._setOperationUpdate(g),k[h].sortIndex=g.sort.order,k[h].sortDirection=g.sort.direction)):g.sort&&(g.sort=!1,i._setOperationUpdate(g),k[h].sortIndex=null,k[h].sortDirection=null)}i._adjustControlBreakSort(),i._setReportSettings({refreshModel:!0,refreshColumns:!0})})},getChart:function(){return this._currentReportSettings().views.chart},setChart:function(b){var c,d=this,e=this.getChart(),f=this._currentViewImpl(),g={};e?(c=a.extend(e,b),this._setOperationUpdate(c)):c=a.extend({operation:Mc},b),this._currentReportSettings().views.chart=c,this._view()===jc?(g.ig=this,g.igConfig=this.options.config,f.initView(g),this._setReportSettings({refreshView:!0,refreshModel:!0})):this._setReportSettings({},function(){d._view(jc,{fetchData:!0})})},deleteChart:function(){var a=this,b=this._currentViewImpl();this._currentReportSettings().views.chart={operation:Oc},this._setReportSettings({},function(){b.destroyView(a),b.view$=null})},getViews:function(a){return a?this.viewsImpl[a]:this.viewsImpl},getCurrentView:function(){return this.getViews(this.getCurrentViewId())},getCurrentViewId:function(){return this._view()},focus:function(){var a=this.options.config;a.toolbar&&a.toolbar.searchField&&this.toolbar$?this.toolbar$.toolbar("findElement","search_field").focus():this._currentViewImpl().focus()}}),a.apex.interactiveGrid.copyDefaultToolbar=o;var Je=[];a.apex.interactiveGrid.registerView=R;var Ke=["selection-fill","selection-clear","selection-copy-down"],Le={setColumnConfig:function(c){var d,e,f,g,h,i,j,k,l={},m=c.baseModelColumns,o=c.igConfig,p=o.views[this.internalIdentifier].features,q=c.currentReportSettings,r=c.ig,s=Ec,t=o.editable!==!1;for(d=0;d<q.views.grid.columns.length;d++)e=q.views.grid.columns[d],f=r._getColumn(e.columnId),j=a.extend(!0,{},f.defaultGridColumnOptions||{},m[e.columnId]),j.elementId=f.staticId,j.seq=e.seq,void 0===j.noStretch&&(void 0!==f.layout.noStretch?j.noStretch=f.layout.noStretch:null!==p.stretchColumns?j.noStretch=!p.stretchColumns:j.noStretch=!q.views.grid.stretchColumns),f.isHidden||(j.hidden=!e.isVisible,j.frozen=e.isFrozen,e.width&&(j.width=e.width),e.sort&&(j.sortIndex=e.sort.order,j.sortDirection=e.sort.direction),i=e["break"],i&&i.isEnabled&&(s=i.direction,j.controlBreakIndex=i.order,j.controlBreakDirection=s),f.layout.groupId&&("both"===f.layout.useGroupFor?j.useGroupFor="srv,heading":j.useGroupFor=f.layout.useGroupFor,j.groupName=f.layout.groupId),j.helpid=f.helpid,j.canHide=f.features.canHide,j.canSort=f.features.sort,f.link.attributes&&(j.linkAttributes=f.link.attributes),f.link.text&&(j.linkText=f.link.text),f.link.targetColumn&&(j.linkTargetColumn=f.link.targetColumn)),f.accessibility.usedAsRowHeader&&(j.usedAsRowHeader=f.accessibility.usedAsRowHeader),f.appearance.columnCssClasses&&(j.columnCssClasses=f.appearance.columnCssClasses),f.appearance.fieldColSpan&&(j.fieldColSpan=f.appearance.fieldColSpan),f.appearance.fieldCssClasses&&(j.fieldCssClasses=f.appearance.fieldCssClasses),f.validation&&(j.isRequired=f.validation.isRequired),f.appearance.cellTemplate&&(j.cellTemplate=f.appearance.cellTemplate),t&&(j.noCopy=!f["default"].duplicate,k=f["default"].value,a.isPlainObject(k)&&void 0!==k.d&&j.elementId&&(k.d=apex.item(j.elementId).displayValueFor(k.d)),j.defaultValue=k,"actions"===f.specialType&&(g=b.htmlBuilder(),h=hb+" "+kb+" a-Button--actions "+xb,D(g,{label:n("ROW_ACTIONS"),buttonClass:h,iconOnly:!0,icon:"icon-ig-actions",attributes:{"data-menu":r._getId("row_actions_menu"),"aria-haspopup":!0,"aria-expanded":!1}}),j.cellTemplate=g.toString(),g.clear(),D(g,{label:n("SEL_ACTIONS"),buttonClass:h+" js-selectionMenu",iconOnly:!0,icon:"icon-ig-actions",attributes:{"data-menu":r._getId("selection_actions_menu"),"aria-haspopup":!0,"aria-expanded":!1}}),j.heading=g.toString(),j.columnCssClasses?j.columnCssClasses+=" "+Cb:j.columnCssClasses=Cb,j.headingCssClasses?j.headingCssClasses+=" "+Cb:j.headingCssClasses=Cb,delete j.index,j.virtual=!0,j.noHeaderActivate=!0,j.elementId=null,0===d&&(j.frozen=!0,e.isFrozen=!0),j.noStretch=!0,j.canSort=!1,j.width||(j.width=oe))),l[f.name]=j;l[Uc]=m[Uc],this.modelColumns=l,this.specialColumns={identityField:0===r.primaryKeyColumns.length?null:r.primaryKeyColumns,metaField:Uc}},init:function(a){var b=a.options.config;a.getActions().add([{name:"selection-copy-down",labelKey:"APEX.IG.COPY_DOWN",icon:"icon-ig-copy-down",hide:!0,action:function(){var b=a._currentViewImpl();b.singleRowMode||b.view$.grid("copyDownSelection")}},{name:"selection-clear",labelKey:"APEX.IG.CLEAR",icon:"icon-ig-clear",hide:!0,action:function(){var b=a._currentViewImpl();b.singleRowMode||b.view$.grid("fillSelection","")}},{name:"selection-fill",labelKey:"APEX.IG.FILL",icon:"icon-ig-fill",hide:!0,getFillValue:function(a){Q({labelKey:"APEX.IG.FILL_LABEL",titleKey:"APEX.IG.FILL_TITLE"},a)},action:function(){var b=a._currentViewImpl();b.singleRowMode||this.getFillValue(function(a){a!==!1&&b.view$.grid("fillSelection",a)})}}]),this._initMenus(b,a)},initView:function(c){function d(a,b){B.editMode=b.editMode,B.actions.update("edit"),B._trigger(Ge,a,b)}function e(a,b){return void 0!==a?a:b}function f(a){J.hide(),K.removeClass(sb).attr(Db,"false"),a&&(K.focus(),G.view$.grid("focus")),K=null,B._off(B.document,"mousedown"),B._off(B.window,"blur"),B._off(J)}var g,j,k,l,m,o,p,q={},r=b.htmlBuilder(),s=!0,v=c.igConfig,w=v.defaultGridViewOptions.multiple,x=v.defaultGridViewOptions.selectAll,y=v.views.grid.features,z=!1,A=Ic,B=c.ig,C=B.actions,D=B._isCurrentlyEditable(),E=v.columnGroups,F=!!D&&v.editable.autoAddRow,G=this,I=!0,J=null,K=null;if(!y.gridView&&!y.singleRowView)throw new Error("Interactive Grid grid view must have at least one of grid or single row");switch(a("div.a-GV-columnItemContainer",c.ig$).appendTo(c.ig$),y.gridView&&(r.markup("<div").attr($c,La).attr("style","display:none;").attr("id",B._getId("column_header_menu")).markup(">").markup("</div>"),J=a(r.toString()),a("body").append(J),p=c.currentReportSettings.views.grid.aggregations,p.length>0&&(A!==Ic&&A!==Wc||(A=Xc))),y.rowSelector&&(A=v.defaultGridViewOptions.rowHeader,A===Ic&&(A=Wc),z=!y.rowSelector.hideControl,w=y.rowSelector.multiSelect,w&&(x=y.rowSelector.selectAll)),v.headingFixedTo){case Ic:s=!1,l=!1,m=!1;break;case Pc:s=!0,l=!1,m=!1;break;case Qc:s=!1,l=function(){return h.defaultStickyTop()+a(V,c.ig$).outerHeight()},m=v.defaultGridViewOptions.stickyFooter}for(g=0;g<E.length;g++)j=E[g],q[j.id]={heading:j.heading,label:j.label};y.gridView?(v.defaultGridViewOptions.contextMenu&&!v.defaultGridViewOptions.contextMenu.hasOwnProperty("actionsContext")&&(v.defaultGridViewOptions.contextMenu.actionsContext=B.actions),v.editable&&v.editable.allowedOperations.create===!1&&v.editable.allowedOperations.update===!1&&(I=!1),o={modelName:G.modelName,editable:D,autoAddRecord:F,rowHeader:A,rowHeaderCheckbox:z,aggregateLabels:this._gridAggregateLabels(),highlights:this._gridHighlightsFromReport(c.currentReportSettings),multiple:w,selectAll:x,noDataMessage:v.text.noDataFound,moreDataMessage:v.text.moreDataFound,showNullAs:v.appearance.showNullValue,columns:[G.modelColumns],columnGroups:q,columnSort:y.sort,reorderColumns:e(v.defaultGridViewOptions.reorderColumns,y.reorderColumns),resizeColumns:e(v.defaultGridViewOptions.resizeColumns,y.resizeColumns),pagination:B._getPaginationConfig(v,"defaultGridViewOptions"),rowsPerPage:c.currentReportSettings.rowsPerPage,hasSize:s,stickyTop:l,stickyFooter:m,allowEditMode:I,persistSelection:v.defaultGridViewOptions.persistSelection||v.submitSelectedRows,activateColumnHeader:function(c,d){function e(c){var d,e,f,g=b.htmlBuilder();for(d=0;d<c.length;d++)a.isPlainObject(c[d])?(e=c[d].r,f=c[d].d):e=f=c[d],H(g,{cssClasses:Ta,text:f,data:{"return-value":e}});B._getElement("column_header_menu_rows").html(g.toString())}function g(a){var b=J.find(":focusable");a||(j=b.first(),j.data("first",!0)),k=b.last(),k.data("last",!0)}var j,k,l,m,o,p,q=[],r=b.htmlBuilder();J.is(":visible")?f():(l=B._isColumnFilterable(d.column.id),l&&(m=B._hasColumnFilterLov(d.column.id)),K=d.header$,d.header$.addClass(sb).attr(Db,"true"),B._renderColumnHeaderMenu(r,l,m,d.column.id),o>220?(p=d.column.frozen?2:1,o=d.header$.outerWidth(),J.css("min-width",o-p)):J.css("min-width","0"),J.html(r.toString()).show().position({my:"left top",at:"left+1 bottom",of:d.header$,collision:"fit"}),m?B._getFilterValues(d.column.id,!0,function(a){a.regions[0].filterValues&&(B._getElement("column_header_search").focus(),q=a.regions[0].filterValues,e(q),g())}):(g(),j.focus()),B._on(J,{"click button.a-IRR-sortWidget-button":function(b){var c,e,g,i,j=Ec,k=a(b.currentTarget).data("option");switch(k){case"hide":G.view$.grid("hideColumn",d.column),B._currentViewColumn(d.column.id,{isVisible:!1}),B._unfreezeLastColumnWhenFrozen()?B._setReportSettings({refreshView:!0,refreshColumns:!0}):B._setReportSettings(),f(!0);break;case"break":c=B._currentViewColumn(d.column.id),c.sort&&(j=c.sort.direction),B.addControlBreak(d.column,{isEnabled:!0,direction:j}),f(!0);break;case"aggregate":B._openDialog(yc,{columnId:d.column.id}),f();break;case"freeze":if(e=B._currentReportSettings().views.grid.columns,G.view$.grid(d.column.frozen?"unfreezeColumn":"freezeColumn",d.column),g=d.column.frozen)for(i=0;i<e.length;i++)c=e[i],c.seq<=d.column.seq&&!c.isFrozen&&(c.isFrozen=!0,B._setOperationUpdate(c));else for(i=0;i<e.length;i++)c=e[i],c.seq>=d.column.seq&&c.isFrozen&&(c.isFrozen=!1,B._setOperationUpdate(c));B._setReportSettings(),f(!0);break;case"help":f(!0),h.popupFieldHelp(B._getColumn(d.column.id).helpid,$v("pInstance"))}},keydown:function(b){var c;b.which===a.ui.keyCode.ESCAPE?(f(!0),b.preventDefault()):b.which===a.ui.keyCode.TAB&&(c=!!b.shiftKey,!c&&a(b.target).data("last")&&(b.preventDefault(),j.focus()),c&&a(b.target).data("first")&&(b.preventDefault(),k.focus()))},"keydown input.a-IRR-sortWidget-searchField":function(b){var c,e;if(l&&b.which===a.ui.keyCode.ENTER){if(e=this._getColumn(d.column.id).filter.dataType,e===Sd)try{c=apex.jQuery.timepicker.parseDateString(a(b.target).val(),this._getColumn(d.column.id).appearance.dateFormatMask),B.addFilter({type:Tb,columnType:Tb,columnId:d.column.id,operator:jd,value:t(c),isCaseSensitive:!1})}catch(g){i.alert(n("INVALID_DATE_FORMAT"))}else B.addFilter({type:Tb,columnType:Tb,columnId:d.column.id,operator:e===Qd?td:jd,value:a(b.target).val(),isCaseSensitive:!1});f(!0),b.preventDefault()}},"keyup input.a-IRR-sortWidget-searchField":function(a){if(m){var b,c=a.target.value;b=q.filter(function(a){return a.d?a.d.toLowerCase().indexOf(c.toLowerCase())>-1:a.toLowerCase().indexOf(c.toLowerCase())>-1}),e(b),g(!0)}},"click a.a-IRR-sortWidget-row":function(b){var c,e,g,h,i=a(b.currentTarget).data("returnValue");m&&(c=B._getColumn(d.column.id).filter.dataType,c===Sd||c.indexOf(Ud)>-1?(e=i.indexOf(Rc),g=i.substring(0,e),h=i.substring(e+1),e>0&&B.addFilter({type:Tb,columnType:Tb,columnId:d.column.id,operator:g,value:h,isCaseSensitive:!1})):B.addFilter({type:Tb,columnType:Tb,columnId:d.column.id,operator:jd,value:i,isCaseSensitive:!0}),f(!0),b.preventDefault())}}),B._on(B.document,{mousedown:function(b){!a(b.target).closest(J).length>0&&!a(b.target).closest(d.header$).length>0&&J.is(":visible")&&f()}}),B._on(B.window,{blur:function(){J.is(":visible")&&f()}}))},cancelColumnHeader:function(){J.is(":visible")&&f()},sortChange:function(a,b){B._ifNoChangesDo(function(){var a,c,d,e,f,g=b.column.sortIndex,h=G.view$.grid("getColumns");for(d=1,a=0;a<h.length;a++)c=h[a],c.sortIndex&&("change"===b.action?c===b.column&&(d=c.sortIndex):"add"===b.action?c.sortIndex>=d&&(d=c.sortIndex+1):"remove"===b.action?c===b.column?(delete c.sortIndex,delete c.sortDirection,e=B._currentViewColumn(b.column.id),e.sort=!1,B._setOperationUpdate(e)):c.sortIndex>g&&(c.sortIndex-=1,B._currentViewColumn(c.id,{sort:{order:c.sortIndex}})):"clear"!==b.action&&"set"!==b.action||(delete c.sortIndex,delete c.sortDirection,e=B._currentViewColumn(c.id),e.sort=!1,B._setOperationUpdate(e)));"clear"!==b.action&&"remove"!==b.action&&(b.column.sortIndex=d,b.column.sortDirection=b.direction,f=b.direction===Ec?Hc:Gc,B._currentViewColumn(b.column.id,{sort:{order:d,direction:b.direction,nulls:f}})),B._setReportSettings({refreshModel:!0,refreshColumns:!0})})},columnReorder:function(a,b){var c,d,e=B._currentReportSettings().views.grid.columns,f=e[b.newPosition].isFrozen;for(u(e,b.oldPosition,b.newPosition),e[b.newPosition]&&(e[b.newPosition].isFrozen=f),c=0;c<e.length;c++)e[c]||e.splice(c,1);for(c=0;c<e.length;c++)d=e[c],d.seq!==c+1&&(d.seq=c+1,B._setOperationUpdate(d));B._unfreezeLastColumnWhenFrozen()?B._setReportSettings({refreshView:!0,refreshColumns:!0}):B._setReportSettings()},columnResize:function(a,b){B._currentViewColumn(b.column.id,{width:b.width}),B._setReportSettings()},modeChange:d,selectionChange:function(b){var c=G.view$.grid("getSelection");a(".js-selectionMenu",G.view$).prop(ec,0===c.length),G._selectionChange(B,b)},pageChange:function(a,b){B._pageChange(b)}},p.length>0&&(o.aggregateTooltips=this._gridAggregateTooltipsFromReport(B,c.currentReportSettings)),G.view$.grid({},v.defaultGridViewOptions,o)):(this.view$.hide(),this.singleRowMode=!0),G.supports.singleRowView&&y.singleRowView&&(G.singleRowView$=a("<div id='"+B._getId("singleRow"+Vc)+"' class='"+Ka+"'></div>").attr(Hb,B._getId("summary")),G.view$.after(this.singleRowView$),G.singleRowView$.width(G.view$.width()),v.maxHeight&&G.singleRowView$.height(G.view$.height()),k=a.apex.recordView.copyDefaultToolbar(),v.editable&&k[0].controls.unshift({type:fd,labelKey:"APEX.IG.SRV_CHANGE_MENU",iconOnly:!0,icon:"icon-ig-actions",menuId:B._getId("srv_actions_menu")}),y.gridView&&(C.remove(["close-single-row-view"]),C.add([{name:"close-single-row-view",labelKey:"APEX.IG.REPORT_VIEW",action:function(){var a,b=B.editMode;b&&G.singleRowView$.recordView("setEditMode",!1),G.singleRowMode=!1,G.singleRowView$.hide(),B._updateSummary(),a=B._toolbarFind("selection_submenu"),a&&(a.disabled=!G.supports.selection),G.view$.show().grid("resize"),b&&G.view$.grid("setEditMode",!0)}}]),k[0].controls.unshift({type:ed,action:"close-single-row-view"})),this.singleRowView$.recordView({},v.defaultSingleRowOptions,{modelName:G.modelName,actionsContext:C,toolbar:k,editable:D,autoAddRecord:F,noDataMessage:v.text.noDataFound,moreDataMessage:v.text.moreDataFound,showNullAs:v.appearance.showNullValue,fields:[G.modelColumns],fieldGroups:q,hasSize:s,modeChange:d,recordChange:function(a){G._selectionChange(B,a)}}),y.gridView&&(this.singleRowView$.hide(),this.singleRowMode=!1))},viewChanged:function(a,b,c){b._toggleEnableAction(a&&c.editable&&this.supports.edit,Ke),a&&this._selectionChange(b)},updateActions:function(a){var b=a.ig,c=b.options.config;b._toggleShowAction(a.canEdit&&this.supports.edit&&this.supports.cellSelection&&c.views.grid.features.cellRangeActions,Ke)},setReportOptions:function(a,b,c){function d(){i.view$.grid("option","aggregateTooltips",i._gridAggregateTooltipsFromReport(a,b))}function e(){i.view$.grid("option","highlights",i._gridHighlightsFromReport(b))}function f(){var c,d,e,f,g,h,k=j.views.grid.features,l=b.views.grid.columns,m=i.view$.grid("getColumns"),n=!1;for(c=0;c<l.length;c++)for(g=l[c],e=a._getColumn(g.columnId),d=0;d<m.length;d++)if(f=m[d],f.id===g.columnId){h=f.noStretch,void 0!==e.defaultGridColumnOptions&&void 0!==e.defaultGridColumnOptions.noStretch||(void 0!==e.layout.noStretch?f.noStretch=e.layout.noStretch:null!==k.stretchColumns?f.noStretch=!k.stretchColumns:f.noStretch=!b.views.grid.stretchColumns),f.noStretch!==h&&(n=!0),f.hidden===g.isVisible&&f.canHide&&(f.hidden=!g.isVisible,n=!0);break}n&&(i.view$.grid("refreshColumns"),i.refresh())}function g(){var b=a._isCurrentlyEditable();i.model.setOption("editable",b),i.singleRowView$&&(i.singleRowView$.recordView("option","editable",b),i.singleRowView$.recordView("option","autoAddRecord",b)),i.view$.is(":apex-grid")&&(i.view$.grid("option","editable",b),i.view$.grid("option","autoAddRecord",b)),a._updateActions()}var h,i=this,j=a.options.config;h={"views.grid.aggregations":d,"views.grid.highlights":e,"views.grid.columns":f,editable:g},h[c]&&h[c]()},_selectionChange:function(a,b){var c;b&&a._selectionChange(b),a._isCurrentlyEditable()&&this.supports.edit&&(c=this.selectCells()?this.view$.grid("getSelectedRange").recordIds.length:this.getSelectedRecords().length,a._toggleEnableAction(c>=2,["selection-copy-down"]),a._toggleEnableAction(c>=1,["selection-fill","selection-clear"]))},_initMenus:function(b,c){function d(a){n.push(a),o&&o.push(a)}function e(){var a,d,e=c.getSelectedRecords(),f=c.getCurrentView().model,g=b.editable.allowedOperations.update||b.editable.allowedOperations[Yb],h=b.editable.allowedOperations[Yb],j=!1,k=!1;if(e&&(g||h))for(a=0;a<e.length&&(d=e[a],g&&!k&&(k=f.canRevertRecord(d)),h&&!j&&(j=f.allowDelete(d)),!j||!k);a++);g&&(i.menu("find","revert").disabled=!k),h&&(i.menu("find","del").disabled=!j)}var f,g=null,h=null,i=null,j=this,k=b.views.grid.features,l=[],m=[],n=[],o=c._toolbarFind("selection_submenu");o&&(o=o.menu.items,j._selectionMenuItems=o,j._selectionMenuStart=o.length),n.push({type:ad,action:"selection-copy",accelerator:"Ctrl+C"}),n.push(dd),g=a("<div/>",{id:c._getId("row_actions_menu")}).appendTo("body"),h=a("<div/>",{id:c._getId("srv_actions_menu")}).appendTo("body"),i=a("<div/>",{id:c._getId("selection_actions_menu")}).appendTo("body"),j.supports.singleRowView&&(l.push({id:"srv",type:ad,action:"single-row-view"}),l.push(dd)),b.editable&&(b.editable.allowedOperations.create&&(l.push({id:"ins",type:ad,action:"row-add-row"}),m.push({id:"ins",type:ad,label:b.text.addRowButton,action:"insert-record"}),l.push({id:"dup",type:ad,action:"row-duplicate"}),m.push({id:"dup",type:ad,action:"duplicate-record"}),d({id:"dup",type:ad,action:"selection-duplicate"}),l.push(dd),d(dd)),(b.editable.allowedOperations[Yb]||b.editable.allowedOperations.create)&&(l.push({id:"del",type:ad,action:"row-delete"}),m.push({id:"del",type:ad,action:"delete-record"})),b.editable.allowedOperations[Yb]&&d({id:"del",type:ad,action:"selection-delete"}),l.push(dd),l.push({id:"refresh",type:ad,action:"row-refresh"}),m.push({id:"refresh",type:ad,action:"refresh-record"}),d(dd),d({id:"refresh",type:ad,action:"selection-refresh"}),(b.editable.allowedOperations.update||b.editable.allowedOperations[Yb])&&(l.push({id:"revert",type:ad,action:"row-revert"}),m.push({id:"revert",type:ad,action:"revert-record"}),d({id:"revert",type:ad,action:"selection-revert"})),k.cellRangeActions&&(d(dd),d({id:"copy_down",type:ad,action:"selection-copy-down"}),d({id:"fill",type:ad,action:"selection-fill"}),d({id:"clear",type:ad,action:"selection-clear"})),g.menu({actionsContext:c.actions,items:l,beforeOpen:function(){var a,d=j.view$.find("."+xb+"."+sb).closest("tr");j.singleRowMode?(c._updateAction(_b,"single-row-view"),a=j.getSelectedRecords()):a=j.view$.grid("getRecords",[d]),b.editable.allowedOperations.create&&(g.menu("find","dup").disabled=!j.model.allowAdd(null,"copy"),g.menu("find","ins").disabled=!j.model.allowAdd(null,"new")),(b.editable.allowedOperations.update||b.editable.allowedOperations[Yb])&&(g.menu("find","revert").disabled=!a.length||!j.model.canRevertRecord(a[0])),b.editable.allowedOperations[Yb]||c._toggleShowAction(j.model.allowDelete(a[0]),"row-delete"),b.editable.allowedOperations[Yb]&&(g.menu("find","del").disabled=!a.length||!j.model.allowDelete(a[0]))},afterClose:function(){j.singleRowMode&&c._updateAction($b,"single-row-view")}}),h.menu({actionsContext:c.actions,items:m,beforeOpen:function(){var a=j.getSelectedRecords();b.editable.allowedOperations.create&&(h.menu("find","dup").disabled=!j.model.allowAdd(null,"copy"),h.menu("find","ins").disabled=!j.model.allowAdd(null,"new")),(b.editable.allowedOperations.update||b.editable.allowedOperations[Yb])&&(h.menu("find","revert").disabled=!a.length||!j.model.canRevertRecord(a[0]),h.menu("find","refresh").disabled=!a.length),b.editable.allowedOperations[Yb]||c._toggleShowAction(j.model.allowDelete(a[0]),"delete-record"),b.editable.allowedOperations[Yb]&&(h.menu("find","del").disabled=!a.length||!j.model.allowDelete(a[0]))}}),i.menu({actionsContext:c.actions,items:n,beforeOpen:function(){e()}}),o&&(f=c.toolbar$.toolbar("findElement","actions_button_menu"),f.on("menubeforeopen.gridview",function(){e()}))),j.rowActionMenu$=g,j.srvActionMenu$=h,j.selActionMenu$=i},_gridAggregateLabels:function(){var b=null;return this.aggregateLabels||(this.aggregateLabels=b={},a.each(ue,function(a,c){b[c]={label:n(c),overallLabel:n(c+"_OVERALL")}})),this.aggregateLabels},_gridAggregateTooltipsFromReport:function(a,b){var c,d,e=null,f=b.views.grid.aggregations;if(f.length>0)for(e={},c=0;c<f.length;c++)d=f[c],d.tooltip&&(e[d["function"]+"|"+a._getColumn(d.columnId).name]=d.tooltip);return e},_gridHighlightsFromReport:function(a){var b,c,d,e={},f=a.views.grid.highlights;for(b=0;b<f.length;b++)d=f[b],c=d.id,e[c]={seq:d.seq,row:d.type===Sb,color:d.textColor,background:d.backgroundColor};return e},destroyView:function(a){this.view$.is(":apex-grid")&&this.view$.grid(Xb),this.singleRowView$&&this.singleRowView$.remove(),a._getElement("column_header_menu").remove()},destroy:function(a){this.rowActionMenu$&&this.rowActionMenu$.length>0&&(this.rowActionMenu$.remove(),this.rowActionMenu$=null),this.selActionMenu$&&this.selActionMenu$.length>0&&(this.selActionMenu$.remove(),this.selActionMenu$=null),this._selectionMenuStart&&this._selectionMenuItems&&(this._selectionMenuItems.length=this._selectionMenuStart,this._selectionMenuItems=this._selectionMenuStart=null,a.toolbar$.toolbar("findElement","actions_button_menu").off("menubeforeopen.gridview"))},getContextRecord:function(b){var c;return this.singleRowMode?[this.singleRowView$.recordView("getRecord")]:(c=a(b).closest("tr"),c.length>0?this.view$.grid("getRecords",[c]):[])},canCopy2Clipboard:function(){return!this.singleRowMode&&this.view$.grid("option","allowCopy")},selectCells:function(a){if(!this.singleRowMode){if(void 0===a)return this.view$.grid("option","selectCells");this.view$.grid("option","selectCells",a)}},getSelectedRecords:function(){var a;return this.singleRowMode?(a=this.singleRowView$.recordView("getRecord"),a?[a]:[]):this.view$.grid("getSelectedRecords")},setSelectedRecords:function(a,b,c){var d;this.singleRowMode?(d=this.model.indexOf(a[0]),d<0&&(d=0),this.singleRowView$.recordView("option","recordOffset",d)):this.view$.grid("setSelectedRecords",a,b,c)},getActiveRecordId:function(){return this.singleRowMode?this.singleRowView$.recordView("getActiveRecordId"):this.view$.grid("getActiveRecordId")},setModelName:function(a){this.singleRowView$&&this.singleRowView$.recordView("option","modelName",a),this.view$.is(":apex-grid")&&this.view$.grid("option","modelName",a)},setOption:function(a,b){this.view$.grid("option",a,b)},setEditMode:function(a){this.singleRowMode?this.singleRowView$.recordView("setEditMode",a):this.view$.grid("setEditMode",a)},setNoDataMessage:function(a){this.singleRowMode?this.singleRowView$.recordView("option","noDataMessage",a):this.view$.grid("option","noDataMessage",a)},focus:function(){this.singleRowMode?this.singleRowView$.recordView("focus"):this.view$.grid("focus")},refreshColumns:function(){this.view$.grid("refreshColumns")},footerHeight:function(){if(!this.singleRowMode)return this.view$.find(".a-GV-footer").outerHeight()||0},refresh:function(a){this.view$.is(":apex-grid")&&this.view$.grid(Zb),this.singleRowView$&&this.singleRowView$.recordView(Zb)},resize:function(){this.singleRowMode?this.singleRowView$.recordView("resize"):this.view$.grid("resize")},show:function(){this.singleRowMode?this.singleRowView$.show():this.view$.show()},hide:function(){this.singleRowMode?this.singleRowView$.hide():this.view$.hide()}},Me={setColumnConfig:function(b){var c,d,e={},f={},g=b.baseModelColumns,h=b.igConfig,i=b.ig,j=h.editable!==!1,k=0;for(d in g)g.hasOwnProperty(d)&&(k++,e=a.extend(!0,{},g[d]),d!==Uc?(c=i._getColumn(d),e.elementId=c.staticId,e.seq=k,j&&"actions"===c.specialType&&(delete e.index,e.virtual=!0,e.elementId=null),f[c.name]=e):f[Uc]=e);this.modelColumns=f,this.specialColumns={identityField:0===i.primaryKeyColumns.length?null:i.primaryKeyColumns,metaField:Uc}},initView:function(a){var b=!0,c=!1,d=a.igConfig,e=a.ig;switch(d.headingFixedTo){case Ic:b=!1;break;case Qc:b=!1,c=!0}this.view$.tableModelView(this.viewConfig(a,{modelName:this.modelName,noDataMessage:d.text.noDataFound,moreDataMessage:d.text.moreDataFound,showNullAs:d.appearance.showNullValue,hasSize:b,columns:this.modelColumns,pagination:e._getPaginationConfig(d,this.internalIdentifier===hc?"defaultIconViewOptions":"defaultDetailViewOptions"),rowsPerPage:a.currentReportSettings.rowsPerPage,stickyFooter:c,selectionChange:function(a){e._selectionChange(a)},pageChange:function(a,b){e._pageChange(b)}}))},destroyView:function(){this.view$.tableModelView(Xb)},getSelectedRecords:function(){return this.view$.tableModelView("getSelectedRecords")},setSelectedRecords:function(a,b,c){this.view$.tableModelView("setSelectedRecords",a,b,c)},setOption:function(a,b){this.view$.tableModelView("option",a,b)},setModelName:function(a){this.view$.tableModelView("option","modelName",a)},setNoDataMessage:function(a){this.view$.tableModelView("option","noDataMessage",a)},footerHeight:function(){return this.view$.find(".a-GV-footer").outerHeight()||0},refresh:function(a){this.view$.tableModelView(Zb)},resize:function(){this.view$.tableModelView("resize")},isConfigured:function(){return!0}};R(a.extend({},Me,{title:n("ICON"),internalIdentifier:hc,cssClass:Ha,icon:"icon-ig-icons",supports:{sort:!1},viewConfig:function(b,c){var d=b.igConfig,e=!1,f=d.views.icon;return c=a.extend(!0,{},d.defaultIconViewOptions,c),f.customIcon?(f.customIcon.trim().toLowerCase().match(/\s*<li/)?c.recordTemplate=f.customIcon:c.recordTemplate="<li>"+f.customIcon+"</li>",f.customIcon.toLowerCase().indexOf("href=")>=0&&(e=!0)):(c.labelColumn=f.labelColumn,f.iconClassColumn&&(c.iconClassColumn=f.iconClassColumn),f.imageURLColumn&&(c.imageURLColumn=f.imageURLColumn),f.imageAttributes&&(c.imageAttributes=f.imageAttributes),f.linkAttributes&&(c.linkAttributes=f.linkAttributes),f.linkTarget&&(c.linkTarget=!0,e=!0),c.linkTargetColumn&&(e=!0)),c.useIconList=!0,e&&(c.iconListOptions.navigation=!0),c.iconListOptions.contextMenu&&!c.iconListOptions.contextMenu.hasOwnProperty("actionsContext")&&(c.iconListOptions.contextMenu.actionsContext=b.ig.actions),c},focus:function(){this.view$.tableModelView("getIconList").focus()},canCopy2Clipboard:function(){return this.view$.tableModelView("getIconList").options.allowCopy}})),R(a.extend({},Le,{title:n("GRID"),internalIdentifier:gc,cssClass:Ga,icon:"icon-ig-report",supports:{cellSelection:!0,edit:!0,highlight:!0,controlBreak:!0,aggregation:!0,singleRowView:!0,configurableColumns:!0,download:!0},gotoCell:function(a,b){return this.singleRowMode?this.singleRowView$.recordView("gotoField",a,b):this.view$.grid("gotoCell",a,b)},lockActive:function(){this.singleRowMode?this.singleRowView$.recordView("lockActive"):this.view$.grid("lockActive")},unlockActive:function(){this.singleRowMode?this.singleRowView$.recordView("unlockActive"):this.view$.grid("unlockActive")}})),R(a.extend({},Me,{title:n("DETAIL"),internalIdentifier:ic,cssClass:Ia,icon:"icon-ig-details",supports:{selection:!1,sort:!1},viewConfig:function(b,c){var d=b.igConfig,e=d.views.detail;return c.beforeTemplate=e.beforeRows,c.recordTemplate=e.row,c.afterTemplate=e.afterRows,c.useIconList=!1,a.extend(!0,{},d.defaultDetailViewOptions,c)},focus:function(){this.view$.find(":focusable").first().focus()}})),R({title:n("CHART"),internalIdentifier:jc,cssClass:Ja,icon:"icon-ig-chart",supports:{selection:!1,sort:!1,changeRowsPerPage:!1},initDialog:function(b){var c,d,f,g,h=[],i=[],j=[],k=n(re),l=b.options.config.columns;for(h.push({value:"",label:k}),i.push({value:"",label:k}),j.push({value:"",label:k}),f=0;f<l.length;f++)d=l[f],d.specialType||d.isHidden||(g||(g=d),h.push({value:d.id,label:b._getColumnLabel(d.id)}),d.dataType===Rd&&i.push({value:d.id,label:b._getColumnLabel(d.id)}),d.dataType!==Rd&&d.dataType!==Sd||j.push({value:d.id,label:b._getColumnLabel(d.id)}));c=[{value:"",label:n(re)},{value:ue.CNT,label:n(ue.CNT)},{value:ue.CNT_DIST,label:n(ue.CNT_DIST)},{value:ue.APPR_CNT_DIST,label:n(ue.APPR_CNT_DIST)},{value:ue.MIN,label:n(ue.MIN)},{value:ue.MAX,label:n(ue.MAX)},{value:ue.SUM,label:n(ue.SUM)},{value:ue.AVG,label:n(ue.AVG)}],this.dialog$=b._createDialog("chart",function(a){a(Rb,{id:"CH_TYPE",iconOnly:!1,options:[{value:Xd,label:n("AREA"),iconCssClasses:"icon-region-chart-area"},{value:Yd,label:n("BAR"),iconCssClasses:"icon-region-chart-bar"},{value:Zd,label:n("BUBBLE"),iconCssClasses:"icon-region-chart-bubble"},{value:$d,label:n("DONUT"),iconCssClasses:"icon-region-chart-donut"},{value:_d,label:n("FUNNEL"),iconCssClasses:"icon-region-chart-funnel"},{value:ae,label:n("LINE"),iconCssClasses:"icon-region-chart-line"},{value:be,label:n("LINE_WITH_AREA"),iconCssClasses:"icon-region-chart-line-area"},{value:ce,label:n("PIE"),iconCssClasses:"icon-region-chart-pie"},{value:de,label:n("POLAR"),iconCssClasses:"icon-region-chart-polar"},{value:ee,label:n("RADAR"),iconCssClasses:"icon-region-chart-radar"},{value:fe,label:n("RANGE"),iconCssClasses:"icon-region-chart-range-bar"},{value:ge,label:n("SCATTER"),iconCssClasses:"icon-region-chart-scatter"},{value:he,label:n("STOCK"),iconCssClasses:"icon-region-chart-stock"}]}),a(Mb,{id:"CH_ORIENTATION",options:[{value:ie,label:n("VERTICAL")},{value:je,label:n("HORIZONTAL")}]}),a(Mb,{id:"CH_LABEL_COLUMN",options:h}),a(Mb,{id:"CH_VALUE_COLUMN",options:i}),a(Mb,{id:"CH_VALUE_FUNCTION",options:c}),a(Mb,{id:"CH_X_COLUMN",options:j}),a(Mb,{id:"CH_X_FUNCTION",options:c}),a(Mb,{id:"CH_Y_COLUMN",options:i}),a(Mb,{id:"CH_Y_FUNCTION",options:c}),a(Mb,{id:"CH_Z_COLUMN",options:i}),a(Mb,{id:"CH_Z_FUNCTION",options:c}),a(Mb,{id:"CH_OPEN_COLUMN",options:i}),a(Mb,{id:"CH_OPEN_FUNCTION",options:c}),a(Mb,{id:"CH_CLOSE_COLUMN",options:i}),a(Mb,{id:"CH_CLOSE_FUNCTION",options:c}),a(Mb,{id:"CH_HIGH_COLUMN",options:i}),a(Mb,{id:"CH_HIGH_FUNCTION",options:c}),a(Mb,{id:"CH_LOW_COLUMN",options:i}),a(Mb,{id:"CH_LOW_FUNCTION",options:c}),a(Mb,{id:"CH_VOLUME_COLUMN",options:i}),a(Mb,{id:"CH_VOLUME_FUNCTION",options:c}),a(Mb,{id:"CH_TARGET_COLUMN",options:i}),a(Mb,{id:"CH_TARGET_FUNCTION",options:c}),a(Mb,{id:"CH_SERIES_COLUMN",options:h}),a(Mb,{id:"CH_STACK",options:[{value:le,label:n("OFF")},{value:ke,
label:n("ON")}]}),a(Mb,{id:"CH_SORT_BY",options:[]}),b._renderSortControls(a,"CH_SORT_"),a(Lb,{id:"CH_AXIS_LABEL_TITLE",maxChars:255}),a(Lb,{id:"CH_AXIS_VALUE_TITLE",maxChars:255}),a(Lb,{id:"CH_AXIS_VALUE_DECIMAL"})},{viewDialog:!0,width:750,height:450,titleKey:"CHART",modelName:"chartConfig",modelOptions:{fields:{id:{canHide:!1,hidden:!0,seq:0},type:{label:"TYPE",elementId:"CH_TYPE",seq:10,defaultValue:Yd},orientationId:{label:"ORIENTATION",elementId:"CH_ORIENTATION",seq:20,fieldColSpan:7,defaultValue:ie},labelColumnId:{label:"LABEL_COLUMN",elementId:"CH_LABEL_COLUMN",seq:30,fieldColSpan:7,defaultValue:""},valueColumnId:{label:"VALUE_COLUMN",elementId:"CH_VALUE_COLUMN",seq:40,fieldColSpan:7,defaultValue:""},valueFunctionId:{label:"AGGREGATION",elementId:"CH_VALUE_FUNCTION",seq:45,fieldColSpan:5,defaultValue:""},xColumnId:{label:"X_COLUMN",elementId:"CH_X_COLUMN",seq:50,fieldColSpan:7,defaultValue:""},xFunctionId:{label:"AGGREGATION",elementId:"CH_X_FUNCTION",seq:55,fieldColSpan:5,defaultValue:""},yColumnId:{label:"Y_COLUMN",elementId:"CH_Y_COLUMN",seq:60,fieldColSpan:7,defaultValue:""},yFunctionId:{label:"AGGREGATION",elementId:"CH_Y_FUNCTION",seq:65,fieldColSpan:5,defaultValue:""},openColumnId:{label:"OPEN_COLUMN",elementId:"CH_OPEN_COLUMN",seq:70,fieldColSpan:7,defaultValue:""},openFunctionId:{label:"AGGREGATION",elementId:"CH_OPEN_FUNCTION",seq:75,fieldColSpan:5,defaultValue:""},closeColumnId:{label:"CLOSE_COLUMN",elementId:"CH_CLOSE_COLUMN",seq:80,fieldColSpan:7,defaultValue:""},closeFunctionId:{label:"AGGREGATION",elementId:"CH_CLOSE_FUNCTION",seq:85,fieldColSpan:5,defaultValue:""},highColumnId:{label:"HIGH_COLUMN",elementId:"CH_HIGH_COLUMN",seq:90,fieldColSpan:7,defaultValue:""},highFunctionId:{label:"AGGREGATION",elementId:"CH_HIGH_FUNCTION",seq:95,fieldColSpan:5,defaultValue:""},lowColumnId:{label:"LOW_COLUMN",elementId:"CH_LOW_COLUMN",seq:100,fieldColSpan:7,defaultValue:""},lowFunctionId:{label:"AGGREGATION",elementId:"CH_LOW_FUNCTION",seq:105,fieldColSpan:5,defaultValue:""},volumeColumnId:{label:"VOLUME_COLUMN",elementId:"CH_VOLUME_COLUMN",seq:110,fieldColSpan:7,defaultValue:""},volumeFunctionId:{label:"AGGREGATION",elementId:"CH_VOLUME_FUNCTION",seq:115,fieldColSpan:5,defaultValue:""},targetColumnId:{label:"TARGET_COLUMN",elementId:"CH_TARGET_COLUMN",seq:120,fieldColSpan:7,defaultValue:""},targetFunctionId:{label:"AGGREGATION",elementId:"CH_TARGET_FUNCTION",seq:125,fieldColSpan:5,defaultValue:""},zColumnId:{label:"Z_COLUMN",elementId:"CH_Z_COLUMN",seq:130,fieldColSpan:7,defaultValue:""},zFunctionId:{label:"AGGREGATION",elementId:"CH_Z_FUNCTION",seq:135,fieldColSpan:5,defaultValue:""},seriesColumnId:{label:"SERIES_COLUMN",elementId:"CH_SERIES_COLUMN",seq:140,fieldColSpan:7,defaultValue:""},stackId:{label:"STACK",elementId:"CH_STACK",seq:143,fieldColSpan:5,defaultValue:le},sortBy:{label:"SORT_BY",elementId:"CH_SORT_BY",seq:145,fieldColSpan:7,defaultValue:n("LABEL_COLUMN")},sortDirection:{label:"DIRECTION",elementId:"CH_SORT_DIRECTION",seq:147,fieldColSpan:3,defaultValue:Ec},sortNulls:{label:"NULLS",elementId:"CH_SORT_NULLS",seq:149,fieldColSpan:2,defaultValue:Hc},axisLabelTitle:{label:"AXIS_LABEL_TITLE",elementId:"CH_AXIS_LABEL_TITLE",seq:150,fieldColSpan:7},axisValueTitle:{label:"AXIS_VALUE_TITLE",elementId:"CH_AXIS_VALUE_TITLE",seq:170,fieldColSpan:7},axisValueDecimal:{label:"AXIS_VALUE_DECIMAL",elementId:"CH_AXIS_VALUE_DECIMAL",seq:180,fieldColSpan:3}}},init:function(c,d,e){function f(){var b=k.val();l.val();switch(N([l,m,o,p,q,r,s,t,u,v,w,x,y,z,A,B,D,E,F,G,H,I,J,K,L,O,Q,R,S,T]),g(),h=[l,m,o,y,z,E,A,B,D,R,S,T],i=[m,o,E,R,S,T],b){case Xd:M(h),P([m,o],!0),P([p,q,r,s,t,u,v],!1),R.empty(),j={},j[xe.LABEL]=n("LABEL_COLUMN"),j[xe.VALUE]=n("VALUE_COLUMN"),a.each(j,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))});break;case Yd:M([l,m,o,r,y,z,E,H,A,B,D,R,S,T]),P([m,o],!0),P([p,q,r,s,t,u,v],!1),U=R.val(),R.empty(),j={},j[xe.LABEL]=n("LABEL_COLUMN"),j[xe.VALUE]=n("VALUE_COLUMN"),j[xe.Z]=n("Z_COLUMN"),a.each(j,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case Zd:M([m,p,q,r,F,G,H,A,B,D,R,S,T]),P([m,p,q,r],!0),P([o,s,t,u,v],!1),U=R.val(),R.empty(),j={},j[xe.LABEL]=n("LABEL_COLUMN"),j[xe.X]=n("X_COLUMN"),j[xe.Y]=n("Y_COLUMN"),j[xe.Z]=n("Z_COLUMN"),a.each(j,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case $d:M([m,o,E,R,S,T,D]),P([m,o],!0),P([p,q,r,s,t,u,v],!1),U=R.val(),R.empty(),j={},j[xe.LABEL]=n("LABEL_COLUMN"),j[xe.VALUE]=n("VALUE_COLUMN"),a.each(j,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case _d:M([l,m,o,x,E,Q,R,S,T]),P([m,o],!0),P([p,q,r,s,t,u,v],!1),U=R.val(),R.empty(),j={},j[xe.LABEL]=n("LABEL_COLUMN"),j[xe.VALUE]=n("VALUE_COLUMN"),j[xe.TARGET]=n("TARGET_COLUMN"),a.each(j,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case ae:M(h),P([m,o],!0),P([p,q,r,s,t,u,v],!1),U=R.val(),R.empty(),j={},j[xe.LABEL]=n("LABEL_COLUMN"),j[xe.VALUE]=n("VALUE_COLUMN"),a.each(j,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case be:M(h),P([m,o],!0),P([p,q,r,s,t,u,v],!1),U=R.val(),R.empty(),j={},j[xe.LABEL]=n("LABEL_COLUMN"),j[xe.VALUE]=n("VALUE_COLUMN"),a.each(j,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case ce:M([m,o,E,D,R,S,T]),P([m,o],!0),P([p,q,r,s,t,u,v],!1);break;case de:M(i),P([m,o],!0),P([p,q,r,s,t,u,v],!1),U=R.val(),R.empty(),j={},j[xe.LABEL]=n("LABEL_COLUMN"),j[xe.VALUE]=n("VALUE_COLUMN"),a.each(j,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case ee:M(i),P([m,o],!0),P([p,q,r,s,t,u,v],!1),U=R.val(),R.empty(),j={},j[xe.LABEL]=n("LABEL_COLUMN"),j[xe.VALUE]=n("VALUE_COLUMN"),a.each(j,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case fe:M([l,m,u,v,r,y,K,L,H,A,B,D,R,S,T]),P([u,v],!0),P([m,o,p,q,r,s,t],!1),U=R.val(),R.empty(),j={},j[xe.LABEL]=n("LABEL_COLUMN"),j[xe.HIGH]=n("HIGH_COLUMN"),j[xe.LOW]=n("LOW_COLUMN"),j[xe.Z]=n("Z_COLUMN"),a.each(j,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case he:M([m,s,t,u,v,w,I,J,K,L,O]),P([m,s,t,u,v],!0),P([o,p,q,r],!1);break;case ge:M([m,p,q,y,F,G,A,B,D,R,S,T]),P([m,p,q],!0),P([o,r,s,t,u,v],!1),U=R.val(),R.empty(),j={},j[xe.LABEL]=n("LABEL_COLUMN"),j[xe.X]=n("X_COLUMN"),j[xe.Y]=n("Y_COLUMN"),a.each(j,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U)}}function g(){c.setValue(e.recordView("getRecord"),"sortBy",R.val()),c.setValue(e.recordView("getRecord"),"sortDirection",S.val()),c.setValue(e.recordView("getRecord"),"sortNulls",T.val()),c.setValue(e.recordView("getRecord"),"orientationId",l.val()),c.setValue(e.recordView("getRecord"),"stackId",z.val())}var h,i,j={},k=b._getElement("CH_TYPE"),l=b._getElement("CH_ORIENTATION"),m=b._getElement("CH_LABEL_COLUMN"),o=b._getElement("CH_VALUE_COLUMN"),p=b._getElement("CH_X_COLUMN"),q=b._getElement("CH_Y_COLUMN"),r=b._getElement("CH_Z_COLUMN"),s=b._getElement("CH_OPEN_COLUMN"),t=b._getElement("CH_CLOSE_COLUMN"),u=b._getElement("CH_HIGH_COLUMN"),v=b._getElement("CH_LOW_COLUMN"),w=b._getElement("CH_VOLUME_COLUMN"),x=b._getElement("CH_TARGET_COLUMN"),y=b._getElement("CH_SERIES_COLUMN"),z=b._getElement("CH_STACK"),A=b._getElement("CH_AXIS_LABEL_TITLE"),B=b._getElement("CH_AXIS_VALUE_TITLE"),D=b._getElement("CH_AXIS_VALUE_DECIMAL"),E=b._getElement("CH_VALUE_FUNCTION"),F=b._getElement("CH_X_FUNCTION"),G=b._getElement("CH_Y_FUNCTION"),H=b._getElement("CH_Z_FUNCTION"),I=b._getElement("CH_OPEN_FUNCTION"),J=b._getElement("CH_CLOSE_FUNCTION"),K=b._getElement("CH_HIGH_FUNCTION"),L=b._getElement("CH_LOW_FUNCTION"),O=b._getElement("CH_VOLUME_FUNCTION"),Q=b._getElement("CH_TARGET_FUNCTION"),R=b._getElement("CH_SORT_BY"),S=b._getElement("CH_SORT_DIRECTION"),T=b._getElement("CH_SORT_NULLS"),U=R.val();k.change(f),e.on("apexbeginrecordedit",function(a,c){var d=k.val();C(b._getId("CH_TYPE"),d),f()})},load:function(c){var d,e,f=a.extend({},b.getChart());f.axis&&(f.axis.label&&(f.axisLabelTitle=f.axis.label),f.axis.value&&(f.axisValueTitle=f.axis.value),f.axis.valueDecimalPlaces&&(f.axisValueDecimal=f.axis.valueDecimalPlaces),delete f.axis),f.stackId=f.stack,delete f.stack,f.orientationId=f.orientation,delete f.orientation;for(d in f.chartColumns)if(f.chartColumns.hasOwnProperty(d))switch(e=f.chartColumns[d],d){case"LABEL":f.type in{bar:1,bubble:1,area:1,funnel:1,pie:1,donut:1,polar:1,radar:1,line:1,lineWithArea:1,range:1,stock:1,scatter:1}&&(f.labelColumnId=e.columnId,e.sort&&(f.sortBy="LABEL",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls));break;case"VALUE":f.valueColumnId=e.columnId,e["function"]&&(f.valueFunctionId=e["function"]),e.sort&&(f.sortBy="VALUE",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls);break;case"X":f.xColumnId=e.columnId,e["function"]&&(f.xFunctionId=e["function"]),e.sort&&(f.sortBy="X",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls);break;case"Y":f.yColumnId=e.columnId,e["function"]&&(f.yFunctionId=e["function"]),e.sort&&(f.sortBy="Y",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls);break;case"Z":f.zColumnId=e.columnId,e["function"]&&(f.zFunctionId=e["function"]),e.sort&&(f.sortBy="Z",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls);break;case"OPEN":f.openColumnId=e.columnId,e["function"]&&(f.openFunctionId=e["function"]);break;case"CLOSE":f.closeColumnId=e.columnId,e["function"]&&(f.closeFunctionId=e["function"]);break;case"HIGH":f.highColumnId=e.columnId,e["function"]&&(f.highFunctionId=e["function"]),e.sort&&(f.sortBy="HIGH",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls);break;case"LOW":f.lowColumnId=e.columnId,e["function"]&&(f.lowFunctionId=e["function"]),e.sort&&(f.sortBy="LOW",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls);break;case"VOLUME":f.volumeColumnId=e.columnId,e["function"]&&(f.volumeFunctionId=e["function"]);break;case"TARGET":f.targetColumnId=e.columnId,e["function"]&&(f.targetFunctionId=e),e.sort&&(f.sortBy="TARGET",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls);break;case"SERIES_NAME":f.seriesColumnId=e.columnId}delete f.chartColumns,c.setData(f)},validate:function(a){var b,c=!0,d=a.getRecord();return d.sortBy&&(b=d.sortBy.toLowerCase()+"ColumnId",d.hasOwnProperty(b)?a.setValidity(Zc,d.sortBy,"sortBy"):(a.setValidity(Yc,d.sortBy,"sortBy",e.formatMessage("APEX.IG.INVALID_SORT_BY",d.sortBy)),c=!1)),c},store:function(c){var d,e,f,g,h,i,j,k,l,m,n,o,p=a.extend({},c.getRecord());p.axis={},p.axis={label:p.axisLabelTitle,value:p.axisValueTitle,valueDecimalPlaces:p.axisValueDecimal},delete p.axisLabelTitle,delete p.axisValueTitle,delete p.axisValueDecimal,p.stack=p.stackId,p.orientation=p.orientationId,p.chartColumns={},p.type in{bar:1,bubble:1,area:1,funnel:1,pie:1,donut:1,polar:1,radar:1,line:1,lineWithArea:1,range:1,stock:1,scatter:1}?p.labelColumnId&&(d={columnId:p.labelColumnId,columnType:Tb},p.sortBy===xe.LABEL&&(d.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.chartColumns.LABEL=d):delete p.chartColumns.LABEL,p.type in{bar:1,area:1,funnel:1,pie:1,donut:1,polar:1,radar:1,line:1,lineWithArea:1}?p.valueColumnId&&(e={columnId:p.valueColumnId,columnType:Tb},p.sortBy===xe.VALUE&&(e.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.valueFunctionId&&(e["function"]=p.valueFunctionId),p.chartColumns.VALUE=e):delete p.chartColumns.VALUE,p.type in{bubble:1,scatter:1}?(p.xColumnId&&(f={columnId:p.xColumnId,columnType:Tb},"X"===p.sortBy&&(f.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.xFunctionId&&(f["function"]=p.xFunctionId),p.chartColumns.X=f),p.yColumnId&&(g={columnId:p.yColumnId,columnType:Tb},"Y"===p.sortBy&&(g.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.yFunctionId&&(g["function"]=p.yFunctionId),p.chartColumns.Y=g)):(delete p.chartColumns.X,delete p.chartColumns.Y),p.type in{bar:1,bubble:1}?p.zColumnId&&(h={columnId:p.zColumnId,columnType:Tb},"Z"===p.sortBy&&(h.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.zFunctionId&&(h["function"]=p.zFunctionId),p.chartColumns.Z=h):delete p.chartColumns.Z,p.type===he?(p.openColumnId&&(i={columnId:p.openColumnId,columnType:Tb},p.openFunctionId&&(i["function"]=p.openFunctionId),p.chartColumns.OPEN=i),p.closeColumnId&&(j={columnId:p.closeColumnId,columnType:Tb},p.closeFunctionId&&(j["function"]=p.closeFunctionId),p.chartColumns.CLOSE=j),p.volumeColumnId&&(m={columnId:p.volumeColumnId,columnType:Tb},p.volumeFunctionId&&(m["function"]=p.volumeFunctionId),p.chartColumns.VOLUME=m)):(delete p.chartColumns.OPEN,delete p.chartColumns.CLOSE,delete p.chartColumns.VOLUME),p.type in{range:1,stock:1}?(p.highColumnId&&(k={columnId:p.highColumnId,columnType:Tb},"HIGH"===p.sortBy&&(k.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.highFunctionId&&(k["function"]=p.highFunctionId),p.chartColumns.HIGH=k),p.lowColumnId&&(l={columnId:p.lowColumnId,columnType:Tb},"LOW"===p.sortBy&&(l.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.lowFunctionId&&(l["function"]=p.lowFunctionId),p.chartColumns.LOW=l)):(delete p.chartColumns.HIGH,delete p.chartColumns.LOW),p.type===_d?p.targetColumnId&&(n={columnId:p.targetColumnId,columnType:Tb},"TARGET"===p.sortBy&&(n.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.targetFunctionId&&(n["function"]=p.targetFunctionId),p.chartColumns.TARGET=n):delete p.chartColumns.TARGET,p.seriesColumnId&&(o={columnId:p.seriesColumnId,columnType:Tb},p.chartColumns.SERIES_NAME=o),delete p.sortBy,delete p.sortDirection,delete p.sortNulls,delete p.stackId,delete p.orientationId,delete p.xColumnId,delete p.xFunctionId,delete p.yFunctionId,delete p.yColumnId,delete p.valueColumnId,delete p.valueFunctionId,delete p.labelColumnId,delete p.zColumnId,delete p.zFunctionId,delete p.openColumnId,delete p.openFunctionId,delete p.closeColumnId,delete p.closeFunctionId,delete p.volumeColumnId,delete p.volumeFunctionId,delete p.highColumnId,delete p.highFunctionId,delete p.lowColumnId,delete p.lowFunctionId,delete p.targetColumnId,delete p.targetFunctionId,delete p.seriesColumnId,b.setChart(p)}})},setColumnConfig:function(b){var c,d,e={},f={},g=b.baseModelColumns,h=b.ig,i=b.currentReportSettings.views.chart.chartColumns,j=["CLOSE","HIGH","LABEL","LOW","OPEN","SERIES_NAME","TARGET","VALUE","VOLUME","X","Y","Z"],k=0;for(d=0;d<j.length;d++)i.hasOwnProperty(j[d])&&(e=a.extend(!0,{},g[i[j[d]].columnId]),c=h._getColumn(i[j[d]].columnId),e.seq=k,e.index=k,f[j[d]]=e,k++);this.modelColumns=f,this.specialColumns={}},initView:function(b){var d,e,f,g,h,i,j,k,m,n,o,p,q=b.ig,r=this,s=q._currentReportSettings().views.chart,t=b.igConfig,u=[],v="disabled";require(["ojs/ojcore","ojs/ojchart","ojs/ojvalidation"],function(){function b(a){var b,c=oj.ConverterFactory.CONVERTER_TYPE_NUMBER,d=q._getColumn(a);return d.filter.dataType===Sd||d.filter.dataType===Ud||d.filter.dataType===Vd||d.filter.dataType===Wd?(c=oj.ConverterFactory.CONVERTER_TYPE_DATETIME,b=w(d)):d.filter.dataType===Rd&&(b=x(d)),b?oj.Validation.converterFactory(c).createConverter(b):{}}function w(b){var c=b.appearance.formatMask;return c?a.each(ze,function(a,b){b.value===c&&(c=b.label)}):c={formatType:"date",dateFormat:"medium"},c}function x(b){var c,d=b.appearance.formatExample.trim();return s.axis&&s.axis.valueDecimalPlaces&&(c=s.axis.valueDecimalPlaces),d?a.each(ye,function(a,b){b.value===d&&(d=b.label)}):d={style:"decimal",maximumFractionDigits:c?c:2},d}function y(){var b=["pie","funnel","scatter","bubble","stock","polar","radar"];e=r.model,e.fetch(0,function(d){d&&c.warn("No data fetched for chart");var f=e.transform({showNullAs:t.appearance.showNullValue,offset:0,template:u},g);if(a.inArray(f.type,b)===-1&&f.series.length>1&&"mixedFrequency"!==f.timeAxisType&&"skipGaps"!==f.timeAxisType){l.chartSortArray(f.groups,f.sorting);for(var i=0;i<f.series.length;i++)l.chartFillGaps(f.groups,f.series[i].items,f.sorting,!0)}h.ojChart(Zb),r.resize()})}switch(s.chartColumns.LABEL.columnId&&(j=q._getColumn(s.chartColumns.LABEL.columnId),j.filter.dataType!==Sd&&j.filter.dataType!==Ud&&j.filter.dataType!==Vd&&j.filter.dataType!==Wd||(v="enabled")),f={legend:{rendered:me,position:"end"},orientation:s.orientation,stack:s.stack,animationOnDisplay:me,animationOnDataChange:me,hoverBehavior:"dim",groups:[],series:[],valueFormats:[],timeAxisType:v},s.type){case Xd:g=a.extend({},f,{type:s.type,legend:s.chartColumns.SERIES_NAME?{rendered:me}:{rendered:le},coordinateSystem:ne,valueFormats:[{type:Xc,converter:b(s.chartColumns.LABEL.columnId)},{type:"y",converter:b(s.chartColumns.VALUE.columnId)}],xAxis:{},yAxis:{}});break;case Yd:g=a.extend({},f,{type:s.type,legend:s.chartColumns.SERIES_NAME?{rendered:me}:{rendered:le},coordinateSystem:ne,valueFormats:[{type:Xc,converter:b(s.chartColumns.LABEL.columnId)},{type:"y",converter:b(s.chartColumns.VALUE.columnId)}],xAxis:{},yAxis:{}});break;case Zd:g=a.extend({},f,{type:s.type,legend:{rendered:le},coordinateSystem:ne,xAxis:{},yAxis:{}});break;case $d:g=a.extend({},f,{type:ce,styleDefaults:{pieInnerRadius:.5},legend:{rendered:me},hideAndShowBehavior:"withRescale",valueFormats:[{type:Xc,converter:b(s.chartColumns.LABEL.columnId)},{type:_c,converter:b(s.chartColumns.VALUE.columnId)}]});break;case ce:g=a.extend({},f,{type:s.type,styleDefaults:{pieInnerRadius:0},legend:{rendered:me},hideAndShowBehavior:"withRescale",valueFormats:[{type:Xc,converter:b(s.chartColumns.LABEL.columnId)},{type:_c,converter:b(s.chartColumns.VALUE.columnId)}]});break;case _d:g=a.extend({},f,{type:s.type,legend:{rendered:me},valueFormats:[{type:Xc,converter:b(s.chartColumns.LABEL.columnId)},{type:_c,converter:b(s.chartColumns.VALUE.columnId)}]}),s.chartColumns.TARGET&&g.valueFormats.push({type:"target",converter:b(s.chartColumns.TARGET.columnId)});break;case ae:g=a.extend({},f,{type:s.type,legend:s.chartColumns.SERIES_NAME?{rendered:me}:{rendered:le},coordinateSystem:ne,valueFormats:[{type:Xc,converter:b(s.chartColumns.LABEL.columnId)},{type:_c,converter:b(s.chartColumns.VALUE.columnId)}],xAxis:{},yAxis:{}});break;case be:g=a.extend({},f,{type:s.type,legend:s.chartColumns.SERIES_NAME?{rendered:me}:{rendered:le},coordinateSystem:ne,valueFormats:[{type:Xc,converter:b(s.chartColumns.LABEL.columnId)},{type:_c,converter:b(s.chartColumns.VALUE.columnId)}],xAxis:{},yAxis:{}});break;case de:g=a.extend({},f,{type:Yd,coordinateSystem:s.type,legend:{rendered:le},valueFormats:[{type:Xc,converter:b(s.chartColumns.LABEL.columnId)},{type:_c,converter:b(s.chartColumns.VALUE.columnId)}],polarGridShape:"circle",stack:ke});break;case ee:g=a.extend({},f,{type:Xd,coordinateSystem:de,legend:{rendered:le},valueFormats:[{type:Xc,converter:b(s.chartColumns.LABEL.columnId)},{type:_c,converter:b(s.chartColumns.VALUE.columnId)}],polarGridShape:"polygon",stack:ke});break;case fe:g=a.extend({},f,{type:Yd,legend:s.chartColumns.SERIES_NAME?{rendered:me}:{rendered:le},valueFormats:[{type:Xc,converter:b(s.chartColumns.LABEL.columnId)},{type:"high",converter:b(s.chartColumns.HIGH.columnId)},{type:"low",converter:b(s.chartColumns.LOW.columnId)}],xAxis:{},yAxis:{}});break;case ge:g=a.extend({},f,{type:s.type,legend:s.chartColumns.SERIES_NAME?{rendered:me}:{rendered:le},coordinateSystem:ne,valueFormats:[{type:Xc,converter:b(s.chartColumns.LABEL.columnId)},{type:"x",converter:b(s.chartColumns.X.columnId)},{type:"y",converter:b(s.chartColumns.Y.columnId)}],xAxis:{},yAxis:{}});break;case he:g=a.extend({},f,{type:s.type,zoomAndScroll:"delayed",initialZooming:"first",legend:{rendered:me},dataCursor:ke,dataCursorBehavior:"smooth",valueFormats:[{type:Xc,converter:b(s.chartColumns.LABEL.columnId)},{type:"high",converter:b(s.chartColumns.HIGH.columnId)},{type:"low",converter:b(s.chartColumns.LOW.columnId)},{type:"open",converter:b(s.chartColumns.OPEN.columnId)},{type:"close",converter:b(s.chartColumns.CLOSE.columnId)}],xAxis:{},yAxis:{}}),s.chartColumns.VOLUME&&g.valueFormats.push({type:"volume",converter:b(s.chartColumns.VOLUME.columnId)}),g.series.type="candlestick"}if(s.type in{area:1,bar:1,bubble:1,line:1,lineWithArea:1,range:1,stock:1,scatter:1}){switch(s.type){case he:k=s.chartColumns.OPEN.columnId;break;case fe:k=s.chartColumns.HIGH.columnId;break;case ge:k=s.chartColumns.X.columnId;break;case Zd:k=s.chartColumns.X.columnId;break;default:k=s.chartColumns.VALUE.columnId}s.axis&&(s.axis.label&&(m=s.axis.label),s.axis.value&&(n=s.axis.value)),g.xAxis={title:m,baselineScaling:"zero",majorTick:{rendered:ke},minorTick:{rendered:le},tickLabel:{rendered:ke,converter:b(s.chartColumns.LABEL.columnId),scaling:Ic},position:me,rotation:le},g.yAxis={title:n,baselineScaling:"zero",position:s.type===he?"end":me,majorTick:{rendered:ke},minorTick:{rendered:le},tickLabel:{rendered:ke,converter:b(k),scaling:Ic}}}if(s.type in{bar:1,area:1,polar:1,radar:1,range:1,line:1,lineWithArea:1,bubble:1,scatter:1,stock:1}){switch(d={path:"groups",uniqueIndexField:"LABEL",item:{name:"LABEL"}},s.type){case Zd:i={name:"LABEL",x:"X",y:"Y",z:"Z",labelPosition:"'none'"};break;case ge:i={name:"LABEL",x:"X",y:"Y",labelPosition:"'none'"};break;case he:i={name:"LABEL",open:"OPEN",close:"CLOSE",high:"HIGH",low:"LOW",volume:"VOLUME"};break;case fe:i={name:"LABEL",high:"HIGH",low:"LOW",labelPosition:"'none'"};break;default:i={label:"VALUE",value:"VALUE",name:"LABEL",labelPosition:"'none'"}}u=s.chartColumns.SERIES_NAME?[d,{path:"series",uniqueIndexField:"SERIES_NAME",item:{name:"SERIES_NAME",displayInLegend:ke}},{path:"series/[SERIES_NAME]/items",item:i}]:[d,{path:"series/0/items",item:i}]}if(s.type in{pie:1,donut:1,funnel:1}&&(o=r.model.getFieldKey("LABEL"),u=[{path:"series",uniqueIndexField:"LABEL",item:function(a,b){return{name:""+b[o],displayInLegend:ke}}},{path:"series/[LABEL]/items",item:{value:"VALUE",targetValue:"TARGET"}}]),s.chartColumns.VALUE){if(s.chartColumns.VALUE.sort)switch(s.chartColumns.VALUE.sort.direction){case"asc":p="ascending";break;case"desc":p="descending"}}else s.chartColumns.LABEL.sort?p="label-"+s.chartColumns.LABEL.sort.direction:(s.chartColumns.SERIES_NAME&&(p="label-asc"),p="off");g.sorting=p,h=r.view$.ojChart(g),h.css({width:"100%","max-width":"100%",height:t.maxHeight?t.maxHeight:"450px"}),y(),r.model.subscribe({viewId:r.view$[0].id,onChange:function(a){a===Zb&&y()},progressView:h})})},resize:function(){this.view$.hasClass("oj-chart")&&this.view$.ojChart(Zb)},destroyView:function(){this.model&&this.model.unSubscribe(this.view$[0].id),this.view$.ojChart(Xb)}})}(apex.jQuery,apex.util,apex.debug,apex.server,apex.lang,apex.actions,apex.region,apex.theme,apex.message,apex.item,apex.model,apex.widget.util);