!function(a,b){var c="u-hidden",d=a.getAttribute,e=function(a,c){return(""+(d(this,"filtertext")||b(this).text())).toLowerCase().indexOf(c)===-1};b.widget("apex.filterable",{options:{filterReveal:!1,filterCallback:e,enhanced:!1,input:null,children:"> li, > option, > optgroup option, > tbody tr"},_create:function(){var a=this.options;b.extend(this,{_search:null,_timer:0}),this._setInput(a.input),a.enhanced||this._filterItems((this._search&&this._search.val()||"").toLowerCase())},_getCreateOptions:a._getCreateOptions,_onKeyUp:function(){var a,b,c=this._search;if(c){if(a=c.val().toLowerCase(),b=d(c[0],"lastval")+"",b&&b===a)return;this._timer&&(window.clearTimeout(this._timer),this._timer=0),this._timer=this._delay(function(){return this._trigger("beforefilter",null,{input:c})!==!1&&(c[0].setAttribute("data-lastval",a),this._filterItems(a),void(this._timer=0))},250)}},_getFilterableItems:function(){var a=this.element,c=this.options.children,d=c?b.isFunction(c)?c():c.nodeName?b(c):c.jquery?c:this.element.find(c):{length:0};return 0===d.length&&(d=a.children()),d},_filterItems:function(a){var d,f,g,h,i=[],j=[],k=this.options,l=this._getFilterableItems();if(null!=a)for(f=k.filterCallback||e,g=l.length,d=0;d<g;d++)h=f.call(l[d],d,a)?j:i,h.push(l[d]);0===j.length?l[k.filterReveal&&0===a.length?"addClass":"removeClass"](c):(b(j).addClass(c),b(i).removeClass(c)),this._refreshChildWidget(),this._trigger("filter",null,{items:l})},_refreshChildWidget:function(){var a,c,d=["listview"];for(c=d.length-1;c>-1;c--)a=d[c],b.apex[a]&&(a=this.element.data("apex-"+a),a&&b.isFunction(a.refresh)&&a.refresh())},_setInput:function(a){var c=this._search;this._timer&&(window.clearTimeout(this._timer),this._timer=0),c&&(this._off(c,"keyup change input"),c=null),a&&(c=a.jquery?a:a.nodeName?b(a):this.document.find(a),this._on(c,{keydown:"_onKeyDown",keypress:"_onKeyPress",keyup:"_onKeyUp",change:"_onKeyUp",input:"_onKeyUp"})),this._search=c},_onKeyDown:function(a){a.keyCode===b.ui.keyCode.ENTER&&(a.preventDefault(),this._preventKeyPress=!0)},_onKeyPress:function(a){this._preventKeyPress&&(a.preventDefault(),this._preventKeyPress=!1)},_setOptions:function(a){var b=!(void 0===a.filterReveal&&void 0===a.filterCallback&&void 0===a.children);this._super(a),void 0!==a.input&&(this._setInput(a.input),b=!0),b&&this.refresh()},_destroy:function(){var a=this.options,b=this._getFilterableItems();a.enhanced?b.toggleClass(c,a.filterReveal):b.removeClass(c)},refresh:function(){this._timer&&(window.clearTimeout(this._timer),this._timer=0),this._filterItems((this._search&&this._search.val()||"").toLowerCase())}})}(apex.widget,apex.jQuery);