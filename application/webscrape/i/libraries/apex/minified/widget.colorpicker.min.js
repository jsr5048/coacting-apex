!function(a,b){a.colorpicker=function(c,d){var e,f,g,h,i;b(c,apex.gPageContext$).each(function(){i=this,d&&d.preview&&("modern"===d.preview.type?(f=b(this).css("font-size"),h=b(this).innerWidth(),g=b("<span id='"+b(this).attr("id")+"_color_preview'></span>"),g.css({height:f,width:f}),lPreviewMargin=Math.round((b(this).outerHeight(!0)-g.outerHeight(!0))/2),g.css({"border-radius":"100%",display:"block",position:"absolute",margin:lPreviewMargin+"px","pointer-events":"none","box-shadow":"0 0 0 1px rgba(0, 0, 0, 0.1) inset"}),b(this).before(g),"rtl"===b(this).css("direction")?b(this).css({"padding-right":g.outerWidth(!0)+"px"}):b(this).css({"padding-left":g.outerWidth(!0)+"px"}),b(this).parent().hasClass("a-GV-columnItem")||b(this).css({width:h+2+"px"}),e="#"+b(this).attr("id")+"_color_preview",d.preview&&d.preview.defaultValue&&b(e).css("background-color",d.preview.defaultValue)):e="classic"===d.preview.type?"#"+this.id+"_PREVIEW":"");var c=b(this).ColorPicker({eventName:"xxx",onSubmit:function(a,c,d,e){$s(e,"#"+c.toUpperCase()),b(e).ColorPickerHide()},onBeforeShow:function(){b(this).ColorPickerSetColor(this.value)},onShow:function(a){return b(a).fadeIn("fast"),!1},onHide:function(a){return b(a).fadeOut("fast"),!1}}),j=b("#"+this.id+"_fieldset",apex.gPageContext$);b(".colorpicker").prop("tabindex",-1).find(".colorpicker_submit").keydown(function(a){13!==a.which&&32!==a.which||(b(this).trigger("click"),a.preventDefault())}).prop("tabindex",0),c.on("keyup",function(){c.ColorPickerSetColor(this.value)}).on("blur",function(){c.ColorPickerHide()}).on("focus",function(){e&&b(e).length>0&&b(e,apex.gPageContext$).css("background-color",this.value)}).on("change",function(){this.value=this.value.toUpperCase(),e&&b(e).length>0&&b(e,apex.gPageContext$).css("background-color",this.value)}),b("#"+this.id+"_PICKER",apex.gPageContext$).click(function(a){c.ColorPickerShow(),a.preventDefault()}),b("#"+this.id+"_PREVIEW",apex.gPageContext$).css("background",this.value),a.initPageItem(this.id,{enable:function(){c.prop("disabled")===!0&&(c.prop("disabled",!1).removeClass("apex_disabled"),b("#"+this.id+"_PICKER",apex.gPageContext$).click(function(a){c.ColorPickerShow(),a.preventDefault()}),a.util.enableIcon(j,"#"))},disable:function(){c.prop("disabled")===!1&&(c.prop("disabled",!0).addClass("apex_disabled"),a.util.disableIcon(j))},show:function(){j.show()},hide:function(){j.hide()},getPopupSelector:function(){return".colorpicker"}})})}}(apex.widget,apex.jQuery);