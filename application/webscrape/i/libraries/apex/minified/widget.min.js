apex.widget=function(a,b){"use strict";function c(a){return a.replace(/^[a-z]/,function(a){return a.toUpperCase()})}function d(a,b){var c;a=a.jquery?a[0]:a,a&&a.getAttribute&&(c=a.getAttribute("data-"+b));try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:e.test(c)?JSON.parse(c):c)}catch(d){}return c}var e=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,f=/[A-Z]/g,g=function(a){return"-"+a.toLowerCase()},h={waitPopup:function(a){var c,d,e;return a?(c=b('<div id="apex_wait_popup" class="apex_wait_popup"></div><div id="apex_wait_overlay" class="apex_wait_overlay"></div>').prependTo("body"),d=c.first(),a.indexOf("<img")>=0&&d.hide(),window.setTimeout(function(){d.html(a).find("img").hide().on("load",function(){b(this).show(),d.show()})},10)):(c=b('<div id="apex_wait_overlay" class="apex_wait_overlay"></div>').prependTo("body"),window.setTimeout(function(){void 0!==c&&(e=apex.util.showSpinner())},10),c.css("visibility","visible")),{remove:function(){void 0!==e&&e.remove(),c.remove(),c=void 0}}},initPageItem:function(a,b){apex.item.create(a,b)},textareaClob:{_upload:function(a,b,c){var d,e=$s_Split($v(a),4e3);d=apex.server.widget("apex_utility",{p_flow_step_id:"0",x04:"CLOB_CONTENT",x05:"SET",f01:e},{dataType:"text"}),d.done(function(){$s(a,c),apex.submit(b)})},upload:function(a,b){this._upload(a,b,"")},uploadNonEmpty:function(a,b){0===$v(a).replace(/\s/g,"").length||""===$v(a)||"."===$v(a)?($s(a,""),apex.submit(b)):this._upload(a,b,".")}},contextMenuMixin:{options:{contextMenuAction:null,contextMenu:null,contextMenuId:null},_initContextMenu:function(d,e,f,g){function h(a){var b,c=j.options.contextMenuAction;c&&!e(a)&&(b=f(a),b&&(b.length&&j._select(b,null,!0,!1),c(a),a.preventDefault()))}var i=this.options,j=this,k=this.element,l=this.widgetName,m=c(l);if(i.contextMenu||i.contextMenuId)if(b.apex.menu){if(i.contextMenu){if(i.contextMenu.menubar)throw new Error(m+" contextMenu must not be a menubar");i.contextMenu._originalBeforeOpen=i.contextMenu.beforeOpen,i.contextMenu.beforeOpen=function(a,b){i.contextMenu._originalBeforeOpen&&(b.menuElement=j.contextMenu$,b[l]=k,b.selection=j.getSelection(),g&&g(b),i.contextMenu._originalBeforeOpen(a,b))},i.contextMenu._originalAfterClose=i.contextMenu.afterClose,i.contextMenu.afterClose=function(a,b){i.contextMenu._originalAfterClose&&(b.menuElement=j.contextMenu$,b[l]=k,i.contextMenu._originalAfterClose(a,b)),b.actionTookFocus||j.focus()},this.contextMenu$=b("<div style='display:none'></div>").appendTo("body"),i.contextMenuId&&(this.contextMenu$[0].id=i.contextMenuId),this.contextMenu$.menu(i.contextMenu)}else if(this.contextMenu$=b("#"+i.contextMenuId),0===this.contextMenu$.length||!this.contextMenu$.is(":apex-menu"))throw new Error(m+" contextMenuId not found");i.contextMenuAction&&a.warn(m=" contextMenuAction option ignored when contextMenu option present"),i.contextMenuAction=function(a){var c,e;"contextmenu"===a.type&&0!==a.button?j.contextMenu$.menu("toggle",a.pageX,a.pageY):(c=b(a.target),e=c.offset(),j.contextMenu$.menu("toggle",e.left,e.top+c.closest(d).outerHeight()))}}else a.warn(m+" contextMenu option ignored because menu widget not preset");this._on({keydown:function(a){a.shiftKey&&121===a.which&&h(a)},contextmenu:h})},_destroyContextMenu:function(){this.options.contextMenu&&this.contextMenu$&&this.contextMenu$.remove()},_checkContextMenuOptions:function(a){var b=this.options,d=c(this.widgetName);if("contextMenu"===a||"contextMenuId"===a)throw new Error(d+" "+a+" cannot be set");if("contextMenuAction"===a&&(b.contextMenu||b.contextMenuId))throw new Error(d+" contextMenuAction cannot be set when the contextMenu or contextMenuId option is used")}},getAttribute:d,_getCreateOptions:function(){var a,b,c=this.element[0],e={};if(!d(c,"defaults"))for(a in this.options)b=d(c,a.replace(f,g)),null!=b&&(e[a]=b);return e}};return h}(apex.debug,apex.jQuery);