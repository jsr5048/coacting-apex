!function(a,b,c,d,e){"use strict";function f(a){return a.parent().children().index(a)}function g(a){var b=a.find("a");return b.length?b[0]:a[0]}var h="a-IconList",i="a-IconList-item",j="."+i,k="u-selector",l=k+" "+k+"--single",m="."+k,n="is-selected",o="."+n,p=o+j,q="is-focused",r="is-disabled",s="aria-selected",t="aria-multiselectable",u="aria-labelledby",v="role",w="tabindex",x="u-RTL",y=e.ui.keyCode,z=0,A=function(a,b){a._trigger("selectionChange",b)},B=d.debounce(A,1),C=d.debounce(A,350),D={begin:function(){this.text=""},item:function(a,b,c){b>0&&(this.text+="\r\n"),this.text+=c},end:function(){},toString:function(){return this.text}},E={begin:function(){this.text="<ul>\r\n"},item:function(a,b,c){this.text+="<li>"+d.escapeHTML(c)+"</li>\r\n"},end:function(){this.text+="</ul>\r\n"},toString:function(){return this.text}};e.widget("apex.iconList",e.extend(!0,{version:"18.1",widgetEventPrefix:"iconlist",options:{multiple:!1,itemSelector:!1,addItemSelector:!0,label:!0,navigation:!1,allowCopy:!0,dataTransferFormats:[{format:"text/plain",writer:Object.create(D)},{format:"text/html",writer:Object.create(E)}],selectionChange:null,activate:null},columns:0,rows:0,forwardKey:y.RIGHT,backwardKey:y.LEFT,searchString:"",searchTimerId:null,_create:function(){var a,c=this,d=this.options,f=this.element;d.navigation&&(d.multiple=!1),f.addClass(h).attr(v,"listbox"),d.multiple&&f.attr(t,"true"),"rtl"===f.css("direction")&&(f.addClass(x),this.forwardKey=y.LEFT,this.backwardKey=y.RIGHT),f.attr(u)?(a=e("#"+f.attr(u).split(" ").join(",#")).last(),this.infoId=a.attr("id")+"_info",a.append("<span id='"+this.infoId+"' class='u-VisuallyHidden'></span>")):(this.infoId=(f.attr("id")||"il"+z++)+"_info",f.before("<span id='"+this.infoId+"' class='u-VisuallyHidden'></span>"),f.attr(u,this.infoId),this.addedLabel=!0),this._initContextMenu(i,function(a){return!1},function(a){var b="keydown"===a.type&&c.lastFocused?c.lastFocused:a.target,d=e(b).closest(j);return!!d.length&&(!!d.hasClass(n)||d)}),this._on(this._eventHandlers),d.allowCopy&&b.addHandler(f[0],function(a){return c._copy(a),!0}),this.refresh(),d.disabled&&this._setOption("disabled",d.disabled)},_eventHandlers:{resize:function(a){a.target===this.element[0]&&(this._dim(),a.stopPropagation())},click:function(a){var b,c=this.options,d=c.navigation,f=e(a.target);d&&f.closest("a").length>0&&(a.shiftKey||a.ctrlKey)||(b=f.closest(j),b.length&&(c.itemSelector&&f.closest(m).length>0&&(a.ctrlKey=!0,a.shiftKey=!1),this._select(b,a,!0,!1),d&&this._activate(a),a.preventDefault()))},dblclick:function(a){var b;this.options.navigation||(b=e(a.target).closest(j),b.length&&this._activate(a))},mousedown:function(a){a.preventDefault()},keydown:function(a){var b,c,d,g=this.element,h=null,i=a.which;i===y.HOME?h=g.children().first():i===y.END?h=g.children().last():i===y.DOWN?this.lastFocused&&(b=this._index2RowCol(f(e(this.lastFocused).closest(j))),c=g.children(),b.row<Math.floor((c.length-1)/this.columns)&&(d=this._rowCol2Index(b.row+1,b.column),d>=c.length&&(d=c.length-1),h=c.eq(d))):i===y.UP?this.lastFocused&&(b=this._index2RowCol(f(e(this.lastFocused).closest(j))),c=g.children(),d=this._rowCol2Index(b.row-1,b.column),d>=0&&(h=c.eq(d)),a.stopPropagation()):i===this.backwardKey?this.lastFocused&&(h=e(this.lastFocused).closest(j).prev(),0===h.length&&(h=e(this.lastFocused).closest(j))):i===this.forwardKey?this.lastFocused&&(h=e(this.lastFocused).closest(j).next(),0===h.length&&(h=e(this.lastFocused).closest(j))):i===y.SPACE?this.lastFocused&&!this.searchTimerId&&(h=e(this.lastFocused).closest(j)):i===y.ENTER&&"A"!==a.target.nodeName&&this._activate(a),h&&(this._select(h,a,!0,!0),a.preventDefault())},keypress:function(a){var b,c,d=this;if(0!==a.which&&this.options.label&&!a.altKey&&!a.ctrlKey){if(b=String.fromCharCode(a.which).toLowerCase(),this.searchTimerId)b!==this.searchString&&(this.searchString+=b),clearTimeout(this.searchTimerId),this.searchTimerId=null;else{if(" "===b)return;this.searchString=b}this.searchTimerId=setTimeout(function(){d.searchTimerId=null},500),c=this._findItem(this.searchString),c&&this._select(c,a,!0,!0)}},focusin:function(a){var b=e(a.target).closest(j);0!==b.length&&(b.addClass(q),this._setFocusable(a.target))},focusout:function(a){var b=e(a.target).closest(j);b.removeClass(q)}},_destroy:function(){var a=this.element,c=this.options;a.removeClass(h+" "+r+" "+x).removeAttr(v).removeAttr(t).children().removeClass(i).removeAttr(v).removeAttr(s).removeAttr(w),a.find("a").removeAttr(w).removeAttr(v),c.itemSelector&&c.addItemSelector&&a.find(m).remove(),b.removeHandler(a[0]),this._destroyContextMenu(),e("#"+this.infoId).remove(),this.addedLabel&&a.removeAttr(u)},_setOption:function(a,b){var c=this.options,d=this.element;if(this._checkContextMenuOptions(a,b),"multiple"===a)c.navigation&&(b=!1);else if("allowCopy"===a||"addItemSelector"===a||"navigation"===a)throw new Error("IconList "+a+" option cannot be set");this._super(a,b),"disabled"===a?(d.toggleClass(r+" ui-state-disabled",b).attr("aria-disabled",b),this.lastFocused&&(b?this.lastFocused.tabIndex=-1:this._setFocusable(this.lastFocused)),b&&this._dim()):"multiple"===a?b?d.attr(t,"true"):d.removeAttr(t):"itemSelector"===a&&this.refresh()},refresh:function(){var a,b,c,d=this.options,f=this.element;d.multiple&&!d.itemSelector&&apex.userHasTouched()&&(d.itemSelector=!0,d.addItemSelector=!0),f.find("a").attr(w,-1).attr(v,"option"),c=f.children(),c.addClass(i).filter(function(){return 0===e(this).find("a").length}).attr(v,"option").attr(w,-1),d.addItemSelector&&(d.itemSelector?(b=e("<span class='"+(d.multiple?k:l)+"'></span>"),c.filter(function(){return e(this).find(m).length<=0}).prepend(b)):f.find(m).remove()),this._dim(),a=f.find(p),a.length>0?this.setSelection(a,!1):(this.lastFocused&&e(this.lastFocused).is(":visible")||(this.lastFocused=g(f.children().first())),this.selectAnchor=this.lastFocused,this.lastFocused&&!d.disabled&&this._setFocusable(this.lastFocused))},resize:function(){this._dim()},focus:function(){this.lastFocused&&this.lastFocused.focus()},getColumns:function(){return this.columns},getRows:function(){return this.rows},getSelection:function(){return this.element.find(p)},getSelectionValues:function(){var a=[];return this.getSelection().each(function(){a.push(e(this).attr("data-value"))}),a},setSelection:function(a,b,c){b=!!b,this._select(a,null,b,!1,c)},_copy:function(a){var b,c,d=this.getSelection(),e=this.options.dataTransferFormats;if(d.length){for(e.forEach(function(a){a.writer.begin(d)}),b=0;b<d.length;b++)c=d.eq(b),e.forEach(function(a){a.writer.item(c,b,c.text())});e.forEach(function(b){b.writer.end(),a.setData(b.format,b.writer.toString())})}},_rowCol2Index:function(a,b){return a*this.columns+b},_index2RowCol:function(a){var b=Math.floor(a/this.columns);return{row:Math.floor(a/this.columns),column:a-b*this.columns}},_dim:function(){var a,b,d,f=this,g=this.element,h=g.width(),i=g.children(),j=i.length;j&&(a=i.first().position().top,d=i.first().outerWidth()),this.columns=j,i.each(function(b){var c=e(this).position().top;if(c>a)return a=c,f.columns=b,!1}),j>0?this.rows=Math.floor((j+this.columns-1)/this.columns):this.rows=0,1===this.rows&&(this.columns=Math.floor(h/d)),b=c.formatMessage("APEX.ICON_LIST.GRID_DIM",this.columns,this.rows),e("#"+this.infoId).text(b)},_findItem:function(a){var b,c,d,f=this.element,g=a.length,h=this.options.label;for(c=d=e(this.lastFocused).closest(j),1===g&&(c=c.next()),0===c.length&&(c=f.children().first());c.length>0;){if(b=h===!0?c.text():c.find(h).text(),b.substring(0,g).toLowerCase()===a)return c;if(c=c.next(),0===c.length&&(c=f.children().first()),c[0]===d[0])break}return null},_setFocusable:function(a){this.lastFocused&&this.lastFocused!==a&&(this.lastFocused.tabIndex=-1),a.tabIndex=0,this.lastFocused=a},_activate:function(a){var b,c;this._trigger("activate",a,{values:this.getSelectionValues()}),this.options.navigation&&!a.isDefaultPrevented()&&(b=this.getSelection(),c=b.attr("href")||b.find("a").attr("href"),c&&(a.preventDefault(),apex.navigation.redirect(c)))},_select:function(a,b,c,h,i){var j,k,l,o,q,r,t,u,v,w="set",x=this,y=this.element,z=this.options,A=y.find(p);a=a.filter(":visible"),b&&z.multiple&&("click"===b.type?b.ctrlKey||b.metaKey?w="toggle":b.shiftKey&&(w="range"):"keydown"===b.type&&(b.keyCode===e.ui.keyCode.SPACE?w=b.ctrlKey?"toggle":b.shiftKey?"range":"add":b.ctrlKey?w="none":b.shiftKey&&(w="range"))),"range"!==w||this.selectAnchor||(w="set"),"set"!==w&&"range"!==w||A.removeClass(n).removeAttr(s).find(m).removeClass(n),j=a.hasClass(n),"set"===w||"add"===w||"toggle"===w&&!j?(a.addClass(n).attr(s,!0).find(m).addClass(n),this.selectAnchor=a[0]):"range"===w?(y.children().removeClass(n).removeAttr(s).find(m).removeClass(n),r=f(e(this.selectAnchor)),t=f(a.last()),r>t&&(u=t,t=r,r=u),y.children().filter(function(a){return a>=r&&a<=t}).addClass(n).attr(s,!0).find(m).addClass(n)):"toggle"===w&&j&&(a.removeClass(n).removeAttr(s).find(m).removeClass(n),this.selectAnchor=a[0]),a.length>0&&(v=g(a.first()),c?(v.tabIndex=0,v.focus()):this._setFocusable(v),l=y.scrollParent(),o=l[0]===document?{left:0,top:0}:l.offset(),o&&(q=y.offset(),k=a.first().offset(),(k.top<o.top||k.top>o.top+l[0].offsetHeight)&&(l[0].scrollTop=k.top-q.top),(k.left+a[0].offsetWidth<o.left||k.left>o.left+l[0].offsetWidth)&&(l[0].scrollLeft=k.left-q.left))),i||z.navigation&&b&&"click"===b.type||("toggle"===w||"range"===w&&!j||"add"===w&&!j||"set"===w&&!d.arrayEqual(A,a))&&(h?C(x,b):B(x,b))}},apex.widget.contextMenuMixin))}(apex.debug,apex.clipboard,apex.lang,apex.util,apex.jQuery);