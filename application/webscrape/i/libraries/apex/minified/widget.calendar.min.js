apex.widget.calendar={ajax_calendar:function(a,b,c,d,e){var f=$v("p_cal_type_field_id"),g=$v("p_cal_date_field_id"),h=$v("p_cal_end_date_field_id"),i=$v("p_calendar_id"),j=apex.util.escapeCSS("calendar"+i),k=$v("p_cal_enable_drag_add"),l=k.charAt(0),m=k.charAt(1),n=$v("p_cal_highlight_data");"C"!=a?$s(g,$v("p_calendar_date")):(""==$v(g)&&$s(g,$v("p_calendar_date")),""==$v(h)&&$s(h,$v("p_calendar_end_date"))),"S"==a?a=$v("p_calendar_type"):$s(f,a);var o=c&&""!==c?c:$v(g);if("C"==a)var p=d&&""!==d?d:$v(h);var q=apex.jQuery.extend({dataType:"html",refreshObject:"#"+j,success:function(b){apex.jQuery("#"+j,apex.gPageContext$).html(b),$s(g,$v("p_calendar_date")),"C"==a&&$s(h,$v("p_calendar_end_date")),"Y"==l&&apex.widget.calendar.initDragDrop(),"Y"==m&&apex.widget.calendar.initAjaxDataAdd(),apex.widget.calendar.initAjaxDataModify(),"Y"==n&&loadCalendarData(),"Y"==$v("p_cal_is_mobile")&&apex.jQuery("#"+j,apex.gPageContext$).find('[data-role="listview"]').listview(),document.body.style.cursor=""}},e);apex.server.widget("calendar",{p_widget_action:b,p_widget_mod:a,x01:i,x02:o,x05:p},q)},initAjaxDataModify:function(){apex.jQuery("div.apex_cal_data_grid_src",apex.gPageContext$).on("click",function(a){}),apex.jQuery("div.apex_cal_data_grid_src",apex.gPageContext$).on("mouseenter",function(a){this.style.cursor="pointer"})},ajaxAddData:function(a){var b=apex.jQuery(a.target).find("input.apex_cal_add_url").val();if(void 0!=b&&""!=b||(b=apex.jQuery(a.target).parent().find("input.apex_cal_add_url").val()),void 0!=b&&""!=b){var c=apex.jQuery("#p_cal_url_new_window",apex.gPageContext$).val();""!=b&&("P"==c?apex.navigation.popup({url:b,name:"popupwindow",width:800,height:600}):window.location.href=b)}},initAjaxDataAdd:function(){var a,b=apex.jQuery("#p_cal_add_url",apex.gPageContext$).val(),c=apex.jQuery("#p_cal_url_new_window",apex.gPageContext$).val();b.indexOf("#DATE_VALUE#")!=-1&&apex.jQuery(".calDragDrop",apex.gPageContext$).parent().on("click",function(d){if("A"!=d.target.nodeName&&"apex_cal_data_grid_src"!=d.target.id){var e=apex.jQuery(this).find("input.apex_cal_grid_target").val();b=b.replace("#DATE_VALUE#",e),a=apex.jQuery(this).find("input.apex_cal_add_url").val(),"P"==c?apex.navigation.popup({url:a,name:"popupwindow",width:800,height:600}):window.location.href=a}}),apex.jQuery(".calDragDrop",apex.gPageContext$).parent().on("mouseenter",function(a){this.style.cursor="pointer"})},initAjaxDataShow:function(){apex.jQuery(".calDragDrop",apex.gPageContext$).parent().on("click",function(a){var b=apex.jQuery(this).find("input.apex_cal_grid_target").val();""!=b&&apex.widget.calendar.show(apex.jQuery(this),b)})},initDragDrop:function(){var a=apex.jQuery("#calendar_data_drag",apex.gPageContext$);apex.jQuery("div.apex_cal_data_grid_src",a).draggable({revert:"invalid",helper:function(){return apex.jQuery(this).clone().width(this.clientWidth)},cursor:"move",dragstart:function(a,b){apex.jQuery(this).height(180),apex.jQuery(this).width(181)}}),apex.jQuery("div.calDragDrop",a).parent().droppable({accept:"#calendar_data_drag div.apex_cal_data_grid_src",activeClass:"custom-state-active",drop:function(a,b){apex.widget.calendar.move(this,a,b.draggable)}})},move:function(a,b,c,d){var e=$v("p_calendar_id"),f=apex.util.escapeCSS("calendar"+e),g=$v("p_cal_date_field_id"),h=$v("p_cal_end_date_field_id"),i=apex.jQuery(a),j=c.find("input.apex_cal_date_source").val(),k=i.find("input.apex_cal_grid_target").val();$s(g,$v("p_calendar_date"));var l=$v("p_calendar_id"),m="calendar"+l,n=$v("p_cal_enable_drag_add"),o=n.charAt(0),p=n.charAt(1),q=$v("p_cal_highlight_data"),r=$v("p_cal_drag_process");r&&apex.server.process(r,{x01:k,x02:j},{dataType:"",loadingIndicator:"#"+f,loadingIndicatorPosition:"centered",success:function(){var a=$v(g);if("C"==$v("p_calendar_type"))var b=$v(h);var c=apex.jQuery.extend({dataType:"html",refreshObject:"#"+m,success:function(a){apex.jQuery("#"+m,apex.gPageContext$).html(a),$s(g,$v("p_calendar_date")),"C"==$v("p_calendar_type")&&$s(h,$v("p_calendar_end_date")),"Y"==o&&apex.widget.calendar.initDragDrop(),"Y"==p&&apex.widget.calendar.initAjaxDataAdd(),apex.widget.calendar.initAjaxDataModify(),"Y"==q&&loadCalendarData(),document.body.style.cursor=""}},d);apex.server.widget("calendar",{p_widget_action:"same",p_widget_mod:$v("p_calendar_type"),x01:l,x02:a,x03:$v("apex_cal_table_name"),x05:b,x06:$v("apex_cal_primary_key"),x07:j,x08:$v("p_date_column_name"),x09:k},c)}})},getDayData:function(a,b,c){var d=apex.jQuery.extend({dataType:"html",refreshObject:"#"+a},c);apex.server.widget("calendar",{p_widget_action:"DAY_DATA",x01:a,x02:b},d)}},ajax_calendar=apex.widget.calendar.ajax_calendar;