!function(a,b){"use strict";b.templateOptionsHelper={getValuesFromDialog:function(a,b){function c(a){for(var c=0;c<a.length;c++)d=b.propertyEditor("getPropertyValue",a[c].propertyName),""!==d&&e.push(d)}var d,e=[];return c(a.common),c(a.advanced),e},getProperties:function(c,d,e){var f,g,h,i,j=[],k={},l=[],m=[],n={common:[],advanced:[]};for(f=0;f<c.values.length;f++)c.values[f].groupId?(g=c.values[f].groupId,k.hasOwnProperty(g)?h=k[g]:(j.push({title:c.groups[g].title,seq:c.groups[g].seq,nullText:c.groups[g].nullText,isAdvanced:c.groups[g].isAdvanced,isRequired:!1,lovValues:[],value:""}),h=j.length-1,k[g]=h),a.inArray(c.values[f].r,c.presetValues)!==-1&&(j[h].isRequired=!0,""===j[h].value&&(j[h].value=c.values[f].r)),a.inArray(c.values[f].r,d)!==-1&&(j[h].value=c.values[f].r),j[h].lovValues.push({r:c.values[f].r,d:c.values[f].d})):(m.push(c.values[f]),a.inArray(c.values[f].r,d)!==-1&&l.push(c.values[f].r));j.sort(function(a,b){return a.seq===b.seq?a.title.localeCompare(b.title):a.seq-b.seq});var o=l.join(":");for(n.common[0]={propertyName:"general",value:o,oldValue:o,originalValue:o,metaData:{type:"TEMPLATE OPTIONS GENERAL",prompt:b.lang.getMessage("TEMPLATE_OPTIONS.GENERAL"),isReadOnly:!!e,isRequired:!1,lovValues:m,displayGroupId:"common",defaultTemplateOptions:c.defaultValues},errors:[],warnings:[]},f=0;f<j.length;f++)i=j[f].isAdvanced?"advanced":"common",n[i].push({propertyName:"grp"+f,value:j[f].value,oldValue:j[f].value,originalValue:j[f].value,metaData:{type:a.apex.propertyEditor.PROP_TYPE.SELECT_LIST,prompt:j[f].title,isReadOnly:!!e,isRequired:j[f].isRequired,nullText:j[f].nullText,lovValues:j[f].lovValues,displayGroupId:i},errors:[],warnings:[]});return n},addGeneralPropertyType:function(){a.apex.propertyEditor.addPropertyType("TEMPLATE OPTIONS GENERAL",{init:function(c,d){function e(){var b=a(this).prop("checked");b&&f.prop("checked",!0),f.prop("disabled",b)}var f=a();this["super"]("init",c,d);for(var g=c.find("input[type=checkbox]"),h=g.filter("[value='#DEFAULT#']"),i=0;i<d.metaData.defaultTemplateOptions.length;i++)f=f.add(g.filter("[value='"+b.util.escapeCSS(d.metaData.defaultTemplateOptions[i])+"']"));h.on("click setdefaultcheckboxes",e).trigger("setdefaultcheckboxes")},getValue:function(a){var b=[];return a.find("input[type=checkbox]").filter(":checked:not(:disabled)").each(function(){b.push(this.value)}),b.join(":")},setValue:function(a,b,c){this["super"]("setValue",a,b,c),a.find("input[type=checkbox]").filter("[value='#DEFAULT#']").trigger("setdefaultcheckboxes")}},"CHECKBOXES")}}}(jQuery,apex);