!function(a,b,c,d,e){"use strict";function f(a){return e.getMessage("PE."+a)}function g(a){var b=f(a),c=[b].concat(Array.prototype.slice.call(arguments,1));return e.format.apply(this,c)}function h(a){var b=f(a),c=[b].concat(Array.prototype.slice.call(arguments,1));return e.formatNoEscape.apply(this,c)}function i(b,c){var d=a.extend({"class":"",style:""},c);b.markup("<div"),d["class"]&&b.attr("class",a.isArray(d["class"])?d["class"].join(" "):d["class"]),d.style&&b.attr("style",d.style),b.markup(">")}function j(a){a.markup("</div>")}function k(a,b,c){a.markup("<span").attr("class",b).attr("aria-hidden",!0).markup("></span>"),c&&a.markup("<span").attr("class",La).markup(">").content(c).markup("</span>")}function l(b,c,d){var e,f;return e=d?Va[d]:Wa,!c&&d?void(Va[b]=e):(f=a.extend(Object.create(e),c),f["super"]=function(){var a=Array.prototype.slice,b=f["super"];return function(c){var d,f=a.call(arguments,1),g=this["super"];return this["super"]=b,d=e[c].apply(this,f),this["super"]=g,d}}(),void(Va[b]=f))}var m="a-PropertyEditor",n=m+"-wrapper",o=m+"--stacked",p=m+"-propertyGroup",q=m+"-message",r=m+"-messageText",s=m+"-editParent",t=m+"-filter",u="a-Button--stickyFilter",v="a-Toolbar-items--left",w="has-active-filter",x=p+"-header",y=p+"-title",z=p+"-body",A="a-Property",B=A+"-notFound",C=A+"--stacked",D=A+"-buttonContainer",E=D+"--comboBox",F=D+"--colorPicker",G=A+"-labelContainer",H=A+"-label",I=H+"--withIcon",J=A+"-radioGroup",K=J+"--buttonSet",L=J+"--buttonSet",M=A+"-radio",N=M+"-label",O=M+"-input",P=A+"-checkboxGroup",Q=A+"-checkbox",R=Q+"-label",S=Q+"-input",T=A+"-fieldContainer",U=T+"--comboBox",V=T+"--radioGroup",W=T+"--checkboxGroup",X=T+"--colorPicker",Y=A+"-field",Z=Y+"--readOnly",$=Y+"--text",_=Y+"--textarea",aa=Y+"--select",ba=Y+"--filter",ca=A+"-unitContainer",da=A+"-unit",ea=A+"-colorPreview",fa=A+"--scrollable",ga="js-showAll",ha="a-Button",ia=ha+"--small",ja=ha+"--noLabel",ka=ha+"--withIcon",la=ha+"--full",ma=ha+"--primary",na=ha+" "+ia+" "+ja+" "+ka,oa="is-active",pa="is-focused",qa="is-error",ra="is-warning",sa="is-expanded",ta="is-variable",ua="is-empty",va="is-changed",wa="is-disabled",xa="a-Icon",ya=xa+" icon-down-arrow",za=xa+" icon-right-arrow",Aa=xa+" icon-required",Ba=xa+" icon-error",Ca=xa+" icon-warning",Da=xa+" icon-popup-lov",Ea=xa+" icon-variable",Fa=xa+" icon-quick-pick",Ga=xa+" icon-color-picker",Ha=xa+" icon-circle",Ia=xa+"--large",Ja=xa+" "+Ia+" icon-warning",Ka=xa+" icon-open-in-dialog",La="u-VisuallyHidden",Ma="ui-dialog-flushBody",Na="u-textLower",Oa="u-textUpper",Pa="u-hidden",Qa="a-Property-highlight",Ra="data-property-id",Sa="data-group-id",Ta={COMBOBOX:"COMBOBOX",NUMBER:"NUMBER",INTEGER:"INTEGER",SELECT_LIST:"SELECT LIST",TEXT:"TEXT",TEXTAREA:"TEXTAREA",YES_NO:"YES NO",PILL_BUTTONS:"PILL BUTTONS",CHECKBOXES:"CHECKBOXES",RADIOS:"RADIOS",COLOR:"COLOR",POPUP_LOV:"POPUP LOV"},Ua={},Va={},Wa={renderDivOpen:i,renderDivClose:j,renderIcon:k,stacked:!1,noLabel:!1,labelVisible:!0,render:function(a,b,c){},init:function(a,b){this.addKeyboardHandlersForVariesState(a,b),this.addTooltipsForErrors(a,b)},destroy:function(a,b){a.closest("div."+A).off()},validate:function(){},setValue:function(a,b,c){a.val(c),b.value=c},addValue:function(a,b,c){var d,e=!1,f=a.val(),g=f?f.split(b.metaData.multiValueDelimiter):[];for(d=0;d<g.length;d++)if(c===g[d]){e=!0;break}e||g.push(c),a.val(g.join(b.metaData.multiValueDelimiter))},getValue:function(a){var b=a.find("["+Ra+"]").val();return a.hasClass(ta)&&""===b&&(b=Ua),b},getDisplayValue:function(a){return a.value},setFocus:function(a){a[0].focus()},renderCommonAttributes:function(a,b,c){a.attr("id",b).attr(Ra,c.propertyName).optionalAttr("aria-required",c.metaData.isRequired?"true":null).optionalAttr("aria-invalid",c.errors.length>0?"true":null)},commonAttributes:function(a){var b={};return b[Ra]=a.propertyName,b["aria-required"]=a.metaData.isRequired,b["aria-invalid"]=a.errors.length>0,b},renderBaseInput:function(b,c){var d,e,f=a.extend({id:"",type:"text",value:"",inputClass:[],data:{},readonly:!1,maxLength:"",attributes:{}},c);if(b.markup("<input").attr("id",f.id).attr("type",f.type).attr("value",f.value).optionalAttr("readonly",f.readonly),f.inputClass.length>0&&b.attr("class",a.isArray(f.inputClass)?f.inputClass.join(" "):f.inputClass),f.maxLength&&b.attr("maxlength",f.maxLength),f.ariaDescribedBy&&b.attr("aria-describedby",f.ariaDescribedBy),!a.isEmptyObject(f.data))for(e in f.data)f.data.hasOwnProperty(e)&&b.attr("data-"+e,f.data[e]);if(!a.isEmptyObject(f.attributes))for(d in f.attributes)f.attributes.hasOwnProperty(d)&&b.attr(d,f.attributes[d]);b.markup(" />")},renderText:function(b,c,d,e){var f,g=d.value,h=!1,i=[],j={},k=g===Ua;e=a.extend({"class":$,type:"text",textCase:d.metaData.textCase,manualEntry:!0,attributes:{}},e),i.push(Y),i.push(e["class"]),e.textCase&&i.push(this.getTextCaseClass(e.textCase)),d.metaData.isReadOnly&&(h=!0,i.push(Z),k||(g=Va[d.metaData.type].getDisplayValue(d))),e.manualEntry||(h=!0,i.push(Z),k||""===d.value||(j["return-value"]=d.value,d.metaData.lovValues(function(b){var c,e=a("["+Ra+"="+d.propertyName+"]");c=b.length>0&&b[0].r===d.value?b[0].d:d.value,Va[d.metaData.type].setValue(e,d,d.value,c)},{id:d.value}))),k&&(g="",i.push(ta)),f={id:c,type:e.type,value:g,inputClass:i,data:j,attributes:a.extend(e.attributes,this.commonAttributes(d)),readonly:h},d.metaData.maxLen&&(f.maxLength=d.metaData.maxLen),d.metaData.unit&&(f.ariaDescribedBy=f.id+"_unit"),this.renderBaseInput(b,f)},renderOption:function(a,b,c){return a.markup("<option").attr("value",b.r).optionalAttr("selected",b.r===c?"true":null),b.hasOwnProperty("isSupported")&&a.attr("data-is-supported",b.isSupported?"true":"false"),b.hasOwnProperty("isLegacy")&&a.attr("data-is-legacy",b.isLegacy?"true":"false"),a.markup(">").content(b.d).markup("</option>"),b.r===c},renderLovValues:function(b,c,d){var e,f=c,g=!1;for(a.isFunction(f)&&(f=f()),e=0;e<f.length;e++)f[e].hasOwnProperty("group")?(b.markup("<optgroup").attr("label",f[e].group).markup(">"),this.renderLovValues(b,f[e].values,d)&&(g=!0),b.markup("</optgroup>")):this.renderOption(b,f[e],d)&&(g=!0);return g},renderIconButton:function(b,c){var d=a.extend({id:"",icon:"",text:"",dataFor:null,disabled:!1,isMenuButton:!1,addContainer:!1,containerClass:"",buttonClass:""},c);d.addContainer&&this.renderDivOpen(b,{"class":D+(d.containerClass?" "+d.containerClass:"")}),b.markup("<button type='button'").attr("id",d.id).attr("class",na+(d.buttonClass?" "+d.buttonClass:"")+(d.isMenuButton?" js-menuButton":"")).attr("title",d.text).attr("aria-label",d.text).optionalAttr("disabled",d.disabled),d.dataFor&&b.attr("data-for",d.dataFor),d.isMenuButton&&b.attr("aria-haspopup","true").attr("aria-expanded","false").attr("data-menu",d.id+"_menu"),b.markup(">"),this.renderIcon(b,d.icon),b.markup("</button>"),d.addContainer&&this.renderDivClose(b)},addValueVariesStateStyle:function(c,d,e,g){var h=b.htmlBuilder(),i=b.htmlBuilder();c.addClass(ta),d.addClass(ta),g.renderIcon(h,Ea),i.markup("<span").attr("class",La).markup(">").content(f("VALUE_VARIES_POSTFIX")).markup("</span>"),a("#"+e+"_label").prepend(h.toString()).append(i.toString())},removeValueVariesStateStyle:function(b,c){var d=a("#"+b.attr("id")+"_label");b.removeClass(ta),c.removeClass(ta),d.find("span.icon-variable").remove().end().find("span."+La).remove()},addKeyboardHandlersForVariesState:function(b,c){var d,e,f;c.metaData.isReadOnly||(d=this,e=b.closest("div."+A),f=b.attr("id"),e.on("keydown","#"+f,function(b){var g=a(this);b.which===a.ui.keyCode.ESCAPE&&c.value===Ua&&(d.addValueVariesStateStyle(g,e,f,d),setTimeout(function(){g[0].value=""},1))}).on("keypress","#"+f,function(b){var c=a(this);b.which&&c.hasClass(ta)&&d.removeValueVariesStateStyle(c,e)}))},addChangeHandlersForVariesState:function(b,c){var d,e,f;c.metaData.isReadOnly||(d=this,e=b.closest("div."+A),f=b.attr("id"),e.on("change","#"+f,function(b){var g=a(this),h=g.val();g.hasClass(ta)?d.removeValueVariesStateStyle(g,e):""===h&&c.value===Ua&&d.addValueVariesStateStyle(g,e,f,d)}))},addTooltipsForErrors:function(a,b){var c=a.attr("id");a.tooltip().off("mouseover mouseout"),b.errors.length>0&&a.tooltip({items:"#"+c,content:function(a){var c,d;for(c="<ul>",d=0;d<b.errors.length;d++)c+="<li>"+b.errors[d]+"</li>";c+="</ul>",a(c)},position:{my:"left bottom",at:"left top",of:"#"+c+"_label"}}),b.warnings.length>0&&a.tooltip({items:"#"+c,content:function(a){var c,d;for(c="<ul>",d=0;d<b.warnings.length;d++)c+="<li>"+b.warnings[d]+"</li>";c+="</ul>",a(c)},position:{my:"left bottom",at:"left top",of:"#"+c+"_label"}})},initQuickPicks:function(b,c){function d(){b.val(this.value).trigger("change")}var e,g,h,i,j,k,l=[];if(c.metaData.quickPicks&&(i=c.metaData.quickPicks(),j=i.length,!c.metaData.isReadOnly&&j>0)){for(c.metaData.isRequired||(void 0===c.metaData.nullText?(l.push({type:"action",label:f("QUICK_PICK.CLEAR"),hide:function(){return""===b.val()},action:function(){b.val("").trigger("change")}}),l.push({type:"separator",hide:function(){return""===b.val()}})):l.push({type:"action",label:c.metaData.nullText,action:function(){b.val("").trigger("change")}})),e=0;e<j;e++)h={type:"action",label:i[e].d,value:i[e].r,action:d},i[e].icon&&(h.icon=i[e].icon),i[e].iconStyle&&(h.iconStyle=i[e].iconStyle),l.push(h);g=b.attr("id")+"_quickPickBtn_menu",k=a("#"+g),0===k.length&&(k=a("<div id='"+g+"'></div>").appendTo("body")),k.menu({items:l}),c.metaData.hasInitQuickPick=!0}},removeQuickPick:function(b,c){var d;c.metaData.hasInitQuickPick&&(d=b.attr("id")+"_quickPickBtn_menu",a("#"+d).remove())},addLabelClickHandler:function(a,b){var c=this,d=a.closest("div."+A),e=a.attr("id");d.on("click","#"+e+"_label",function(d){c.setFocus(a,b)})},renderQuickPickButton:function(a,b,c,d){var e,f=!!d;c.metaData.quickPicks&&(e=c.metaData.quickPicks(),c.metaData.isReadOnly||e.length>0&&this.renderIconButton(a,{id:b+"_quickPickBtn",icon:Fa,text:h("QUICK_PICK",c.metaData.prompt),isMenuButton:!0,addContainer:f,buttonClass:"a-Button--quickPick"}))},renderRadioCheckbox:function(b,c,d,e,f){var g,h,i,j,k,l;e===Ta.CHECKBOXES?(i="checkbox",j=Q,k=S,l=R):(i="radio",j=M,k=O,l=N),g=a.extend({type:i,name:c+"_name",inputValue:null,inputLabel:null,currentValue:d.value!==Ua?d.value.split(":"):d.value},f),h=c+g.inputValue,this.renderDivOpen(b,{"class":j}),b.markup("<input").attr("type",g.type).attr("id",h).attr("value",g.inputValue).attr("name",g.name).attr("class",k).optionalAttr("checked",a.inArray(g.inputValue,g.currentValue)!==-1?"true":null).markup(" />"),b.markup("<label").attr("for",h).attr("class",l).markup(">"),g.icon?b.markup('<span class="a-Icon '+g.icon+'" aria-hidden="true"></span>').markup('<span class="u-VisuallyHidden">').content(g.inputLabel).markup("</span>"):b.content(g.inputLabel),b.markup("</label>"),this.renderDivClose(b)},renderRadiosCheckboxes:function(b,c,d,e){var g,h,i=[],j=[],k=c+"_label";if(i.push(T),e===Ta.CHECKBOXES?(i.push(W),j.push(P)):e===Ta.RADIOS&&(i.push(V),j.push(J)),this.renderDivOpen(b,{"class":i}),d.metaData.isReadOnly)this.renderText(b,c,d);else{if(d.value===Ua&&j.push(ta),b.markup("<div").attr("role","group").attr("class",j.join(" ")).attr("aria-labelledby",k).attr("tabindex","-1"),this.renderCommonAttributes(b,c,d),b.markup(">"),d.metaData.type!==Ta.YES_NO)for(h=d.metaData.lovValues,a.isFunction(h)&&(h=h()),g=0;g<h.length;g++)this.renderRadioCheckbox(b,c,d,e,{inputValue:h[g].r,inputLabel:h[g].d,icon:h[g].icon});else this.renderRadioCheckbox(b,c,d,e,{inputValue:d.metaData.yesValue,inputLabel:f("YES")}),this.renderRadioCheckbox(b,c,d,e,{inputValue:d.metaData.noValue,inputLabel:f("NO")});this.renderDivClose(b)}this.renderDivClose(b)},getTextCaseClass:function(a){var b="";return"UPPER"===a?b=Oa:"LOWER"===a&&(b=Na),b}};l(Ta.TEXT,{render:function(a,b,c,d){this.renderDivOpen(a,{"class":T}),this.renderText(a,b,c,d),this.renderDivClose(a),this.renderQuickPickButton(a,b,c,!0)},init:function(a,b){this.initQuickPicks(a,b),this["super"]("init",a,b)},destroy:function(a,b){this.removeQuickPick(a,b),this["super"]("destroy",a,b)}}),l(Ta.NUMBER,{init:function(b,c){c.metaData.isReadOnly||c.metaData.supportsSubstitution||b.on("keydown",function(b){var c=d.getDecimalSeparator(),e=[8,9,13,37,39,45,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,107,109,110,189];"."===c?e.push(190):","===c&&e.push(188),a.inArray(b.which,e)===-1&&b.preventDefault()}),this["super"]("init",b,c)}},Ta.TEXT),l(Ta.INTEGER,{init:function(b,c){c.metaData.isReadOnly||c.metaData.supportsSubstitution||b.on("keydown",function(b){var c=[8,9,13,37,39,45,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,107,109,189];a.inArray(b.which,c)===-1&&b.preventDefault()}),this["super"]("init",b,c)}},Ta.TEXT),l(Ta.TEXTAREA,{stacked:!0,render:function(a,b,c,d){var e,f=Y+" "+_;this.renderDivOpen(a,{"class":D}),d&&this.renderIconButton(a,{id:b+"_modalBtn",icon:Ka,text:h("CODE_EDITOR",c.metaData.prompt),buttonClass:"a-Button--simple"}),this.renderQuickPickButton(a,b,c),this.renderDivClose(a),this.renderDivOpen(a,{"class":T}),e=c.value,e===Ua&&(e="",f+=" "+ta),f+=" "+this.getTextCaseClass(c.metaData.textCase),a.markup("<textarea rows=3").attr("maxlength",c.metaData.maxLen).attr("class",f).optionalAttr("readonly",c.metaData.isReadOnly?"true":null),this.renderCommonAttributes(a,b,c),a.markup(">").content(e).markup("</textarea>"),this.renderDivClose(a)},init:function(a,b){var c=50,d=150,e=a.prop("scrollHeight");e>c&&(e>d&&(e=d),a.height(e)),this.initQuickPicks(a,b),this["super"]("init",a,b)},destroy:function(a,b){this.removeQuickPick(a,b),this["super"]("destroy",a,b)}}),l(Ta.COMBOBOX,{manualEntry:!0,render:function(a,b,c){this.renderDivOpen(a,{"class":[T,U]}),this.renderText(a,b,c,{manualEntry:this.manualEntry}),this.renderDivClose(a),this.renderIconButton(a,{id:b+"_lovBtn",icon:Da,text:h("LIST_OF_VALUES",c.metaData.prompt),addContainer:!0,containerClass:E}),this.renderQuickPickButton(a,b,c,!0)},init:function(c,d,e){function g(){var e,f=b.htmlBuilder();f.markup("<div").attr("id","lovDlg").attr("title",j.dialogTitle).markup(">").markup("</div>"),e=a(f.toString()).lovDialog({modal:!0,minWidth:520,height:500,filters:j.filters,columnDefinitions:j.columnDefinitions,filterLov:j.filterLov,dialogClass:Ma,resizable:!1,multiValue:j.multiValue,valueSelected:function(a,b){var e,f;e=void 0!==b.r?b.r:b[j.columnDefinitions[0].name],i.manualEntry||(f=b.d?b.d:e),d.metaData.multiValueDelimiter?i["super"]("addValue",c,d,e):i.setValue(c,d,e,f),c.trigger("change")},resultsDisplay:j.resultsDisplay})}var i=this,j=a.extend({columnDefinitions:[{name:"d",title:d.metaData.prompt}],filters:[{name:"search",title:f("SEARCH"),type:"search"}],filterLov:function(b,c){a.isFunction(d.metaData.lovValues)?d.metaData.lovValues(function(a){i.manualEntry||d.metaData.isRequired||a.unshift({r:"",d:void 0!==d.metaData.nullText?d.metaData.nullText:f("SELECT")}),c(a,b.search)},b):c(d.metaData.lovValues,b.search)},multiValue:!1,dialogTitle:h("PICK",d.metaData.prompt),resultsDisplay:"table"},e),k=a("#"+c.attr("id")+"_lovBtn");this["super"]("init",c,d),k.on("click",g),k.prop("disabled",d.metaData.isReadOnly),this.initQuickPicks(c,d)},setValue:function(a,b,c,d){this.manualEntry?a.val(c):(a.data("return-value",c),d&&a.val(d)),b.value=c},getValue:function(a){var b;return b=this.manualEntry?this["super"]("getValue",a):a.find("["+Ra+"]").data("return-value")},destroy:function(a,b){this.removeQuickPick(a,b),this["super"]("destroy",a,b)}}),l(Ta.CHECKBOXES,{noLabel:!0,render:function(a,b,c){this.renderRadiosCheckboxes(a,b,c,Ta.CHECKBOXES)},init:function(a,b){this.addChangeHandlersForVariesState(a,b),this.addLabelClickHandler(a,b),this.addTooltipsForErrors(a,b)},getValue:function(a){var b=[];return a.find("input").each(function(){this.checked&&b.push(this.value)}),b.join(":")},getDisplayValue:function(b){var c,d,e,f=[],g=b.value.split(":");if(c=b.metaData.lovValues,a.isFunction(c)&&(c=c()),c){for(e=0;e<c.length;e++)a.inArray(c[e].r,g)>-1&&f.push(c[e].d);d=f.join(":")}return d},setValue:function(b,c,d){var e=b.find("input"),f=d.split(":");e.prop("checked",!1),e.each(function(){var b=a(this);a.inArray(b.val(),f)>-1&&b.prop("checked",!0)}),c.value=d},setFocus:function(a,b){b.metaData.isReadOnly?a[0].focus():a.find(":input")[0].focus()}}),l(Ta.RADIOS,{noLabel:!0,render:function(a,b,c){this.renderRadiosCheckboxes(a,b,c,Ta.RADIOS)},init:function(a,b){this.addChangeHandlersForVariesState(a,b),this.addLabelClickHandler(a,b),this.addTooltipsForErrors(a,b)},getValue:function(a){var b="";return a.find("input").each(function(){if(this.checked)return b=this.value,!1}),b},getDisplayValue:function(b){var c,d,e;if(c=b.metaData.lovValues,a.isFunction(c)&&(c=c()),c)for(e=0;e<c.length;e++)if(c[e].r===b.value){d=c[e].d;break}return d},setValue:function(b,c,d){var e=b.find("input");e.each(function(){var b=a(this);if(b.prop("checked")){if(b.val()===d)return!1;b.prop("checked",!1)}else if(b.val()===d)return b.prop("checked",!0),!1}),c.value=d},setFocus:function(a,b){b.metaData.isReadOnly?a[0].focus():a.find(":input")[0].focus()}}),l(Ta.YES_NO,{init:function(a,b){this["super"]("init",a,b),b.metaData.isReadOnly||a.addClass(K)},getDisplayValue:function(a){return f(a.metaData.yesValue===a.value?"YES":"NO")}},Ta.RADIOS),l(Ta.PILL_BUTTONS,{init:function(a,b){this["super"]("init",a,b),b.metaData.isReadOnly||a.addClass(L)}},Ta.RADIOS),l(Ta.SELECT_LIST,{render:function(a,b,c,d){var e=Y+" "+aa,h=c.value,i=!1;this.renderDivOpen(a,{"class":T}),c.metaData.isReadOnly?this.renderText(a,b,c):(h===Ua&&(e+=" "+ta),a.markup("<select size=1").attr("class",e),this.renderCommonAttributes(a,b,c),a.markup(">"),h===Ua?(i=this.renderOption(a,{r:"",d:""},""),c.metaData.isRequired||this.renderOption(a,{r:"",d:void 0!==c.metaData.nullText?c.metaData.nullText:f("SELECT")},null),h=""):c.metaData.isRequired&&""!==h||(i=this.renderOption(a,{r:"",d:void 0!==c.metaData.nullText?c.metaData.nullText:f("SELECT")},h)),this.renderLovValues(a,c.metaData.lovValues,h)||i||this.renderOption(a,{r:h,d:g("INVALID",h)},h),a.markup("</select>")),j(a),this.renderQuickPickButton(a,b,c,!0),d&&this.renderIconButton(a,{id:b+"_btn",icon:d.icon,text:d.text,addContainer:!0})},init:function(a,b){this.addChangeHandlersForVariesState(a,b),this.addTooltipsForErrors(a,b),this.initQuickPicks(a,b)},getDisplayValue:function(b){var c,d;if(""!==b.value){if(c=b.metaData.lovValues,a.isFunction(c)&&(c=c()),c)for(var e=0;e<c.length;e++)if(c[e].r===b.value){d=c[e].d;break}}else d=b.metaData.nullText?b.metaData.nullText:b.value;return d},destroy:function(a,b){this.removeQuickPick(a,b),this["super"]("destroy",a,b)}}),l(Ta.COLOR,{render:function(a,b,c){var d=["#FF3B30","#FF9500","#FFCC00","#4CD964","#34AADC","#007AFF","#5856D6","#FF2D55","#FFFFFF","#C7C7CC","#8E8E93","#000000"];this.renderDivOpen(a,{"class":[T,X]}),a.markup("<span").attr("id",b+"_preview").attr("class",ea).markup(">").markup("</span>"),this.renderText(a,b,c,{manualEntry:this.manualEntry}),this.renderDivClose(a),this.renderIconButton(a,{id:b+"_picker",icon:Ga,text:h("COLOR_PICKER",c.metaData.prompt),addContainer:!0,containerClass:F}),c.metaData.quickPicks=function(){var a,b=[];for(a=0;a<d.length;a++)b.push({d:d[a],r:d[a],icon:Ha,iconStyle:"color: "+d[a]+";"});return b},this.renderQuickPickButton(a,b,c,!0)},init:function(b,c){var d=this,e=b.attr("id"),f=a("#"+e+"_picker"),g=a("#"+e+"_preview");this["super"]("init",b,c),b.ColorPicker({eventName:"xxx",onSubmit:function(a,c,d,e){b.trigger("change").ColorPickerHide()},onBeforeShow:function(){a(this).ColorPickerSetColor(this.value)},onShow:function(b){return a(b).fadeIn("fast").position({my:"right top",at:"right bottom",of:"#"+e+"_picker"}).css("z-index",200),!1},onHide:function(c){return a(c).fadeOut("fast"),b.trigger("change"),!1},onChange:function(c,d,e){var f=b.attr("id"),g=a("#"+f+"_preview"),h="#"+d.toUpperCase();g.css("background-color",h),b.val(h)}}).ColorPickerHide(),b.on("change",function(a){var e=a.target;e.value=e.value.toUpperCase(),d.setValue(b,c,e.value)}),f.on("click",function(a){b.ColorPickerShow(),a.preventDefault()}),g.css("background-color",b.val()),this.initQuickPicks(b,c)},setValue:function(b,c,d){var e=b.attr("id"),f=a("#"+e+"_preview");b.val(d),f.css("background-color",d),c.value=d},destroy:function(a,b){this.removeQuickPick(a,b),this["super"]("destroy",a,b)}},Ta.TEXT),l(Ta.POPUP_LOV,{manualEntry:!1,init:function(a,b){this["super"]("init",a,b)}},Ta.COMBOBOX),a.widget("apex.propertyEditor",{version:"5.1",widgetEventPrefix:"propertyeditor",baseId:null,nextId:1,idMap:{},propMap:{},currentPropertyName:null,hasSearchField:!1,options:{data:{propertySet:[],componentCount:[]},idPrefix:null,showAll:!1,labelsAlwaysAbove:!1,hideDisplayGroups:!1,searchable:!1,searchKey:null,pinSearch:!1,stackLabelsWidth:280,focusPropertyName:null,externalEdit:null,expand:null,collapse:null,activate:null,deactivate:null,change:null},_create:function(){var b=this.options;if(!b.data||!b.data.propertySet)throw"Missing required data option.";this.baseId=(b.idPrefix||this.element[0].id||"pe")+"_",this.element.addClass(m),this.options.showAll&&this.element.addClass(ga),this._on(this._eventHandlers),this.options.searchable&&this._on(this.element.prev(),this._SearchEventHandlers),this.refresh(),this.options.labelsAlwaysAbove?this.element.addClass(o):this.element.hasClass("resize")?(this._on({resize:function(b){this.options.labelsAlwaysAbove||this.element.toggleClass(o,a(b.target).width()<this.options.stackLabelsWidth)}}),this.element.toggleClass(o,this.element.width()<this.options.stackLabelsWidth)):this.element.removeClass(o)},_eventHandlers:{click:function(b){var c=null,d=a(b.target);d.is("."+x)?c=d.parent():d.parent("."+x).length>0&&(c=d.parent().parent()),c&&this._toggle(c),d.attr("id")===this.baseId+"externalEdit"&&this.options.externalEdit()},keydown:function(b){var c=null,d=!1,e=a.ui.keyCode,f=b.keyCode,g=a(b.target);g.is("."+x)&&(f===e.HOME?c=g.parent().parent().children(":visible").first():f===e.END?c=g.parent().parent().children(":visible").last():f===e.DOWN?(c=g.parent().nextAll().filter(":visible").first(),0===c.length&&(c=g.parent().parent().children(":visible").first())):f===e.UP?(c=g.parent().prevAll().filter(":visible").first(),0===c.length&&(c=g.parent().parent().children(":visible").last())):f===e.LEFT?(this._collapse(g.parent()),d=!0):f===e.RIGHT?(this._expand(g.parent()),d=!0):f!==e.SPACE&&f!==e.ENTER||(this._toggle(g.parent()),d=!0),d&&b.preventDefault(),c&&(c.children("."+x)[0].focus(),b.preventDefault()))},"focusin div.a-Property":function(b){var c=a(b.target).closest("div.a-Property");c.addClass(oa+" "+pa),this._activate(c)},"focusout div.a-Property":function(b){var c=a(b.target).closest("div.a-Property");c.removeClass(oa+" "+pa)},"change div.a-Property":function(b){var c=a(b.target).closest("div.a-Property");this._checkForChange(c)},"focusin div.a-PropertyEditor-propertyGroup-header":function(b){this._deactivate(),a(b.target).closest("div.a-PropertyEditor-propertyGroup-header").addClass(pa)},"focusout div.a-PropertyEditor-propertyGroup-header":function(b){a(b.target).closest("div.a-PropertyEditor-propertyGroup-header").removeClass(pa)}},_SearchEventHandlers:{"keyup input.a-Property-field--filter":function(b){27===b.which?(this.clearSearch(),this.expandAll()):this.search(a(b.target).val())},"click button.a-Button--stickyFilter":function(b){var c=this.options;a(b.currentTarget).toggleClass(oa).hasClass(oa)?c.pinSearch=!0:(c.pinSearch=!1,c.searchKey=null)}},_destroy:function(){this.element.removeClass(m+" "+ga).empty()},_setOption:function(a,b){var c,d,e,f;if("data"===a)for(e=this.options.data.propertySet,c=0;c<e.length;c++)for(f=e[c],d=0;d<f.properties.length;d++)Va[f.properties[d].metaData.type].destroy(this._getElement(f.properties[d]),f.properties[d]);if(this._super(a,b),"data"===a){if(!b.propertySet)throw"Missing required properties.";this.refresh()}else"showAll"===a?this.element.toggleClass(ga,!!b):"labelsAlwaysAbove"===a&&(b?this.element.addClass(o):this.element.hasClass("resize")?this.element.toggleClass(o,this.element.width()<this.options.stackLabelsWidth):this.element.removeClass(o))},_callPropertyInit:function(a){var c=a.propertyName,d=this.element.find("["+Ra+"="+b.escapeCSS(c)+"]");Va[a.metaData.type].init(d,a)},_renderLabel:function(a,c){var d=b.htmlBuilder(),e=c.errors.length>0,g=c.warnings.length>0,h=c.value===Ua,l=H,m=[],n=this._getId(c)+"_label";m.push(G),Va[c.metaData.type].labelVisible?(e||g||h)&&(l+=" "+I):(l+=" "+La,m.push(G+"--hiddenLabel")),i(a,{"class":m}),Va[c.metaData.type].noLabel?a.markup("<span").attr("id",n).attr("class",l).markup(">"):a.markup("<label").attr("id",n).attr("for",this._getId(c)).attr("class",l).markup(">"),Va[c.metaData.type].labelVisible&&(e&&k(d,Ba),g&&k(d,Ca),c.value===Ua&&k(d,Ea)),a.markup(d.html),a.content(c.metaData.prompt),Va[c.metaData.type].labelVisible&&(e&&a.markup("<span").attr("class",La).markup(">").content(f("ERROR_POSTFIX")).markup("</span>"),g&&a.markup("<span").attr("class",La).markup(">").content(f("WARNING_POSTFIX")).markup("</span>"),c.value===Ua&&a.markup("<span").attr("class",La).markup(">").content(f("VALUE_VARIES_POSTFIX")).markup("</span>")),Va[c.metaData.type].noLabel?a.markup("</span>"):a.markup("</label>"),j(a)},_countVisibleProperties:function(a){var b,c,d,e=this.options.componentCount>0;for(b=0,c=0;c<a.length;c++)d=a[c],e&&d.metaData.isUnique||this._isCommon(d)&&(b+=1);return b},_renderDisplayGroup:function(a,b,c){var d,e,f,g,h,i,l,m,n=this.options.componentCount>0,o=b.properties;if(g=o.length,m=p,this.options.hideDisplayGroups)for(d=0;d<g;d++)e=o[d],n&&e.metaData.isUnique||this._renderProperty(a,e);else{for(h=this._countVisibleProperties(o),l=!b.collapsed,l?(f=ya,m+=" "+sa):f=za,0===h&&(m+=" "+ga),i=this.baseId+"g_"+c,a.markup("<div role='group'").attr("class",m).attr(Sa,b.displayGroupId).attr("aria-labelledby",i+"_LABEL").markup(">"),a.markup("<div tabindex='0'").attr("class",x).attr("aria-controls",i).attr("aria-expanded",l?"true":"false").attr("aria-labelledby",i+"_LABEL").markup(">"),k(a,f),a.markup("<h2").attr("class",y).attr("id",i+"_LABEL").markup(">").content(b.displayGroupTitle).markup("</h2>"),j(a),a.markup("<div").attr("id",i).attr("class",z),l||a.attr("style","display:none;"),a.markup(">"),d=0;d<g;d++)e=o[d],n&&e.metaData.isUnique||this._renderProperty(a,e);j(a),j(a)}},_renderDisplayGroups:function(a){var b,c=this.options.data.propertySet;for(b=0;b<c.length;b++)this._renderDisplayGroup(a,c[b],b)},_renderProperty:function(a,b){var c,d=[A];b.hasChanged&&d.push(va),Va[b.metaData.type].stacked&&d.push(C),Va[b.metaData.type].minHeight&&(c="min-height: "+Va[b.metaData.type].minHeight+"px;"),Va[b.metaData.type].maxHeight&&(c="max-height: "+Va[b.metaData.type].maxHeight+"px;",d.push(fa)),Va[b.metaData.type].height&&(c="max-height: "+Va[b.metaData.type].height+"px;",d.push(fa)),b.errors.length>0&&d.push(qa),b.warnings.length>0&&d.push(ra),b.value===Ua&&d.push(ta),this._isCommon(b)||d.push(ga);var e={"class":d,style:c};i(a,e),b.metaData.isRequired&&k(a,Aa,f("REQUIRED")),this._renderLabel(a,b),Va[b.metaData.type].render(a,this._getId(b),b),b.metaData.unit&&(a.markup("<div").attr("class",ca).markup(">"),a.markup("<span").attr("class",da).attr("id",this._getId(b)+"_unit").markup(">").content(b.metaData.unit).markup("</span>"),a.markup("</div>")),j(a)},_getProperty:function(a){return this.propMap[a]},_getId:function(a,b){var c;return c=this.idMap[a.propertyName],c||(c=this.baseId+this.nextId,this.nextId+=1,this.idMap[a.propertyName]=c),b&&(c+=b),c},_getElement:function(b,c){return a("#"+this._getId(b,c))},_isCommon:function(a){return a.metaData.isCommon||a.value!==a.metaData.defaultValue||a.errors.length>0||a.warnings.length>0},_activate:function(a){var b=this,c=a.find("["+Ra+"]").attr(Ra),d=this._getProperty(c);this.currentPropertyName!==c&&(this._deactivate(),this.currentPropertyName=c,setTimeout(function(){b._trigger("activate",{},d)},0))},_deactivate:function(){var a=this;this.currentPropertyName=null,setTimeout(function(){a._trigger("deactivate")},0)},_checkForChange:function(b){var d,e,f,g,h=b.find("["+Ra+"]").attr(Ra),i=this._getProperty(h),j=i.oldValue;if(c.info("propertyEditor _checkForChange",b),e=this.getValue(b,i),f=a("#"+this.idMap[h]),f.hasClass(ta)&&""===e&&(e=Ua),e!==j){if(i.value=e,i.oldValue=e,this.options.showAll){b.toggleClass(ga,!this._isCommon(i)),g=b.closest("div."+p);var k=g.find("div."+A).filter(":not(."+ga+")").length;g.toggleClass(ga,0===k)}d={propertyName:h,property:this._getProperty(h),previousValue:j,property$:b},this._trigger("change",{},d),b.addClass("is-changed")}},_expand:function(a){a.hasClass(sa)||(a.addClass(sa).children("."+z).show(),a.children("."+x).attr("aria-expanded","true").children("."+xa).removeClass(za).addClass(ya),this._trigger("expand",{},{displayGroupId:a.attr("data-group-id")}))},_collapse:function(a){a.hasClass(sa)&&(a.removeClass(sa).children("."+z).hide(),a.children("."+x).attr("aria-expanded","false").children("."+xa).removeClass(ya).addClass(za),this._trigger("collapse",{},{displayGroupId:a.attr("data-group-id")}))},_toggle:function(a){a.hasClass(sa)?this._collapse(a):this._expand(a)},refresh:function(){var a,d,e,g,h,i=b.htmlBuilder(),j=this.options,k=this.element,l=f("PIN_FILTER"),m=j.componentCount,o=j.data.propertySet,p=j.externalEdit;if(this.nextId=1,this.idMap={},this.propMap={},c.info("propertyEditor refresh"),this._deactivate(),0===m||1===m&&0===o.length?h=f("NO_COMMON_PROPERTIES"):0===o.length&&(h=f("NO_COMPONENTS_SELECTED")),h)return i.markup("<div").attr("class",q).markup(">"),i.markup("<span").attr("class",Ja).markup(">"),i.markup("<span").attr("class",La).markup(">").content(f("WARNING")).markup("</span>").markup("</span>"),i.markup("<p").attr("class",r).markup(">").content(h).markup("</p>"),i.markup("</div>"),k.html(i.toString()).addClass(ua),void(j.searchable&&(k.prev().addClass(wa).find("."+ba).prop("disabled",!0),j.pinSearch||this.clearSearch()));for(k.removeClass(ua),p&&i.markup("<div").attr("class",s).markup(">").markup("<button").attr("type","button").attr("id",this.baseId+"externalEdit").attr("class",ha+" "+la+" "+ma).markup(">").content(f("EDIT_COMPONENT")).markup("</button>").markup("</div>"),this._renderDisplayGroups(i),k.children().remove(),k.html('<div class="resize u-ScrollingViewport '+n+'">'+i.toString()+"</div>"),j.searchable&&k.find("."+n).css("height",k.css("height")).css("width",k.css("width")),a=0;a<o.length;a++)for(e=o[a].properties,d=0;d<e.length;d++)g=e[d],this.propMap[g.propertyName]=g,this._callPropertyInit(g);j.focusPropertyName&&this.focus(j.focusPropertyName),j.searchable&&(this.hasSearchField?(j.pinSearch?this.search(j.searchKey):this.clearSearch(),k.prev().removeClass(wa).find("."+ba).prop("disabled",!1)):(k.prev().find("."+v).prepend('<div class="'+t+'"><input aria-controls="pe" type="search" class="'+Y+" "+ba+'" aria-label="'+f("FILTER_PROPERTIES")+'" placeholder="'+f("FILTER")+'" /><span class="a-Icon icon-search a-PropertyEditor-filter-icon" aria-hidden="true"></span><button class="a-Button a-Button--noLabel a-Button--simple '+u+'" type="button" title="'+l+'" aria-label="'+l+'"><span class="a-Icon icon-pin" aria-hidden="true"></span></button></div>'),this.hasSearchField=!0))},getPropertyValue:function(a){var b=this._getProperty(a),c=this._getElement(b),d=b.metaData.type;return Va[d].getValue(c.closest("div."+A))},updatePropertyValue:function(a,b,d){var e,f,g,h;c.info("propertyEditor updatePropertyValue: Property "+a+" to "+b),f=this._getProperty(a),f&&(g=this._getElement(f),h=f.metaData.type,e=f.value,b!==e&&(f.value=b,f.oldValue=b,b!==Ua?Va[h].setValue(g,f,b):this.updateProperty(f),d||g.trigger("change")))},updateProperty:function(a){var d,e,f=this.options.data.propertySet,g=b.htmlBuilder();for(c.info("propertyEditor updateProperty: ",a),d=0;d<f.length;d++)for(e=0;e<f[d].properties.length;e++)f[d].properties[e].propertyName===a.propertyName&&(f[d].properties.splice(e,1),f[d].properties.splice(e,0,a));this._renderProperty(g,a),this._getElement(a).closest("div."+A).replaceWith(g.toString()),Va[a.metaData.type].destroy(this._getElement(a),a),
this._callPropertyInit(a)},addProperty:function(d){var e,f,g,h,i,j,k,l=b.htmlBuilder(),m=b.htmlBuilder(),n=this.options.data.propertySet,o=0,p=0,q=!1,r=!1,s=a.extend({property:{},prevPropertyName:null,displayGroup:{},prevDisplayGroupId:null},d);for(c.info("propertyEditor addProperty: ",s),e=0;e<n.length;e++)if(n[e].displayGroupId===s.property.metaData.displayGroupId){p=e,q=!0;break}if(!q){for(f=0;f<n.length;f++)if(n[f].displayGroupId===s.prevDisplayGroupId){p=f+1;break}n.splice(p,0,s.displayGroup)}for(i=n[p].properties,g=0;g<i.length;g++)if(i[g].propertyName===s.property.propertyName){o=g,r=!0;break}if(!r){for(h=0;h<i.length;h++)if(i[h].propertyName===s.prevPropertyName){o=h+1;break}n[p].properties.splice(o,0,s.property),this.propMap[s.property.propertyName]=s.property,q?(this._renderProperty(l,s.property),0===o?this.element.find("div["+Sa+"="+b.escapeCSS(s.displayGroup.displayGroupId)+"]").find("div."+z).prepend(l.toString()):a("#"+this.idMap[s.prevPropertyName]).closest("div."+A).after(l.toString()),j=this._countVisibleProperties(n[p].properties),k=this.element.find("div["+Sa+"="+b.escapeCSS(s.displayGroup.displayGroupId)+"]"),j>0&&k.hasClass(ga)&&k.removeClass(ga)):(this._renderDisplayGroup(m,s.displayGroup,p),0===p?this.element.prepend(m.toString()):this.element.find("div["+Sa+"="+b.escapeCSS(s.prevDisplayGroupId)+"]").after(m.toString())),this._callPropertyInit(s.property)}},removeProperty:function(a){var b,d,e,f,g,h=!1,i=this.options.data.propertySet,j=!1;for(c.info("propertyEditor removeProperty: ",a),this.currentPropertyName===a&&this._deactivate(),b=0;b<i.length;b++)if(!j)for(h=1===i[b].properties.length,d=0;d<i[b].properties.length;d++)if(i[b].properties[d].propertyName===a){f=i[b].properties[d],e=this._getElement(f),g=e.closest("div."+p),h?(i.splice(b,1),g.remove()):(Va[f.metaData.type].destroy(e,f),i[b].properties.splice(d,1),e.closest("div."+A).remove()),j=!0;break}},expand:function(a){var c=this.element.find("div."+p).filter("["+Sa+"="+b.escapeCSS(a)+"]");this._expand(c)},expandAll:function(){var b=this;this.element.find("div."+p).each(function(){b._expand(a(this))})},collapseAll:function(){var b=this;this.element.find("div."+p).each(function(){b._collapse(a(this))})},getValueVariesConstant:function(){return Ua},setValue:function(a,b,c){Va[b.metaData.type].setValue(a,b,c)},getValue:function(a,b){return Va[b.metaData.type].getValue(a)},focus:function(a){var b,c,d,e;e=a?a:this.currentPropertyName?this.currentPropertyName:this.options.data.propertySet[0].properties[0].propertyName,c=this._getProperty(e),d=this._getElement(c),b=d.closest("div."+p),b.hasClass(sa)||this._expand(b),Va[c.metaData.type].setFocus(d,c)},saveProperty:function(a){var b,c,d;a?b=a:this.currentPropertyName&&(b=this.currentPropertyName),b&&(c=this._getProperty(b),d=this._getElement(c),d.trigger("change"))},goToGroup:function(a){var c=this.options,d=this.element.find("div."+p).filter("["+Sa+"="+b.escapeCSS(a)+"]").find("["+Ra+"]").first().attr(Ra);c.searchable&&this.clearSearch(),this.collapseAll(),this.expand(a),this.focus(d)},search:function(b){var c,d=this.element,e=d.prev();if(d.find("."+Pa+", ."+Qa).removeClass(Pa+" "+Qa),a("."+B).remove(),e.removeClass(w),!b||b.length<2)return void(this.options.searchKey=null);c=b.trim().toLowerCase(),this.options.searchKey=c,e.addClass(w);var g=[],h=[],i={},j=[],k=[],l=this,m=function(b){var c,d=a("#"+b),e=d.get(0).tagName.toUpperCase();return c="INPUT"===e||"TEXTAREA"===e?$v(b):"SELECT"===e?a("#"+b+" option:selected").text():"BUTTON"===e?d.text():"DIV"===e?d.find("input:checked").next().text():"",c.toLowerCase()},o=(function(){a("."+y).each(function(b){var c=a(this),d=c.text().toLowerCase(),e=c.attr("id"),f=[];j.push(e),g[b]={pe_id:e,pe_title:d,pe_children:[]},f=g[b].pe_children,c.parent().next().find("."+H).each(function(){var b=a(this),c=b.attr("id");f.push({pe_label_id:c,pe_label:b.text().toLowerCase(),pe_value:m(c.slice(0,-6))}),k.push(c),i[c]=e})})}(),function(a){var b,c,d,e,f,i=g.length;for(b=0;b<i;b++)for(d=g[b],d.pe_title.indexOf(a)!=-1&&h.push(d.pe_id),f=d.pe_children.length,c=0;c<f;c++)e=d.pe_children[c],e.pe_label.indexOf(a)==-1&&e.pe_value.indexOf(a)==-1||h.push(e.pe_label_id);p(h)}),p=function(b){var d,e,g,h,m,o,p,q,r=[],s=b.length,t=j.length,u=k.length;0===s&&a("."+n).append('<div class="'+B+'"> <span class="a-Icon icon-search" aria-hidden="true"></span><br />'+f("FILTER_NO_MATCH")+"</div>");var v=function(a){return a.indexOf("_g_")!==-1?a:i[a]},w=function(){l._expand(q.parent().removeClass(Pa))},x=function(a,b){var c=a.text().replace(new RegExp("("+b+")","gi"),'<span class="'+Qa+'">$1</span>');a.html(c)};for(e=0;e<t;e++)a("#"+j[e]).parent().parent().addClass(Pa);for(g=0;g<u;g++)a("#"+k[g]).parent().parent().addClass(Pa);for(d=0;d<s;d++)m=b[d],p=a("#"+m),q=p.parent().parent(),q.removeClass(Pa),m.indexOf("_g_")!==-1&&q.find("."+Pa).removeClass(Pa),x(p,c),r.push(v(m));for(r=a.unique(r),o=r.length,h=0;h<o;h++)p=a("#"+r[h]),q=p.parent().next(),w()};o(c)},clearSearch:function(){this.options.searchKey=null,a("#peToolbar").removeClass(w).find("."+ba).val("").trigger("keyup").siblings("."+u).removeClass(oa)}}),a.apex.propertyEditor.PROP_TYPE=Ta,a.apex.propertyEditor.addPropertyType=l}(apex.jQuery,apex.util,apex.debug,apex.locale,apex.lang);